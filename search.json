[{"title":"Androidï¼šå†™äº†è¿™ä¹ˆå¤šä»£ç ï¼Œä½ çœŸçš„ç†è§£æ³›å‹å—","url":"%2Fgenerics.html","content":"\n{% li https://cdn.lishaoy.net/generics/generics.png, Generics, Generics %}\n\nåœ¨æˆ‘ä»¬çš„å®é™…å·¥ä½œä¸­ **æ³›å‹(Generics)** æ˜¯æ— å¤„ä¸åœ¨çš„ï¼Œæˆ‘ä»¬ä¹Ÿå†™è¿‡ä¸å°‘ï¼Œçœ‹åˆ°çš„æ›´å¤šï¼Œå¦‚ï¼Œæºç ã€å¼€æºæ¡†æ¶... éšå¤„å¯è§ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬çœŸæ­£ç†è§£æ³›å‹å—ï¼Ÿç†è§£å¤šå°‘å‘¢ï¼Ÿä¾‹å¦‚ï¼š`Box` ã€`Box<Object>` ã€`Box<?>` ã€`Box<T>` ã€`Box<? extends T>` ã€`Box<? super T>` ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿæœ¬ç¯‡æ–‡ç« å°†ä¼šå¯¹ **æ³›å‹(Generics)** è¿›è¡Œå…¨é¢çš„è§£æï¼Œè®©æˆ‘ä»¬å¯¹æ³›å‹æœ‰æ›´æ·±å…¥çš„ç†è§£ã€‚\n\n<hr />\n\n<!-- more -->\n\næœ¬ç¯‡æ–‡ç« çš„ç¤ºä¾‹ä»£ç æ”¾åœ¨ [Github](https://github.com/persilee/genericsDemo) ä¸Šï¼Œæ‰€æœ‰çŸ¥è¯†ç‚¹ï¼Œå¦‚å›¾ï¼š\n\n<div style=\"width: 100%; margin:auto\">\n\n![no-shadow](https://cdn.lishaoy.net/generics/generic1.xmind.png \"\")\n\n</div>\n\n## Lucy å–œæ¬¢åƒğŸŠï¼ˆä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹ï¼‰\n\né¦–å…ˆï¼Œé€šè¿‡ä¸€ä¸ªç›˜å­è£…æ°´æœå°æ•…äº‹æ¥æ‰“å¼€æˆ‘ä»¬çš„æ³›å‹æ¢ç´¢ä¹‹æ—…ï¼ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹ï¼‰ï¼Œæ•…äº‹åœºæ™¯å¦‚ä¸‹ï¼š\n\n{% note info %} Lucy åˆ° James å®¶åšå®¢ï¼ŒJames éœ€è¦æ‹›å¾…å®¢äººï¼Œä¸”çŸ¥é“ Lucy å–œæ¬¢åƒæ©˜å­ğŸŠï¼Œäºæ˜¯ä½¿ç”¨æ°´æœç›˜è£…æ»¡äº†ğŸŠæ¥æ‹›å¾…å®¢äºº {% endnote %} \n\nè¿™ä¸ªåœºæ™¯æ€ä¹ˆç”¨ä»£ç è¡¨ç°å‘¢ï¼Œæˆ‘ä»¬æ¥æ–°å»ºå‡ ä¸ªç±»ï¼Œå¦‚ä¸‹ï¼š\n\nFruitï¼šæ°´æœç±»\n\n```java\npackage entity;\n\npublic class Fruit {\n\n    @Override\n    public String toString() {\n\n        return \"This is Fruit\";\n    }\n}\n```\n\nAppleï¼šè‹¹æœç±»ï¼Œç»§æ‰¿æ°´æœç±»\n\n```java\npackage entity;\n\npublic class Apple extends Fruit {\n\n    @Override\n    public String toString() {\n\n        return \" Apple ğŸ\";\n    }\n}\n```\n\nOrangeï¼šæ©˜å­ç±»ï¼Œç»§æ‰¿æ°´æœç±»\n\n```java\npackage entity;\n\npublic class Orange extends Fruit {\n\n    @Override\n    public String toString() {\n\n        return \" Orange ğŸŠ\";\n    }\n}\n```\n\nPlateï¼šæ°´æœç›˜æ¥å£\n\n```java\npackage entity;\n\npublic interface Plate<T> {\n\n    public void set(T t);\n\n    public T get();\n\n}\n```\n\nFruitPlateï¼šæ°´æœç›˜ç±»ï¼Œå®ç°æ°´æœç›˜æ¥å£\n\n```java\npackage entity;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class FruitPlate implements Plate {\n\n    private List items = new ArrayList(6);\n\n    @Override\n    public void set(Object o) {\n        items.add(o);\n    }\n\n    @Override\n    public Fruit get() {\n        int index = items.size() - 1;\n        if(index >= 0) return (Fruit) items.get(index);\n        return null;\n    }\n\n}\n```\n\nAiFruitPlateï¼šæ™ºèƒ½æ°´æœç›˜ï¼Œå®ç°æ°´æœç›˜æ¥å£\n\n```java\npackage entity;\n\nimport java.util.ArrayList;\nimport java.util.List;\n/**\n * ä½¿ç”¨æ³›å‹ç±»å®šä¹‰\n * @param <T>\n */\npublic class AiFruitPlate<T> implements Plate<T> {\n\n    private List<T> fruits = new ArrayList<T>(6);\n    @Override\n    public void set(T t) {\n        fruits.add(t);\n    }\n\n    @Override\n    public T get() {\n        int index = fruits.size() - 1;\n        if(index >= 0) return fruits.get(index);\n        return null;\n    }\n}\n```\n\nPersonï¼šäººç±»\n\n```java\npackage entity;\n\npublic class Person {\n\n}\n```\n\nLucyï¼šLucyç±»ï¼Œç»§æ‰¿ Person ç±»ï¼Œå¥¹æ‹¥æœ‰åƒæ©˜å­çš„èƒ½åŠ› `eat`\n\n```java\nimport entity.Orange;\nimport entity.Person;\n\npublic class Lucy extends Person {\n\n    public void eat(Orange orange) {\n\n        System.out.println(\"Lucy like eat\" + orange);\n\n    }\n\n}\n```\n\nJamesï¼šJamesç±»ï¼Œç»§æ‰¿ Person ç±»ï¼Œä»–æ‹¥æœ‰è·å–æ°´æœç›˜çš„èƒ½åŠ› `getAiFruitPlate`\n\n```java\nimport entity.*;\n\npublic class James extends Person {\n\n    public FruitPlate getPlate() {\n        return new FruitPlate();\n    }\n\n    public AiFruitPlate getAiFruitPlate() {\n        return new AiFruitPlate();\n    }\n\n    public void addFruit(FruitPlate fruitPlate, Fruit fruit) {\n        fruitPlate.set(fruit);\n    }\n\n    public void add(AiFruitPlate<Orange> aiFruitPlate, Orange orange) {\n        aiFruitPlate.set(orange);\n    }\n\n}\n```\n\nScenarioï¼šæµ‹è¯•ç±»\n\n```java\nimport entity.*;\n\npublic class Scenario {\n\n    public static void main(String[] args) {\n        scenario1();\n        scenario2();\n    }\n    //æ²¡æœ‰ä½¿ç”¨æ³›å‹\n    private static void scenario1() {\n        James james = new James();\n        Lucy lucy = new Lucy();\n        FruitPlate fruitPlate = james.getPlate(); // James æ‹¿å‡ºæ°´æœç›˜\n        james.addFruit(fruitPlate,new Orange()); // James å¾€æ°´æœç›˜é‡Œè£…æ©˜å­\n        lucy.eat((Orange) fruitPlate.get()); // éœ€è¦è½¬å‹ä¸º Orange\n    }\n    //ä½¿ç”¨äº†æ³›å‹\n    private static void scenario2() {\n        James james = new James();\n        Lucy lucy = new Lucy();\n        AiFruitPlate<Orange> aiFruitPlate = james.getAiFruitPlate(); // James æ‹¿å‡ºæ™ºèƒ½æ°´æœç›˜ï¼ˆçŸ¥é“ä½ éœ€è¦è£…æ©˜å­ï¼‰\n        james.add(aiFruitPlate, new Orange()); // James å¾€æ°´æœç›˜é‡Œè£…æ©˜å­ï¼ˆå¦‚æœï¼Œè£…çš„ä¸æ˜¯æ©˜å­ä¼šæé†’ï¼‰\n        lucy.eat(aiFruitPlate.get()); // ä¸éœ€è¦è½¬å‹\n    }\n\n}\n```\n\nè¿è¡Œç»“æœï¼Œå¦‚ä¸‹ï¼š\n\n```bash\nLucy like eat  Orange ğŸŠ\nLucy like eat  Orange ğŸŠ\n\nProcess finished with exit code 0\n```\n\næˆ‘ä»¬å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹å‡ºï¼Œä½¿ç”¨äº†æ³›å‹ä¹‹åï¼Œä¸éœ€è¦ç±»å‹è½¬æ¢ï¼Œå¦‚æœï¼Œæˆ‘ä»¬æŠŠ `scenario1()` æ–¹æ³•ï¼Œç¨å¾®æ”¹ä¸‹ï¼Œå¦‚ä¸‹ï¼š\n\n```java\n    private static void scenario1() {\n        James james = new James();\n        Lucy lucy = new Lucy();\n        FruitPlate fruitPlate = james.getPlate();\n        james.addFruit(fruitPlate,new Apple()); //new Orange() æ”¹æˆ new Apple()\n        lucy.eat((Orange) fruitPlate.get());\n    }\n```\n\nç¼–è¯‘å™¨ä¸ä¼šæç¤ºæœ‰é—®é¢˜ï¼Œä½†æ˜¯è¿è¡Œä¹‹åæŠ¥é”™ï¼Œå¦‚ä¸‹ï¼š\n\n```bash\nException in thread \"main\" java.lang.ClassCastException: entity.Apple cannot be cast to entity.Orange\n\tat Scenario.scenario1(Scenario.java:21)\n\tat Scenario.main(Scenario.java:7)\n\nProcess finished with exit code 1\n```\n\nè€Œï¼Œæˆ‘ä»¬æŠŠ `scenario2()` ï¼ˆä½¿ç”¨äº†æ³›å‹ï¼‰åšå‡ºåŒæ ·çš„ä¿®æ”¹ï¼Œå¦‚ä¸‹ï¼š\n\n```java\n    private static void scenario2() {\n        James james = new James();\n        Lucy lucy = new Lucy();\n        AiFruitPlate<Orange> aiFruitPlate = james.getAiFruitPlate();\n        james.add(aiFruitPlate, new Apple());\n        lucy.eat(aiFruitPlate.get());\n    }\n```\n\nç¼–è¯‘å™¨ï¼Œä¼šæç¤ºæˆ‘ä»¬æœ‰é”™è¯¯ï¼Œå¦‚å›¾ï¼š\n\n<div style=\"width: 86%; margin:auto\">\n\n![error](https://cdn.lishaoy.net/generics/error.png \"error\")\n\n</div>\n\né€šè¿‡ä»¥ä¸Šæ¡ˆä¾‹ï¼Œå¾ˆæ¸…æ™°çš„çŸ¥é“æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹ï¼Œå¦‚ä¸‹ï¼š\n\n- æ¶ˆé™¤ç±»å‹è½¬æ¢\n- åœ¨ç¼–è¯‘æ—¶è¿›è¡Œæ›´å¼ºçš„ç±»å‹æ£€æŸ¥\n- å¢åŠ ä»£ç çš„å¤ç”¨æ€§\n\n## æ³›å‹ç±»(Generic Class)\n\næ³›å‹ç±»æ˜¯é€šè¿‡ç±»å‹è¿›è¡Œå‚æ•°åŒ–çš„ç±»ï¼Œè¿™æ ·è¯´å¯èƒ½ä¸æ˜¯å¾ˆå¥½ç†è§£ï¼Œä¹‹åæˆ‘ä»¬ç”¨ä»£ç æ¼”ç¤ºã€‚\n\n### æ™®é€šç±»(A Simple Class)\n\né¦–å…ˆï¼Œæˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªæ™®é€šçš„ç±»ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npackage definegeneric;\n\npublic class SimpleClass {\n\n    private Object object;\n\n    public Object getObject() {\n        return object;\n    }\n\n    public void setObject(Object object) {\n        this.object = object;\n    }\n}\n```\n\nå®ƒçš„ `get` ã€`set` æ–¹æ³•æ¥å—å’Œè¿”å›ä¸€ä¸ª `Object`ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥éšæ„çš„ä¼ é€’ä»»ä½•ç±»å‹ã€‚åœ¨ç¼–è¯‘æ—¶æ— æ³•æ£€æŸ¥ç±»å‹çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å…¥ `Integer` ä¸”å–å‡º `Integer`ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ `String` ï¼Œä»è€Œå®¹æ˜“å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚\n\n### æ³›å‹ç±»(A Generic Class)\n\næ³›å‹ç±»çš„å®šä¹‰æ ¼å¼å¦‚ä¸‹ï¼š\n\n```java\nclass name<T1,T2,...,Tn>{\n  ...\n}\n```\n\nåœ¨ç±»åä¹‹åçš„ `<>` å°–æ‹¬å·ï¼Œç§°ä¹‹ä¸ºç±»å‹å‚æ•°(ç±»å‹å˜é‡)ï¼Œå®šä¹‰ä¸€ä¸ªæ³›å‹ç±»å°±æ˜¯ä½¿ç”¨ `<>` ç»™å®ƒå®šä¹‰ç±»å‹å‚æ•°ï¼šT1ã€T2 ... Tnã€‚\n\nç„¶åï¼Œæˆ‘ä»¬æŠŠ `SimpleClass` æ”¹æˆæ³›å‹ç±»ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npackage definegeneric;\n\npublic class GenericClass<T> {\n\n    private T t;\n\n    public T getT() {\n        return t;\n    }\n\n    public void setT(T t) {\n        this.t = t;\n    }\n}\n```\n\næ‰€ä»¥çš„ `object` éƒ½æ›¿æ¢æˆä¸º `T`ï¼Œç±»å‹å‚æ•°å¯ä»¥å®šä¹‰ä¸ºä»»ä½•çš„éåŸºæœ¬ç±»å‹ï¼Œå¦‚ï¼šclassç±»å‹ã€interfaceç±»å‹ã€æ•°ç»„ç±»å‹ã€ç”šè‡³æ˜¯å¦ä¸€ä¸ªç±»å‹å‚æ•°ã€‚\n\n\n### è°ƒç”¨å’Œå®ä¾‹åŒ–æ³›å‹ç±»å‹(nvoking and Instantiating a Generic Type)\n\nè¦æƒ³ä½¿ç”¨æ³›å‹ç±»ï¼Œå¿…é¡»æ‰§è¡Œæ³›å‹ç±»è°ƒç”¨ï¼Œå¦‚ï¼š\n\n```java\nGenericClass<String> genericClass;\n```\n\næ³›å‹ç±»çš„è°ƒç”¨ç±»ä¼¼äºæ–¹æ³•çš„è°ƒç”¨(ä¼ é€’äº†ä¸€ä¸ªå‚æ•°)ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬æ²¡æœ‰å°†å‚æ•°ä¼ é€’ç»™æ–¹æ³•ï¼Œè€Œæ˜¯ï¼Œå°†ç±»å‹å‚æ•°(String)ä¼ é€’ç»™äº† `GenericClass` ç±»æœ¬èº«ã€‚\n\næ­¤ä»£ç ä¸ä¼šåˆ›å»ºæ–°çš„ `GenericClass` å¯¹è±¡ï¼Œå®ƒåªæ˜¯å£°æ˜äº† `genericClass` å°†ä¿å­˜å¯¹ `String` çš„å¼•ç”¨\n\nè¦å®ä¾‹åŒ–æ­¤ç±»ï¼Œè¦ä½¿ç”¨ `new` å…³é”®å­—ï¼Œå¦‚ï¼š\n\n```java\nGenericClass<String> genericClass = new GenericClass<String>();\n```\n\næˆ–è€…\n\n```java\nGenericClass<String> genericClass = new GenericClass<>();\n```\nåœ¨ Java SE 7 æˆ–æ›´é«˜çš„ç‰ˆæœ¬ä¸­ï¼Œç¼–è¯‘å™¨å¯ä»¥ä»ä¸Šä¸‹æ–‡æ¨æ–­å‡ºç±»å‹å‚æ•°ï¼Œå› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨ `<>` æ›¿æ¢æ³›å‹ç±»çš„æ„é€ å‡½æ•°æ‰€éœ€çš„ç±»å‹å‚æ•°\n\n### ç±»å‹å‚æ•°å‘½åè§„èŒƒ(Type Parameter Naming Conventions)\n\næˆ‘ä»¬çš„ç±»å‹å‚æ•°æ˜¯å¦ä¸€å®šè¦å†™æˆ `T` å‘¢ï¼ŒæŒ‰ç…§è§„èŒƒï¼Œç±»å‹å‚æ•°åç§°æ˜¯å•ä¸ªå¤§å†™å­—æ¯ã€‚\n\nå¸¸ç”¨çš„ç±»å‹å‚æ•°åç§°æœ‰ï¼Œå¦‚ï¼š\n\n| ç±»å‹å‚æ•° |  å«ä¹‰     |\n|:------:| :-------: |\n| E      |  Element |\n| K      |  Key     |\n| N      |  Number  |\n| V      |  Value   |\n| S,U,V...  |  2nd, 3rd, 4th type   |\n\n### å¤šç±»å‹å‚æ•°(Multiple Type Parameters)\n\næ³›å‹ç±»å¯ä»¥æœ‰å¤šä¸ªç±»å‹å‚æ•°ï¼Œå¦‚ï¼š\n\n```java\npublic interface MultipleGeneric<K,V> {\n    public K getKey();\n    public V getValue();\n}\n\npublic class ImplMultipleGeneric<K, V> implements MultipleGeneric<K, V> {\n\n    private K key;\n    private V value;\n\n    public ImplMultipleGeneric(K key, V value) {\n        this.key = key;\n        this.value = value;\n    }\n\n    @Override\n    public K getKey() {\n        return key;\n    }\n\n    @Override\n    public V getValue() {\n        return value;\n    }\n\n    public static void main(String[] args) {\n        MultipleGeneric<String, Integer> m1 = new ImplMultipleGeneric<String, Integer>(\"per\",6);\n        System.out.println(\"key:\" + m1.getKey() + \", value:\" + m1.getValue());\n\n        MultipleGeneric<String,String> m2 = new ImplMultipleGeneric<String, String>(\"per\",\"lsy\");\n        System.out.println(\"key:\" + m2.getKey() + \", value:\" + m2.getValue());\n    }\n}\n```\n\nè¾“å‡ºç»“æœï¼š\n\n```bash\nkey:per, value:6\nkey:per, value:lsy\n\nProcess finished with exit code 0\n```\n\nå¦‚ä¸Šä»£ç ï¼Œ`new ImplMultipleGeneric` å°† `K` å®ä¾‹åŒ–ä¸º `String`ï¼Œå°† `V` å®ä¾‹åŒ–ä¸º `Integer` ï¼Œå› æ­¤ï¼Œ `ImplMultipleGeneric` æ„é€ å‡½æ•°å‚æ•°ç±»å‹åˆ†åˆ«ä¸º `String` å’Œ `Integer`,åœ¨ç¼–å†™ `new ImplMultipleGeneric` ä»£ç æ—¶ï¼Œç¼–è¾‘å™¨ä¼šè‡ªåŠ¨å¡«å†™ `<>` çš„å€¼\n\nç”±äºï¼ŒJava ç¼–è¯‘å™¨ä¼šä»å£°æ˜ `ImplMultipleGeneric` æ¨æ–­å‡º `K` å’Œ `V` çš„ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç®€å†™ä¸ºï¼Œå¦‚ä¸‹ï¼š\n\n```java\nMultipleGeneric<String, Integer> m1 = new ImplMultipleGeneric<>(\"per\",6);\nSystem.out.println(\"key:\" + m1.getKey() + \", value:\" + m1.getValue());\n\nMultipleGeneric<String,String> m2 = new ImplMultipleGeneric<>(\"per\",\"lsy\");\nSystem.out.println(\"key:\" + m2.getKey() + \", value:\" + m2.getValue());\n```\n\n## æ³›å‹æ¥å£(Generic Interface)\n\nå®šä¹‰æ³›å‹æ¥å£å’Œå®šä¹‰æ³›å‹ç±»ç›¸ä¼¼(æ³›å‹ç±»çš„æŠ€æœ¯å¯åŒç”¨äºæ³›å‹æ¥å£)ï¼Œå¦‚ä¸‹ï¼š\n\n```java\ninterface name<T1,T2,...,Tn>{\n  ...\n}\n```\n\næˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªæ³›å‹æ¥å£ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npackage definegeneric;\n\npublic interface Genertor<T> {\n    public T next();\n}\n```\n\né‚£ä¹ˆï¼Œå¦‚ä½•å®ç°ä¸€ä¸ªæ³›å‹æ¥å£å‘¢ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸¤ç§æ–¹å¼æ¥å®ç°æ³›å‹æ¥å£ï¼Œå¦‚ä¸‹ï¼š\n\nä½¿ç”¨æ³›å‹ç±»ï¼Œå®ç°æ³›å‹æ¥å£ï¼Œä¸”ä¸æŒ‡å®šç¡®åˆ‡çš„ç±»å‹å‚æ•°ï¼Œæ‰€ä»¥ï¼Œå®ç°çš„ `next()` è¿”å›å€¼è‡ªåŠ¨å˜æˆ `T`\n\n```java\npackage definegeneric.impl;\n\nimport definegeneric.Genertor;\n\npublic class ImplGenertor<T> implements Genertor<T> {\n\n    @Override\n    public T next() {\n        return null;\n    }\n}\n```\n\nä½¿ç”¨æ™®é€šç±»ï¼Œå®ç°æ³›å‹æ¥å£ï¼Œä¸”æŒ‡å®šç¡®åˆ‡çš„ç±»å‹å‚æ•°ä¸º `String`ï¼Œæ‰€ä»¥ï¼Œå®ç°çš„ `next()` è¿”å›å€¼è‡ªåŠ¨å˜æˆ `String`\n\n```java\npackage definegeneric.impl;\n\nimport definegeneric.Genertor;\n\npublic class ImplGenertor2 implements Genertor<String> {\n\n    @Override\n    public String next() {\n        return null;\n    }\n}\n```\n\n## æ³›å‹æ–¹æ³•(Generic Methods)\n\næ³›å‹æ–¹æ³•ä½¿ç”¨äº†ç±»å‹å‚æ•°çš„æ–¹æ³•ï¼Œæ³›å‹æ–¹æ³•æ¯”è¾ƒç‹¬ç«‹ï¼Œå¯ä»¥å£°æ˜åœ¨ æ™®é€šç±»ã€æ³›å‹ç±»ã€æ™®é€šæ¥å£ã€æ³›å‹æ¥å£ä¸­ã€‚\n\næ³›å‹æ–¹æ³•å®šä¹‰æ ¼å¼ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npublic <K, V> boolean compare(Pair<K, V> p1, Pair<K, V> p2)\n```\n\næ³›å‹æ–¹æ³•çš„ç±»å‹å‚æ•°åˆ—è¡¨ï¼Œåœ¨ `<>` å†…ï¼Œè¯¥åˆ—è¡¨å¿…é¡»åœ¨æ–¹æ³•è¿”å›ç±»å‹ä¹‹å‰ï¼›å¯¹äºé™æ€çš„æ³›å‹æ–¹æ³•ï¼Œç±»å‹å‚æ•°å¿…é¡»åœ¨ `static` ä¹‹åï¼Œæ–¹æ³•è¿”å›ç±»å‹ä¹‹å‰ã€‚\n\n### æ™®é€šç±»é‡Œå®šä¹‰æ³›å‹æ–¹æ³•(Generic methods in a Simple Class)\n\næˆ‘ä»¬åœ¨æ™®é€šç±»ä¸­å®šä¹‰æ³›å‹æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npackage methodgeneric;\n\npublic class MethodGeneric {\n\n    //å®šä¹‰ä¸€ä¸ªæ³›å‹æ–¹æ³•\n    public <T> T genericMethod(T...t) {\n        return t[t.length/2];\n    }\n\n    public static void main(String[] args) {\n        MethodGeneric methodGeneric = new MethodGeneric();\n        System.out.println(methodGeneric.<String>genericMethod(\"java\",\"dart\",\"kotlin\"));\n    }\n}\n```\n\n`methodGeneric.<String>genericMethod(\"java\",\"dart\",\"kotlin\")` é€šå¸¸å¯ä»¥çœç•¥æ‰ `<>` çš„å†…å®¹ï¼Œç¼–è¯‘å™¨å°†æ¨æ–­å‡ºæ‰€éœ€çš„ç±»å‹ï¼Œå’Œè°ƒç”¨æ™®é€šæ–¹æ³•ä¸€æ ·ï¼Œå¦‚ï¼š\n\n```java\nmethodGeneric.genericMethod(\"java\",\"dart\",\"kotlin\")\n```\n\n### æ³›å‹ç±»é‡Œå®šä¹‰æ³›å‹æ–¹æ³•(Generic methods in a Generic Class)\n\næˆ‘ä»¬åœ¨æ³›å‹ç±»ä¸­å®šä¹‰æ³›å‹æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npackage methodgeneric;\n\npublic class MethodGeneric2 {\n\n    static class Fruit{\n\n        @Override\n        public String toString() {\n            return \"fruit\";\n        }\n    }\n\n    static class Apple extends Fruit {\n\n        @Override\n        public String toString() {\n            return \"Apple\";\n        }\n    }\n\n    static class Person{\n\n        @Override\n        public String toString() {\n            return \"person\";\n        }\n    }\n    //å®šä¹‰äº†æ³›å‹ç±»\n    static class ShowClass<T> {\n        //å®šä¹‰äº†æ™®é€šæ–¹æ³•\n        public void show1(T t){\n            System.out.println(t.toString());\n        }\n        //å®šä¹‰äº†æ³›å‹æ–¹æ³•\n        public <E> void show2(E e) {\n            System.out.println(e.toString());\n        }\n        //å®šä¹‰äº†æ³›å‹æ–¹æ³•\n        public <T> void show3(T t) {\n            System.out.println(t.toString());\n        }\n    }\n\n    public static void main(String[] args) {\n\n        Apple apple = new Apple();\n        Person person = new Person();\n\n        ShowClass<Fruit> showClass = new ShowClass<>();\n        showClass.show1(apple);   //å¯ä»¥æ”¾å…¥ appleï¼Œå› ä¸º apple æ˜¯ fruit çš„å­ç±»\n        showClass.show1(person); //æ­¤æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œå› ä¸º ShowClass<Fruit> å·²ç»é™å®šç±»å‹\n\n        showClass.show2(apple); //å¯ä»¥æ”¾å…¥ï¼Œæ³›å‹æ–¹æ³• <E> å¯ä»¥æ˜¯ä»»ä½•éåŸºæœ¬ç±»å‹\n        showClass.show2(person);//å¯ä»¥æ”¾å…¥ï¼Œæ³›å‹æ–¹æ³• <E> å¯ä»¥æ˜¯ä»»ä½•éåŸºæœ¬ç±»å‹\n\n        showClass.show3(apple); //å¯ä»¥æ”¾å…¥ï¼Œæ³›å‹æ–¹æ³• <T> å’Œæ³›å‹ç±»ä¸­çš„ <T> ä¸æ˜¯åŒä¸€æ¡ Tï¼Œå¯ä»¥æ˜¯ä»»ä½•éåŸºæœ¬ç±»å‹\n        showClass.show3(person); //å¯ä»¥æ”¾å…¥ï¼Œæ³›å‹æ–¹æ³• <T> å’Œæ³›å‹ç±»ä¸­çš„ <T> ä¸æ˜¯åŒä¸€æ¡ Tï¼Œå¯ä»¥æ˜¯ä»»ä½•éåŸºæœ¬ç±»å‹\n    }\n}\n```\n\nåœ¨æ³›å‹ç±»ä¸­å®šä¹‰æ³›å‹æ–¹æ³•æ—¶ï¼Œéœ€è¦æ³¨æ„ï¼Œæ³›å‹ç±»é‡Œçš„æ³›å‹å‚æ•° `<T>` å’Œæ³›å‹æ–¹æ³•é‡Œçš„æ³›å‹å‚æ•° `<T>` ä¸æ˜¯åŒä¸€ä¸ªã€‚\n\n## é™å®šç±»å‹å‚æ•°(Bounded Type Parameters)\n\næˆ‘ä»¬ç»å¸¸çœ‹åˆ°ç±»ä¼¼ `public <U extends Number> void inspect(U u)` çš„ä»£ç ï¼Œ`<U extends Number>` å°±æ˜¯é™åˆ¶ç±»å‹å‚æ•°ï¼Œåªå¯¹æ•°å­—è¿›è¡Œæ“ä½œä¸”åªæ¥å— `Number` æˆ–å…¶å­ç±»ã€‚\n\nè¦å£°æ˜ä¸€ä¸ªé™å®šçš„ç±»å‹å‚æ•°ï¼Œéœ€è¦åœ¨å‚æ•°ç±»å‹ååŠ ä¸Š `extends` å…³é”®å­—ï¼Œç„¶åæ˜¯å…¶ä¸Šé™ç±»å‹(ç±»æˆ–æ¥å£)ã€‚\n\n### é™å®šç±»å‹å‚æ•°çš„æ³›å‹ç±»(Generic Class of Bounded Type Parameters)\n\næ³›å‹ç±»ä¹Ÿå¯ä»¥ä½¿ç”¨é™å®šç±»å‹å‚æ•°ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npackage boundedgeneric;\n\npublic class BoundedClass<T extends Comparable> {\n\n    private T t;\n\n    public void setT(T t) {\n        this.t = t;\n    }\n\n    public T min(T outter){\n        if(this.t.compareTo(outter) > 0)\n            return outter;\n        else\n            return this.t;\n    }\n\n    public static void main(String[] args) {\n        BoundedClass<String> boundedClass = new BoundedClass<>(); //åªèƒ½ä¼ å…¥å®ç°äº† Comparable æ¥å£çš„ç±»å‹\n        boundedClass.setT(\"iOS\");\n        System.out.println(boundedClass.min(\"android\"));\n    }\n}\n```\n\n### é™å®šç±»å‹å‚æ•°çš„æ³›å‹æ–¹æ³•(Generic methods of Bounded Type Parameters)\n\næ³›å‹æ–¹æ³•ä¹Ÿå¯ä»¥ä½¿ç”¨é™å®šç±»å‹å‚æ•°ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npackage boundedgeneric;\n\npublic class BoundedGeneric {\n\n    public static <T extends Comparable> T min(T a, T b) {\n        if (a.compareTo(b) < 0)\n            return a;\n        else\n            return b;\n    }\n\n    public static void main(String[] args) {\n        System.out.println(BoundedGeneric.min(66,666));\n    }\n}\n```\n\n### å¤šé‡é™å®š(Multiple Bounds)\n\né™å®šç±»å‹å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä¸ºå¤šä¸ªé™å®šï¼Œå¦‚ï¼š\n\n```java\n<T extends B1 & B2 & B3>\n```\n\nå¤šä¸ªé™å®šå‚æ•°ï¼Œå¦‚æœå…¶ä¸­æœ‰ç±»ï¼Œç±»å¿…é¡»æ”¾åœ¨ç¬¬ä¸€ä¸ªä½ç½®ï¼Œä¾‹å¦‚ï¼š\n\n```java\ninterface A { ... }\ninterface B { ... }\nclass C { ... }\n\nclass D <T extends C & A & B>\n```\n\n## æ³›å‹ï¼Œç»§æ‰¿å’Œå­ç±»å‹(Generics, Inheritance, and Subtypes)\n\nåœ¨å‰é¢çš„ç›˜å­è£…æ°´æœå°æ•…äº‹é‡Œæˆ‘ä»¬å·²ç»åˆ›å»ºå¥½äº†ä¸€äº›æ°´æœç±»ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npublic class Fruit {\n    @Override\n    public String toString() {\n        return \"This is Fruit\";\n    }\n}\n\npublic class Apple extends Fruit {\n    @Override\n    public String toString() {\n        return \" Apple ğŸ\";\n    }\n}\n\npublic class Orange extends Fruit {\n    @Override\n    public String toString() {\n        return \" Orange ğŸŠ\";\n    }\n}\n\npublic class QIOrange extends Orange {\n    @Override\n    public String toString() {\n        return \"qi Orange ğŸŠ\";\n    }\n}\n```\n\nä»–ä»¬çš„ç»§æ‰¿å…³ç³»ï¼Œå¦‚å›¾ï¼š\n\n<div style=\"width: 56%; margin:auto\">\n\n![no-shadow](https://cdn.lishaoy.net/generics/fruit.png \"\")\n\n</div>\n\nä¼—æ‰€å‘¨çŸ¥ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå­ç±»èµ‹å€¼ç»™çˆ¶ç±»ï¼Œä¾‹å¦‚ï¼š\n\n```java\nApple apple = new Apple();\nFruit fruit = new Fruit();\nfruit = apple;\n```\n\næ³›å‹ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ°´æœç›˜å­çš„æ³›å‹ç±»ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npublic class FruitPlateGen<Fruit> implements Plate<Fruit> {\n\n    private List<Fruit> fruits = new ArrayList<>(6);\n\n    @Override\n    public void set(Fruit fruit) {\n        fruits.add(fruit);\n    }\n\n    @Override\n    public Fruit get() {\n        int index = fruits.size() - 1;\n        if(index >= 0) return fruits.get(index);\n        return null;\n    }\n}\n```\n\næ‰€ä»¥ï¼Œæ˜¯ `Fruit` çš„å­ç±»éƒ½å¯ä»¥æ”¾å…¥æ°´æœç›˜é‡Œï¼Œå¦‚ä¸‹ï¼š\n\n```java\nFruitPlateGen<Fruit> fruitPlate = new FruitPlateGen<Fruit>();\nfruitPlate.set(new Apple());\nfruitPlate.set(new Orange());\n```\n\nç°åœ¨ï¼ŒJames å¯ä»¥è·å–ç›˜å­ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npublic class James extends Person {\n    public FruitPlateGen getAiFruitPlateGen(FruitPlateGen<Fruit> plate) {\n        return new FruitPlateGen();\n    }\n}\n```\n\nå¦‚æ˜¯ï¼ŒJames æƒ³è·å–æ”¾æ©˜å­çš„ç›˜å­ï¼Œå¦‚ä¸‹ï¼š\n\n```java\nJames james = new James();\njames.getAiFruitPlateGen(new FruitPlateGen<Fruit>()); //è·å–æˆåŠŸ\njames.getAiFruitPlateGen(new FruitPlateGen<Orange>()); //ç¼–è¯‘å™¨æŠ¥é”™\n```\n\nè™½ç„¶ï¼Œ`Orange` æ˜¯ `Fruit` çš„å­ç±»ï¼Œä½†æ˜¯ï¼Œ`FruitPlateGen<Orange>` ä¸æ˜¯ `FruitPlateGen<Fruit>` çš„å­ç±»ï¼Œæ‰€ä»¥ï¼Œä¸èƒ½ä¼ é€’äº§ç”Ÿç»§æ‰¿å…³ç³»ã€‚\n\n<div style=\"width: 86%; margin:auto\">\n\n![no-shadow](https://cdn.lishaoy.net/generics/object.png \"\")\n\n</div>\n\n### æ³›å‹ç±»å’Œå­ç±»å‹(Generic Classes and Subtyping)\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡ç»§æ‰¿(extends)æˆ–å®ç°(implements)æ³›å‹ç±»æˆ–æ¥å£ï¼Œä¾‹å¦‚ï¼š\n\n```java\nprivate static class ExtendFruitPlate<Orange> extends FruitPlateGen<Fruit> {\n\n}\n```\n\næ­¤æ—¶ï¼Œ`ExtendFruitPlate<Orange>` å°±æ˜¯ `FruitPlateGen<Fruit>` çš„å­ç±»ï¼ŒJames å†å»æ‹¿ç›˜å­ï¼Œå°±ä¸ä¼šæœ‰é”™è¯¯æç¤ºï¼š\n\n```java\njames.getAiFruitPlateGen(new ExtendFruitPlate<Orange>());\n```\n\n## é€šé…ç¬¦(Wildcards)\n\næˆ‘ä»¬ç»å¸¸çœ‹åˆ°ç±»ä¼¼ `List<? extends Number>` çš„ä»£ç ï¼Œ`?` å°±æ˜¯é€šé…ç¬¦ï¼Œè¡¨ç¤ºæœªçŸ¥ç±»å‹ã€‚\n\n### ä¸Šé™é€šé…ç¬¦(Upper Bounded Wildcards)\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šé™é€šé…ç¬¦æ¥æ”¾å®½å¯¹å˜é‡çš„é™åˆ¶ï¼Œä¾‹å¦‚ï¼Œä¸Šæ–‡æåˆ°çš„ `FruitPlateGen<Fruit>` å’Œ `FruitPlateGen<Orange>()` å°±å¯ä»¥ä½¿ç”¨ä¸Šé™é€šé…ç¬¦ã€‚\n\næˆ‘ä»¬æ¥æ”¹å†™ä¸€ä¸‹ `getAiFruitPlateGen` æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npublic FruitPlateGen getAiFruitPlateGen2(FruitPlateGen<? extends Fruit> plate) {\n    return new FruitPlateGen();\n}\n```\n\nè¿™æ—¶å€™ï¼ŒJames æƒ³è·å–æ”¾æ©˜å­çš„ç›˜å­ï¼Œå¦‚ä¸‹ï¼š\n\n```java\nJames james = new James();\njames.getAiFruitPlateGen2(new FruitPlateGen<Fruit>()); //è·å–æˆåŠŸ\njames.getAiFruitPlateGen2(new FruitPlateGen<Orange>()); //è·å–æˆåŠŸ\n```\n\nä¸Šé™é€šé…ç¬¦ `FruitPlateGen<? extends Fruit>` åŒ¹é… `Fruit` å’Œ `Fruit` çš„ä»»ä½•å­ç±»å‹ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å…¥ `Apple`ã€`Orange` éƒ½æ²¡æœ‰é—®é¢˜ã€‚\n\n### ä¸‹é™é€šé…ç¬¦(Lower Bounded Wildcards)\n\nä¸Šé™é€šé…ç¬¦å°†æœªçŸ¥ç±»å‹é™å®šä¸ºè¯¥ç±»å‹æˆ–å…¶å­ç±»å‹ï¼Œä½¿ç”¨ `extends` å…³é”®å­—ï¼Œè€Œä¸‹é™é€šé…ç¬¦å°†æœªçŸ¥ç±»å‹é™å®šä¸ºè¯¥ç±»å‹æˆ–å…¶çˆ¶ç±»å‹ï¼Œä½¿ç”¨ `super` å…³é”®å­—ã€‚\n\næˆ‘ä»¬å†æ¥å®½å±•ä¸€ä¸‹ `getAiFruitPlateGen` æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npublic FruitPlateGen getAiFruitPlateGen3(FruitPlateGen<? super Apple> plate) {\n    return new FruitPlateGen();\n}\n```\n\nè¿™æ—¶å€™ï¼ŒJames åªèƒ½è·å– `FruitPlateGen<Fruit>` å’Œ `FruitPlateGen<Apple>` çš„ç›˜å­ï¼Œå¦‚ä¸‹ï¼š\n\n```java\nJames james = new James();\njames.getAiFruitPlateGen3(new FruitPlateGen<Apple>());\njames.getAiFruitPlateGen3(new FruitPlateGen<Fruit>());\n```\n\nä¸‹é™é€šé…ç¬¦ `FruitPlateGen<? super Apple>` åŒ¹é… `Apple` å’Œ `Apple` çš„ä»»ä½•çˆ¶ç±»å‹ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å…¥ `Apple`ã€`Fruit`ã€‚\n\n### é€šé…ç¬¦å’Œå­ç±»å‹(Wildcards and Subtyping)\n\nåœ¨ [æ³›å‹ï¼Œç»§æ‰¿å’Œå­ç±»å‹](http://h.lishaoy.net/generics.html#%E6%B3%9B%E5%9E%8B%EF%BC%8C%E7%BB%A7%E6%89%BF%E5%92%8C-%E5%AD%90%E7%B1%BB%E5%9E%8B-Generics-Inheritance-and-Subtypes) ç« èŠ‚æœ‰è®²åˆ°ï¼Œè™½ç„¶ï¼Œ`Orange` æ˜¯ `Fruit` çš„å­ç±»ï¼Œä½†æ˜¯ï¼Œ`FruitPlateGen<Orange>` ä¸æ˜¯ `FruitPlateGen<Fruit>` çš„å­ç±»ã€‚ä½†æ˜¯ï¼Œä½ å¯ä»¥ä½¿ç”¨é€šé…ç¬¦åœ¨æ³›å‹ç±»æˆ–æ¥å£ä¹‹é—´åˆ›å»ºå…³ç³»ã€‚\n\næˆ‘ä»¬å†æ¥å›é¡¾ä¸‹ `Fruit` çš„ç»§æ‰¿å…³ç³»ï¼Œå¦‚å›¾ï¼š\n\n<div style=\"width: 56%; margin:auto\">\n\n![no-shadow](https://cdn.lishaoy.net/generics/fruit.png \"\")\n\n</div>\n\nä»£ç ï¼Œå¦‚ä¸‹ï¼š\n\n```java\nApple apple = new Apple();\nFruit fruit = apple;\n```\n\nè¿™ä¸ªä»£ç æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œ`Fruit` æ˜¯ `Apple` çš„çˆ¶ç±»ï¼Œæ‰€ä»¥ï¼Œå¯ä»¥æŠŠå­ç±»èµ‹å€¼ç»™çˆ¶ç±»ã€‚\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```java\nList<Apple> apples = new ArrayList<>();\nList<Fruit> fruits = apples; // ç¼–è¾‘å™¨æŠ¥é”™\n```\n\nå› ä¸ºï¼Œ`List<Apple>` ä¸æ˜¯ `List<Fruit>` çš„å­ç±»ï¼Œå®é™…ä¸Šè¿™ä¸¤è€…æ— å…³ï¼Œé‚£ä¹ˆï¼Œå®ƒä»¬çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿå¦‚å›¾ï¼š\n\n<div style=\"width: 56%; margin:auto\">\n\n![no-shadow](https://cdn.lishaoy.net/generics/List%3C%3F%3E.png \"\")\n\n</div>\n\n`List<Apple>` å’Œ `List<Fruit>` çš„å…¬å…±çˆ¶çº§æ˜¯ `List<?>`ã€‚\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šä¸‹é™é€šé…ç¬¦ï¼Œåœ¨è¿™äº›ç±»ä¹‹é—´åˆ›å»ºå…³ç³»ï¼Œå¦‚ä¸‹ï¼š\n\n```java\nList<Apple> apples = new ArrayList<>();\nList<? extends Fruit> fruits1 = apples; // OK\nList<? super Apple> fruits2 = apples; // OK\n```\n\nä¸‹å›¾å±•ç¤ºäº†ä¸Šä¸‹é™é€šé…ç¬¦å£°æ˜çš„å‡ ä¸ªç±»çš„å…³ç³»ï¼Œå¦‚å›¾ï¼š\n\n<div style=\"width: 56%; margin:auto\">\n\n![no-shadow](https://cdn.lishaoy.net/generics/List%3C%3F%3E1.png \"\")\n\n</div>\n\n### PECSåŸåˆ™(Producer extends Consumer super)\n\nåœ¨ä¸Šæ–‡ä¸­æœ‰ `FruitPlateGen` æ°´æœç›˜å­çš„ç±»ï¼Œæˆ‘ä»¬å°è¯•ä½¿ç”¨ä¸Šä¸‹é™é€šé…ç¬¦æ¥å®ä¾‹åŒ–æ°´æœç›˜ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```java\nApple apple = new Apple();\nOrange orange = new Orange();\nFruit fruit = new Fruit();\n\nFruitPlateGen<? extends Fruit> fruitPlateGen = new FruitPlateGen<>();\nfruitPlateGen.set(apple); // error\nfruitPlateGen.set(orange); // error\nfruitPlateGen.set(fruit); // error\nFruit fruit1 = fruitPlateGen.get(); // OK\nOrange orange1 = fruitPlateGen.get(); // error\nApple apple1 = fruitPlateGen.get(); // error\n```\n\nä¸Šé™é€šé…ç¬¦æ— æ³• `set` æ•°æ®ï¼Œä½†æ˜¯ï¼Œå¯ä»¥ `get` æ•°æ®ä¸”åªèƒ½ `get` åˆ°å…¶ä¸Šé™ `Fruit`ï¼Œæ‰€ä»¥ï¼Œä¸Šé™é€šé…ç¬¦å¯ä»¥å®‰å…¨çš„è®¿é—®æ•°æ®ã€‚\n\nåœ¨æ¥çœ‹ä¸€ä¸‹ä»£ç ï¼Œå¦‚ä¸‹ï¼š\n\n```java\nFruitPlateGen<? super Apple> fruitPlateGen1 = new FruitPlateGen<>();\nfruitPlateGen1.set(apple); // OK\nfruitPlateGen1.set(orange); // error\nfruitPlateGen1.set(fruit); // error\nObject object = fruitPlateGen1.get(); // OK\nFruit fruit2 = fruitPlateGen1.get(); // error\nApple apple2 = fruitPlateGen1.get(); // error\nOrange orange2 = fruitPlateGen1.get(); // error\n```\n\nä¸‹é™é€šé…ç¬¦å¯ä»¥ä¸”åªèƒ½ `set` å…¶ä¸‹é™ `Apple`ï¼Œä¹Ÿå¯ä»¥ `get` æ•°æ®ï¼Œä½†åªèƒ½ç”¨ `Object` æ¥æ”¶(å› ä¸ºObjectæ˜¯æ‰€æœ‰ç±»å‹çš„çˆ¶ç±»ï¼Œè¿™æ˜¯ä¸€ä¸ªç‰¹ä¾‹)ï¼Œæ‰€ä»¥ï¼Œä¸‹é™é€šé…ç¬¦å¯ä»¥å®‰å…¨çš„å†™å…¥æ•°æ®ã€‚\n\næ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨ä¸Šä¸‹é™é€šé…ç¬¦æ—¶ï¼Œå¯ä»¥éµå¾ªä»¥ä¸‹å‡†åˆ™ï¼š\n\n- å¦‚æœä½ åªéœ€è¦ä»é›†åˆä¸­è·å¾—ç±»å‹T , ä½¿ç”¨<? extends T>é€šé…ç¬¦\n- å¦‚æœä½ åªéœ€è¦å°†ç±»å‹Tæ”¾åˆ°é›†åˆä¸­, ä½¿ç”¨<? super T>é€šé…ç¬¦\n- å¦‚æœä½ æ—¢è¦è·å–åˆè¦æ”¾ç½®å…ƒç´ ï¼Œåˆ™ä¸ä½¿ç”¨ä»»ä½•é€šé…ç¬¦\n\n\n## ç±»å‹æ“¦é™¤(Type Erasure)\n\nJava è¯­è¨€ä½¿ç”¨ç±»å‹æ“¦é™¤æœºåˆ¶å®ç°äº†æ³›å‹ï¼Œç±»å‹æ“¦é™¤æœºåˆ¶ï¼Œå¦‚ä¸‹ï¼š\n\n- ç¼–è¯‘å™¨ä¼šæŠŠæ‰€æœ‰çš„ç±»å‹å‚æ•°æ›¿æ¢ä¸ºå…¶è¾¹ç•Œ(ä¸Šä¸‹é™)æˆ– Objectï¼Œå› æ­¤ï¼Œç¼–è¯‘å‡ºçš„å­—èŠ‚ç ä¸­åªåŒ…å«æ™®é€šç±»ã€æ¥å£å’Œæ–¹æ³•ã€‚\n- åœ¨å¿…è¦æ—¶æ’å…¥ç±»å‹è½¬æ¢ï¼Œå·²ä¿æŒç±»å‹å®‰å…¨\n- ç”Ÿæˆæ¡¥æ¥æ–¹æ³•ä»¥åœ¨æ‰©å±•æ³›å‹ç±»æ—¶ä¿æŒå¤šæ€æ€§\n\n### æ³›å‹ç±»å‹çš„æ“¦é™¤(Erasure of Generic Types)\n\nJava ç¼–è¯‘å™¨åœ¨æ“¦é™¤è¿‡ç¨‹ä¸­ï¼Œä¼šæ“¦é™¤æ‰€æœ‰ç±»å‹å‚æ•°ï¼Œå¦‚æœç±»å‹å‚æ•°æ˜¯æœ‰ç•Œçš„ï¼Œåˆ™æ›¿æ¢ä¸ºç¬¬ä¸€ä¸ªè¾¹ç•Œï¼Œå¦‚æœæ˜¯æ— ç•Œçš„ï¼Œåˆ™æ›¿æ¢ä¸º Objectã€‚\n\næˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ³›å‹ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```java\npublic class Node<T> {\n  private T data;\n  private Node<T> next;\n  public Node(T data, Node<T> next) { this.data = data;\n  this.next = next;\n}\n  public T getData() { return data; }\n  ...\n}\n```\n\nç”±äºç±»å‹å‚æ•° `T` æ˜¯æ— ç•Œçš„ï¼Œå› æ­¤ï¼ŒJava ç¼–è¯‘å™¨å°†å…¶æ›¿æ¢ä¸º Objectï¼Œå¦‚ä¸‹ï¼š\n\n```java\npublic class Node {\n  private Object data;\n  private Node next;\n  public Node(Object data, Node next) { this.data = data;\n  this.next = next;\n}\n  public Object getData() { return data; }\n  ...\n}\n```\n\næˆ‘ä»¬å†æ¥å®šä¹‰ä¸€ä¸ªæœ‰ç•Œçš„æ³›å‹ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```java\npublic class Node<T extends Comparable<T>> {\n  private T data;\n  private Node<T> next;\n  public Node(T data, Node<T> next) { this.data = data;\n  this.next = next;\n}\n  public T getData() { return data; }\n  ...\n}\n```\n\nJava ç¼–è¯‘å™¨å…¶æ›¿æ¢ä¸ºç¬¬ä¸€ä¸ªè¾¹ç•Œ `Comparable`ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npublic class Node {\n  private Comparable data;\n  private Node next;\n  public Node(Comparable data, Node next) { this.data = data;\n  this.next = next;\n}\n  public Comparable getData() { return data; }\n  ...\n}\n```\n\n### æ³›å‹æ–¹æ³•çš„æ“¦é™¤(Erasure of Generic Methods)\n\nJava ç¼–è¯‘å™¨åŒæ ·ä¼šæ“¦é™¤æ³›å‹æ–¹æ³•ä¸­çš„ç±»å‹å‚æ•°ï¼Œä¾‹å¦‚ï¼š\n\n```java\npublic static <T> int count(T[] anArray, T elem) {\n  int cnt = 0;\n  for (T e : anArray)\n}\n```\n\nç”±äº `T` æ˜¯æ— ç•Œçš„ï¼Œå› æ­¤ï¼ŒJava ç¼–è¯‘å™¨å°†å…¶æ›¿æ¢ä¸º Objectï¼Œå¦‚ä¸‹ï¼š\n\n```java\npublic static int count(Object[] anArray, Object elem) {\n  int cnt = 0;\n  for (Object e : anArray) if (e.equals(elem))\n}\n```\n\nå¦‚ä¸‹ä»£ç ï¼š\n\n```java\nclass Shape {  ...  }\nclass Circle extends Shape {  ...  } \nclass Rectangle extends Shape {  ...  }\n```\n\næœ‰ä¸€ä¸ªæ³›å‹æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npublic static<T extends Shape> void draw(T shape){\n  ...\n}\n```\n\nJava ç¼–è¯‘å™¨å°†ç”¨ç¬¬ä¸€ä¸ªè¾¹ç•Œ `Shape` æ›¿æ¢ `T`ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npublic static void draw(Shape shape){\n  ...\n}\n```\n\n### æ¡¥æ¥æ–¹æ³•(Bridge Methods)\n\næœ‰æ—¶ç±»å‹æ“¦é™¤ä¼šå¯¼è‡´æ— æ³•é¢„æ–™çš„æƒ…å†µï¼Œå¦‚ä¸‹ï¼š\n\n```java\npublic class Node<T> {\n  public T data;\n  public Node(T data) { this.data = data; }\n  public void setData(T data) { \n    System.out.println(\"Node.setData\"); \n    this.data = data;\n  } \n}\npublic class MyNode extends Node<Integer> {\n  public MyNode(Integer data) { super(data); }\n  public void setData(Integer data) { \n    System.out.println(\"MyNode.setData\"); \n    super.setData(data);\n  } \n}\n```\n\nç±»å‹æ“¦é™¤åï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```java\npublic class Node {\n  public Object data;\n  public Node(Object data) { this.data = data; }\n  public void setData(Object data) { \n    System.out.println(\"Node.setData\"); \n    this.data = data;\n  } \n}\npublic class MyNode extends Node {\n  public MyNode(Integer data) { super(data); }\n  public void setData(Integer data) { \n    System.out.println(\"MyNode.setData\");\n    super.setData(data);\n  } \n}\n```\n\næ­¤æ—¶ï¼ŒNode çš„æ–¹æ³•å˜ä¸º `setData(Object data)` å’Œ MyNode çš„ `setData(Integer data)` ä¸ä¼šè¦†ç›–ã€‚\n\nä¸ºäº†è§£å†³æ­¤é—®é¢˜å¹¶ä¿ç•™æ³›å‹ç±»å‹çš„å¤šæ€æ€§ï¼ŒJava ç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªæ¡¥æ¥æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š\n\n```java\nclass MyNode extends Node {\n  // ç”Ÿæˆçš„æ¡¥æ¥æ–¹æ³•\n  public void setData(Object data) {\n      setData((Integer) data);\n  }\n  public void setData(Integer data) { \n    System.out.println(\"MyNode.setData\"); \n    super.setData(data);\n  }\n  ...\n}\n```\n\nè¿™æ · Node çš„æ–¹æ³• `setData(Object data)` å’Œ MyNode ç”Ÿæˆçš„æ¡¥æ¥æ–¹æ³• `setData(Object data)` å¯ä»¥å®Œæˆæ–¹æ³•çš„è¦†ç›–ã€‚\n\n\n## æ³›å‹çš„é™åˆ¶(Restrictions on Generics)\n\nä¸ºäº†æœ‰æ•ˆçš„ä½¿ç”¨æ³›å‹ï¼Œéœ€è¦è€ƒè™‘ä»¥ä¸‹é™åˆ¶ï¼š\n\n- æ— æ³•å®ä¾‹åŒ–å…·æœ‰åŸºæœ¬ç±»å‹çš„æ³›å‹ç±»å‹\n- æ— æ³•åˆ›å»ºç±»å‹å‚æ•°çš„å®ä¾‹\n- æ— æ³•å£°æ˜ç±»å‹ä¸ºç±»å‹å‚æ•°çš„é™æ€å­—æ®µ\n- æ— æ³•å°†Castsæˆ–instanceofä¸å‚æ•°åŒ–ç±»å‹ä¸€èµ·ä½¿ç”¨\n- æ— æ³•åˆ›å»ºå‚æ•°åŒ–ç±»å‹çš„æ•°ç»„\n- æ— æ³•åˆ›å»ºï¼Œæ•è·æˆ–æŠ›å‡ºå‚æ•°åŒ–ç±»å‹çš„å¯¹è±¡\n- æ— æ³•é‡è½½æ¯ä¸ªé‡è½½çš„å½¢å¼å‚æ•°ç±»å‹éƒ½æ“¦é™¤ä¸ºç›¸åŒåŸå§‹ç±»å‹çš„æ–¹æ³•\n\n### æ— æ³•å®ä¾‹åŒ–å…·æœ‰åŸºæœ¬ç±»å‹çš„æ³›å‹ç±»å‹\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```java\nclass Pair<K, V> {\n  private K key;\n  private V value;\n  public Pair(K key, V value) { \n    this.key = key;\n    this.value = value; \n  }\n  ...\n}\n```\n\nåˆ›å»ºå¯¹è±¡æ—¶ï¼Œä¸èƒ½ä½¿ç”¨åŸºæœ¬ç±»å‹æ›¿æ¢å‚æ•°ç±»å‹ï¼š\n\n```java\nPair<int, char> p = new Pair<>(8, 'a'); // error\n```\n\n### æ— æ³•åˆ›å»ºç±»å‹å‚æ•°çš„å®ä¾‹\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```java\npublic static <E> void append(List<E> list) {\n   E elem = new E(); // error \n   list.add(elem);\n}\n```\n\n### æ— æ³•å£°æ˜ç±»å‹ä¸ºç±»å‹å‚æ•°çš„é™æ€å­—æ®µ\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```java\npublic class MobileDevice<T> {\n  private static T os; // error\n  ...\n}\n```\n\nç±»çš„é™æ€å­—æ®µæ˜¯æ‰€æœ‰éé™æ€å¯¹è±¡å…±äº«çš„å˜é‡ï¼Œå› æ­¤ï¼Œä¸å…è®¸ä½¿ç”¨ç±»å‹å‚æ•°çš„é™æ€å­—æ®µã€‚\n\n### æ— æ³•å°†Castsæˆ–instanceofä¸å‚æ•°åŒ–ç±»å‹ä¸€èµ·ä½¿ç”¨\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```java\npublic static <E> void rtti(List<E> list) {\n  if (list instanceof ArrayList<Integer>) { // error\n    ...\n  } \n}\n```\n\nJava ç¼–è¯‘å™¨ä¼šæ“¦é™¤æ‰€æœ‰ç±»å‹å‚æ•°ï¼Œæ‰€æœ‰ï¼Œæ— æ³•éªŒè¯åœ¨è¿è¡Œæ—¶ä½¿ç”¨çš„å‚æ•°åŒ–ç±»å‹ã€‚\n\n### æ— æ³•åˆ›å»ºå‚æ•°åŒ–ç±»å‹çš„æ•°ç»„\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```java\nList<Integer>[] arrayOfLists = new List<Integer>[2]; // error\n```\n\n### æ— æ³•åˆ›å»ºï¼Œæ•è·æˆ–æŠ›å‡ºå‚æ•°åŒ–ç±»å‹çš„å¯¹è±¡\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```java\nclass MathException<T> extends Exception {  ...  } // error\nclass QueueFullException<T> extends Throwable{ ... } // error\n```\n\n### æ— æ³•é‡è½½æ¯ä¸ªé‡è½½çš„å½¢å¼å‚æ•°ç±»å‹éƒ½ æ“¦é™¤ä¸ºç›¸åŒåŸå§‹ç±»å‹çš„æ–¹æ³•\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```java\npublic class Example {\n  public void print(Set<String> strSet) { }\n  public void print(Set<Integer> intSet) { }\n}\n```\n\n`print(Set<String> strSet)` å’Œ `print(Set<Integer> intSet)` åœ¨ç±»å‹æ“¦é™¤åæ˜¯å®Œå…¨ç›¸åŒçš„ç±»å‹ï¼Œæ‰€ä»¥ï¼Œæ— æ³•é‡è½½ã€‚","tags":["æ³›å‹"],"categories":["Java"]},{"title":"Flutter(Flare) æœ€æœ‰è¶£ç”¨æˆ·äº¤äº’åŠ¨ç”»æ²¡æœ‰ä¹‹ä¸€","url":"%2Fflutter-flare.html","content":"\n{% li https://cdn.lishaoy.net/flutterFlare/flutter-flare-cover.png, Flutter Flare, Flutter Flare %}\n\n2019å¹´12æœˆ12æ—¥ï¼Œ**Flutter** åœ¨ **Flutter Interact '19** ä¸Šå‘å¸ƒäº†å¦‚ä½•ä½¿ç”¨ **Rive** å’Œ **Flutter** åˆ¶ä½œåŠ¨æ€å¯äº¤äº’çš„åŠ¨ç”»ç»éªŒåˆ†äº«ï¼Œæˆ‘çœ‹äº†ä¹‹åï¼Œè§‰å¾—éå¸¸æœ‰è¶£ï¼Œå› æ­¤ï¼Œå†™äº†3ä¸ªå° demoï¼ŒæŠŠå®ƒå†™æˆæ–‡ç« è®°å½•åˆ†äº«ç»™å¤§å®¶ã€‚\n\n<hr />\n\n<!-- more -->\n\n## åè¯ç†è§£\n\né¦–å…ˆï¼Œæˆ‘ä»¬æ¥ç†è§£å‡ ä¸ªåè¯ï¼Œä¸ç„¶åç»­æ–‡ç« ï¼Œå¯èƒ½çœ‹ç€æœ‰äº›æ™•ï¼Œå¦‚ä¸‹ï¼š\n\n- Flareï¼šæ˜¯ Flutter çš„åŠ¨ç”»æ’ä»¶åç§°ï¼Œå®Œæ•´åç§°æ˜¯ `flare_flutter` æˆ‘ä»¬è¦åœ¨ `pubspec.yaml` æ–‡ä»¶é‡Œå¼•å…¥\n- Riveï¼šæ˜¯åˆ¶ä½œ Flare åŠ¨ç”»çš„[ç½‘ç«™](https://rive.app/about-rive)ï¼Œå®ƒæ—¢æ˜¯ä¸€ä¸ªç½‘ç«™ä¹Ÿæ˜¯åˆ¶ä½œå·¥å…·ï¼Œåœ¨æ­¤ç½‘ç«™é‡Œæœ‰å¾ˆå¤šç”¨æˆ·åˆ†äº« Flare åŠ¨ç”»ä¾›æˆ‘ä»¬ä¸‹è½½ä½¿ç”¨ã€Flare APIä½¿ç”¨æ–‡æ¡£ã€åˆ¶ä½œ Flare åŠ¨ç”»çš„è§†é¢‘æ•™ç¨‹ï¼ˆå¤§å®¶ä¹Ÿå¯ä»¥é€šè¿‡å­¦ä¹ åˆ¶ä½œè‡ªå·±å–œæ¬¢çš„åŠ¨ç”»ï¼‰ç­‰\n\n\n## äº¤äº’åŠ¨ç”»é¢„è§ˆ\n\n### ç™»å½•äº¤äº’åŠ¨ç”»\n\nç™»å½•äº¤äº’åŠ¨ç”»ï¼ŒåŒ…å«å¦‚ä¸‹6ç§åŠ¨ç”»ï¼š\n\n- idleï¼šæ— ä»»ä½•æ“ä½œæ—¶çš„çŠ¶æ€ï¼ˆç†Šçš„èº«ä½“ä¼šä¸Šä¸‹æµ®åŠ¨å’Œçœ¨çœ¼ç›ï¼‰\n- testï¼šå½“æˆ‘ä»¬åœ¨ email è¾“å…¥æ¡†ä¸­è¾“å…¥æ—¶çš„çŠ¶æ€ï¼ˆç†Šä¼šçœ‹å‘è¾“å…¥æ¡†ï¼Œä¸”éšç€ä½ è¾“å…¥çš„é•¿åº¦æ—‹è½¬å¤´éƒ¨ï¼‰\n- hands_upï¼šå½“æˆ‘ä»¬åœ¨ password è¾“å…¥æ¡†ä¸­è¾“å…¥æ—¶çš„çŠ¶æ€ ï¼ˆç†Šä¼šç”¨æ‰‹è’™ä¸Šçœ¼ç›ï¼‰\n- hands_downï¼šå½“æˆ‘ä»¬åœ¨ password è¾“å…¥æ¡†è¾“å…¥å®Œæˆæ—¶çš„çŠ¶æ€ ï¼ˆç†Šä¼šæ”¾ä¸‹åŒæ‰‹ï¼‰\n- failï¼šå½“æˆ‘ä»¬ç™»å½•å¤±è´¥æ—¶çš„çŠ¶æ€ï¼ˆç†Šä¼šåšå‡ºéš¾è¿‡çš„è¡¨æƒ…ï¼‰\n- successï¼šå½“æˆ‘ä»¬ç™»å½•æˆåŠŸæ—¶çš„çŠ¶æ€ï¼ˆç†Šä¼šåšå‡ºé«˜å…´çš„è¡¨æƒ…ï¼‰\n\nä»¥ä¸Š6ç§çŠ¶æ€ï¼Œå¯ä»¥åœ¨ **Rive** ç½‘ç«™æŸ¥çœ‹å…·ä½“åŠ¨ç”»ï¼Œ[ç‚¹å‡»è¿›å…¥æŸ¥çœ‹](https://rive.app/a/castor/files/flare/teddy-with-hands/preview)\n\nä¸‹é¢ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ¡ˆä¾‹é‡Œå®ç°åŠ¨ç”»æ•ˆæœ\n\nidleï¼šæ— ä»»ä½•æ“ä½œæ—¶çš„çŠ¶æ€ï¼Œå¦‚å›¾ï¼š\n\n<div style=\"width: 100%; margin:auto\">\n\n![no-shadow](https://cdn.lishaoy.net/flutterFlare/sign-in.gif \"idle\")\n\n</div>\n\ntestï¼šå½“æˆ‘ä»¬åœ¨ email è¾“å…¥æ¡†ä¸­è¾“å…¥æ—¶çš„çŠ¶æ€ï¼Œå¦‚å›¾ï¼š\n\n<div style=\"width: 100%; margin:auto\">\n\n![no-shadow](https://cdn.lishaoy.net/flutterFlare/email.gif \"test\")\n\n</div>\n\nhands_upï¼šå½“æˆ‘ä»¬åœ¨ password è¾“å…¥æ¡†ä¸­è¾“å…¥æ—¶çš„çŠ¶æ€ï¼Œhands_downï¼šå½“æˆ‘ä»¬åœ¨ password è¾“å…¥æ¡†è¾“å…¥å®Œæˆæ—¶çš„çŠ¶æ€ï¼Œå¦‚å›¾ï¼š\n\n<div style=\"width: 100%; margin:auto\">\n\n![no-shadow](https://cdn.lishaoy.net/flutterFlare/password.gif \"hands_up & hands_down\")\n\n</div>\n\nfailï¼šå½“æˆ‘ä»¬ç™»å½•å¤±è´¥æ—¶çš„çŠ¶æ€ï¼Œå¦‚å›¾ï¼š\n\n<div style=\"width: 100%; margin:auto\">\n\n![no-shadow](https://cdn.lishaoy.net/flutterFlare/failure.gif \"fail\")\n\n</div>\n\nsuccessï¼šå½“æˆ‘ä»¬ç™»å½•æˆåŠŸæ—¶çš„çŠ¶æ€ï¼Œå¦‚å›¾ï¼š\n\n<div style=\"width: 100%; margin:auto\">\n\n![no-shadow](https://cdn.lishaoy.net/flutterFlare/successful.gif \"success\")\n\n</div>\n\n### Buttonäº¤äº’åŠ¨ç”»\n\nbutton äº¤äº’åŠ¨ç”»ï¼Œå¦‚å›¾ï¼š\n\n<div style=\"width: 100%; margin:auto\">\n\n![no-shadow](https://cdn.lishaoy.net/flutterFlare/button.gif \"button\")\n\n</div>\n\n### Menuäº¤äº’åŠ¨ç”»\n\nmenu äº¤äº’åŠ¨ç”»ï¼Œå¦‚å›¾ï¼š\n\n<div style=\"width: 100%; margin:auto\">\n\n![no-shadow](https://cdn.lishaoy.net/flutterFlare/menu.gif \"menu\")\n\n</div>\n\nä»¥ä¸Šæ‰€æœ‰åŠ¨ç”»ï¼Œä¹Ÿå¯ä»¥ [ç‚¹å‡»è§‚çœ‹è§†é¢‘](https://www.bilibili.com/video/BV14p4y1U7YN/)\n\n## ä»£ç å®ç°\n\nå¦‚ä½•ç”¨ä»£ç å®ç°ï¼Œåˆ†ä¸ºä»¥ä¸‹2ä¸ªæ­¥éª¤ï¼š\n\n- å¼•å…¥æ’ä»¶å’Œèµ„æºï¼šå¼•å…¥ç›¸å…³æ’ä»¶ `flare_flutter` ã€ `smart_flare`\n- ç¼–å†™ä»£ç ï¼šç¼–å†™ç›¸å…³ä»£ç \n\n### å¼•å…¥æ’ä»¶å’Œèµ„æº\n\nå¼•å…¥æ’ä»¶å’Œèµ„æºï¼Œå¦‚ä¸‹ï¼š\n\n```bash\ndependencies:\n  ...\n  flare_flutter: ^2.0.4  # flare æ’ä»¶\n  smart_flare: any  # å¯¹ flare APIè¿›è¡Œå°è£…çš„æ’ä»¶ï¼Œä½¿ç”¨å°‘é‡çš„ä»£ç å³å¯å®ç°äº¤äº’åŠ¨ç”»\n  ...\n\nassets:\n  ...\n  - assets/Teddy.flr\n  - assets/button-animation.flr\n  - assets/slideout-menu.flr\n  ...\n```\n\n### ç¼–å†™ä»£ç \n\nç”±äºï¼Œç™»å½•äº¤äº’åŠ¨ç”»ç¨å¤æ‚ä¸€äº›ï¼Œåœ¨æ­¤å°±ä¸å±•ç¤ºå®ç°çš„ä»£ç ï¼Œå¦‚æ„Ÿå…´è¶£ï¼Œå¯[ç§»æ­¥GitHubæŸ¥çœ‹æºç ](https://github.com/persilee/flutter_pro/blob/master/lib/demo/flare_demo/flare_sign_in_demo.dart)\n\n### Buttonäº¤äº’åŠ¨ç”»ä»£ç å®ç°\n\nbutton äº¤äº’åŠ¨ç”»ä»£ç å®ç°å¦‚ä¸‹ï¼š\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:smart_flare/actors/smart_flare_actor.dart';\nimport 'package:smart_flare/models.dart';\n\nclass FlareButtonDemo extends StatefulWidget {\n  @override\n  _FlareButtonDemoState createState() => _FlareButtonDemoState();\n}\n\nclass _FlareButtonDemoState extends State<FlareButtonDemo> {\n  @override\n  Widget build(BuildContext context) {\n    var animationWidth = 295.0;\n    var animationHeight = 251.0;\n    var animationWidthThirds = animationWidth / 3;\n    var halfAnimationHeight = animationHeight / 2;\n\n    var activeAreas = [\n\n      ActiveArea(\n        area: Rect.fromLTWH(0, 0, animationWidthThirds, halfAnimationHeight),\n        debugArea: false,\n        guardComingFrom: ['deactivate'],\n        animationName: 'camera_tapped',\n      ),\n\n      ActiveArea(\n          area: Rect.fromLTWH(animationWidthThirds, 0, animationWidthThirds, halfAnimationHeight),\n          debugArea: false,\n          guardComingFrom: ['deactivate'],\n          animationName: 'pulse_tapped'),\n\n      ActiveArea(\n          area: Rect.fromLTWH(animationWidthThirds * 2, 0, animationWidthThirds, halfAnimationHeight),\n          debugArea: false,\n          guardComingFrom: ['deactivate'],\n          animationName: 'image_tapped'),\n\n      ActiveArea(\n          area: Rect.fromLTWH(0, animationHeight / 2, animationWidth, animationHeight / 2),\n          debugArea: false,\n          animationsToCycle: ['activate', 'deactivate'],\n          onAreaTapped: () {\n            print('Button tapped!');\n          })\n\n    ];\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Flare Button Demo'),\n      ),\n      body: Container(\n        decoration: BoxDecoration(\n          gradient: LinearGradient(\n              begin: Alignment.topCenter,\n              end: Alignment.bottomCenter,\n              colors: [\n                Color(0x3fffeb3b),\n                Colors.orange,\n              ]),\n        ),\n        child: Align(\n          alignment: Alignment.bottomCenter,\n          child: SmartFlareActor(\n            width: animationWidth,\n            height: animationHeight,\n            filename: 'assets/button-animation.flr',\n            startingAnimation: 'deactivate',\n            activeAreas: activeAreas,\n          ),\n        ),\n      ),\n    );\n  }\n}\n```\n\n### Menuäº¤äº’åŠ¨ç”»ä»£ç å®ç°\n\nmenu äº¤äº’åŠ¨ç”»ä»£ç å®ç°ï¼Œå¦‚ä¸‹ï¼š\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:smart_flare/smart_flare.dart';\n\nclass FlareSidebarMenuDemo extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    print(MediaQuery.of(context).size.height);\n    return Scaffold(\n      body: Container(\n        child: Align(\n          alignment: Alignment.centerRight,\n          child: PanFlareActor(\n            width: MediaQuery.of(context).size.width / 2.366,\n            height: MediaQuery.of(context).size.height,\n            filename: 'assets/slideout-menu.flr',\n            openAnimation: 'open',\n            closeAnimation: 'close',\n            direction: ActorAdvancingDirection.RightToLeft,\n            threshold: 20.0,\n            reverseOnRelease: true,\n            completeOnThresholdReached: true,\n            activeAreas: [\n              RelativePanArea(\n                  area: Rect.fromLTWH(0, .7, 1.0, .3), debugArea: false),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n}\n```\n\nä»¥ä¸Š3ä¸ªäº¤äº’åŠ¨ç”»æ¡ˆä¾‹çš„æºç ï¼Œæ”¾åœ¨äº†æˆ‘2å¹´å‰å†™çš„ä¸€ä¸ª [Flutteræ¡ˆä¾‹](https://github.com/persilee/flutter_pro) çš„é¡¹ç›®é‡Œäº†ï¼Œæ­¤é¡¹ç›®ç°å·²ç»´æŠ¤èµ·æ¥ï¼Œä»¥åä¼šé•¿æœŸæ›´æ–°ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥æ”¶è—ï¼Œæ²¡äº‹æ—¶æ¥çœ‹çœ‹å¯èƒ½ä¼šæœ‰æ–°çš„å‘ç° ğŸ˜²\n\næ­¤ç¯‡æ–‡ç« åˆ°æ­¤ç»“æŸï¼Œä¸‹ç¯‡æ–‡ç« è®¡åˆ’ç»™å¤§å®¶åˆ†äº«ï¼ŒFlutter é‡Œçš„è·¯ç”±ï¼Œä¼šæ€»ç»“å½’çº³æ‰€æœ‰çš„è·¯ç”±ä½¿ç”¨æ–¹æ³•ï¼Œæœ€åæ¥å°è£…ä¸€ä¸ªä¼˜ç§€çš„è·¯ç”±ç®¡ç†ç±»ã€‚","tags":["Flare"],"categories":["Dart"]},{"title":"FutureBuilder and StreamBuilder ä¼˜é›…çš„æ„å»ºé«˜è´¨é‡é¡¹ç›®","url":"%2FfutrueBuilder-streamBuilder.html","content":"\n{% li https://cdn.lishaoy.net/fureBuilderStreamBuilder/cover.png, Flutter, Flutter %}\n\næœ¬ç¯‡æ–‡ç« å°†ä»‹ç»ä» `setState` å¼€å§‹ï¼Œåˆ° `futureBuilder` ã€ `streamBuilder` æ¥ä¼˜é›…çš„æ„å»ºä½ çš„é«˜è´¨é‡é¡¹ç›®ï¼Œè€Œä¸å¼•å‘ `setState` å¸¦æ¥çš„å‰¯ä½œç”¨ï¼Œå¦‚å¯¹æ–‡ç« æ„Ÿå…´è¶£ï¼Œè¯· [ç‚¹å‡»æŸ¥çœ‹æºç ](https://github.com/persilee/flutter_pro)ã€‚\n\n<hr />\n\n<!-- more -->\n\n## åŸºç¡€çš„setStateæ›´æ–°æ•°æ®\n\né¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨åŸºç¡€çš„ `StatefulWidget` æ¥åˆ›å»ºé¡µé¢ï¼Œå¦‚ä¸‹ï¼š\n\n```dart\nclass BaseStatefulDemo extends StatefulWidget {\n  @override\n  _BaseStatefulDemoState createState() => _BaseStatefulDemoState();\n}\n\nclass _BaseStatefulDemoState extends State<BaseStatefulDemo> {\n  @override\n  Widget build(BuildContext context) {\n    return Container();\n  }\n}\n```\n\nç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ `Future` æ¥åˆ›å»ºä¸€äº›æ•°æ®ï¼Œæ¥æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚ï¼Œå¦‚ä¸‹ï¼š\n\n```dart\n  Future<List<String>> _getListData() async {\n    await Future.delayed(Duration(seconds: 1)); // 1ç§’ä¹‹åè¿”å›æ•°æ®\n    return List<String>.generate(10, (index) => '$index content');\n  }\n```\n\nåœ¨ `initState()` æ–¹æ³•ä¸­è°ƒç”¨ `_getListData()` æ¥åˆå§‹åŒ–æ•°æ®ï¼Œå¦‚ä¸‹ï¼š\n\n```dart\n  List<String> _pageData = List<String>();\n\n  @override\n  void initState() {\n    _getListData().then((data) => setState(() {\n              _pageData = data;\n            }));\n    super.initState();\n  }\n```\n\nä½¿ç”¨ `ListView.builder` æ¥å¤„ç†è¿™äº›æ•°æ®æ„å»ºUIï¼Œå¦‚ä¸‹ï¼š\n\n```dart\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Base Stateful Demo'),\n      ),\n      body: ListView.builder(\n        itemCount: _pageData.length,\n        itemBuilder: (buildContext, index) {\n          return Column(\n            children: <Widget>[\n              ListTile(\n                title: Text(_pageData[index]),\n              ),\n              Divider(),\n            ],\n          );\n        },\n      ),\n    );\n  }\n```\n\næœ€åï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°ç•Œé¢äº† ğŸ˜ ï¼Œå¦‚å›¾ï¼š\n\n<div style=\"width: 36%; margin:auto\">\n\n![no-shadow](https://cdn.lishaoy.net/fureBuilderStreamBuilder/list-data.png \"list data\")\n\n</div>\n\nå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å°† **UI** æ˜¾ç¤ºå•ç‹¬æå–æˆä¸€ä¸ªæ–¹æ³•ï¼Œæ–¹ä¾¿åæœŸç»´æŠ¤ï¼Œä½¿ä»£ç å±‚æ¬¡æ›´æ¸…æ™°ï¼Œå¦‚ä¸‹ï¼š\n\n```dart\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Base Stateful Demo'),\n      ),\n      body: ListView.builder(\n        itemCount: _pageData.length,\n        itemBuilder: (buildContext, index) {\n          return getListDataUi(int index);\n        },\n      ),\n    );\n  }\n\n  Widget getListDataUi(int index) {\n    return Column(\n                children: <Widget>[\n                  ListTile(\n                    title: Text(_pageData[index]),\n                  ),\n                  Divider(),\n                ],\n              );\n  }\n```\n\nç»§ç»­ï¼Œæˆ‘ä»¬æ¥å®Œå–„å®ƒï¼Œæ­£å¸¸ä»åç«¯è·å–æ•°æ®ï¼Œåç«¯åº”è¯¥ä¼šç»™æˆ‘ä»¬è¿”å›ä¸åŒä¿¡æ¯ï¼Œæ ¹æ®è¿™äº›ä¿¡æ¯éœ€è¦å¤„ç†ä¸åŒçš„çŠ¶æ€ï¼Œå¦‚ï¼š\n\n- BusyState(åŠ è½½ä¸­)ï¼šæˆ‘ä»¬åœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºä¸€ä¸ªåŠ è½½æŒ‡ç¤ºå™¨\n- DataFetchedState(æ•°æ®åŠ è½½å®Œæˆ)ï¼šæˆ‘ä»¬å»¶è¿Ÿ2ç§’ï¼Œæ¥æ¨¡æ‹Ÿæ•°æ®åŠ è½½å®Œæˆ\n- ErrorState(é”™è¯¯)ï¼šæ˜¾ç¤ºé”™è¯¯æç¤º\n- NoData(æ²¡æœ‰æ•°æ®)ï¼šè¯·æ±‚æˆåŠŸï¼Œä½†æ²¡æœ‰æ•°æ®ï¼Œæ˜¾ç¤ºæç¤º\n\nå…ˆæ¥å¤„ç† **BusyState** åŠ è½½æŒ‡ç¤ºå™¨ï¼Œå¦‚ä¸‹ï¼š\n\n```dart\nbool get _fetchingData => _pageData == null; // åˆ¤æ–­æ•°æ®æ˜¯å¦ä¸ºç©º\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Base Stateful Demo'),\n      ),\n      body: _fetchingData\n          ? Center(\n              child: CircularProgressIndicator( // åŠ è½½æŒ‡ç¤ºå™¨ \n                valueColor: AlwaysStoppedAnimation<Color>(Colors.yellow), // è®¾ç½®æŒ‡ç¤ºå™¨é¢œè‰²\n                backgroundColor: Colors.yellow[100],  // è®¾ç½®èƒŒæ™¯è‰²\n              ),\n            )\n          : ListView.builder(\n              itemCount: _pageData.length,\n              itemBuilder: (buildContext, index) {\n                return getListDataUi(index);\n              },\n            ),\n    );\n  }\n```\n\næ•ˆæœå¦‚å›¾ï¼š\n\n<div style=\"width: 36%; margin:auto\">\n\n![no-shadow](https://cdn.lishaoy.net/fureBuilderStreamBuilder/indicator.png \"indicator\")\n\n</div>\n\næ¥ç€ï¼Œæˆ‘ä»¬æ¥å¤„ç† **ErrorState** ï¼Œæˆ‘ç»™ `_getListData()` æ·»åŠ  `hasError` å‚æ•°æ¥æ¨¡æ‹Ÿåç«¯è¿”å›çš„é”™è¯¯ï¼Œå¦‚ä¸‹\n\n```dart\n  Future<List<String>> _getListData({bool hasError = false}) async {\n    await Future.delayed(Duration(seconds: 1)); // 1ç§’ä¹‹åè¿”å›æ•°æ®\n\n    if (hasError) {\n      return Future.error('è·å–æ•°æ®å‡ºç°é—®é¢˜ï¼Œè¯·å†è¯•ä¸€æ¬¡');\n    }\n\n    return List<String>.generate(10, (index) => '$index content');\n  }\n```\n\nç„¶åï¼Œåœ¨ `initState()` æ–¹æ³•ä¸­æ•è·å¼‚å¸¸æ›´æ–°æ•°æ®ï¼Œå¦‚ä¸‹ï¼š\n\n```dart\n  @override\n  void initState() {\n    _getListData(hasError: true)\n        .then((data) => setState(() {\n              _pageData = data;\n            }))\n        .catchError((error) => setState(() {\n              _pageData = [error];\n            }));\n    super.initState();\n  }\n```\n\næ•ˆæœå¦‚å›¾( *å½“ç„¶è¿™é‡Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªé”™è¯¯é¡µé¢æ¥å±•ç¤º* )ï¼š\n\n<div style=\"width: 36%; margin:auto\">\n\n![no-shadow](https://cdn.lishaoy.net/fureBuilderStreamBuilder/error.png \"error\")\n\n</div>\n\næ¥ç€ï¼Œæˆ‘ä»¬æ¥å¤„ç† **NoData** ï¼Œæˆ‘ç»™ `_getListData()` æ·»åŠ  `hasData` å‚æ•°æ¥æ¨¡æ‹Ÿåç«¯è¿”å›ç©ºæ•°æ®ï¼Œå¦‚ä¸‹ï¼š\n\n```dart\n  Future<List<String>> _getListData(\n      {bool hasError = false, bool hasData = true}) async {\n    await Future.delayed(Duration(seconds: 1));\n\n    if (hasError) {\n      return Future.error('è·å–æ•°æ®å‡ºç°é—®é¢˜ï¼Œè¯·å†è¯•ä¸€æ¬¡');\n    }\n\n    if (!hasData) {\n      return List<String>();\n    }\n\n    return List<String>.generate(10, (index) => '$index content');\n  }\n```\n\nç„¶åï¼Œåœ¨ `initState()` æ–¹æ³•æ›´æ–°æ•°æ®ï¼Œå¦‚ä¸‹ï¼š\n\n```dart\n  @override\n  void initState() {\n    _getListData(hasError: false, hasData: false)\n        .then((data) => setState(() {\n              if (data.length == 0) {\n                data.add('No data fount');\n              }\n              _pageData = data;\n            }))\n        .catchError((error) => setState(() {\n              _pageData = [error];\n            }));\n    super.initState();\n  }\n```\n\næ•ˆæœå¦‚å›¾ï¼š\n\n<div style=\"width: 36%; margin:auto\">\n\n![no-shadow](https://cdn.lishaoy.net/fureBuilderStreamBuilder/no-data.png \"error\")\n\n</div>\n\n{% note success %}\nè¿™å°±æ˜¯é€šè¿‡ `setState()` æ¥æ›´æ–°æ•°æ®ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Œé€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬è¿™ä¹ˆä½¿ç”¨æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„é¡µé¢è¶³å¤Ÿå¤æ‚ï¼Œè¦å¤„ç†çš„çŠ¶æ€è¶³å¤Ÿå¤šï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ›´å¤šçš„ `setState()` ï¼Œæ„å‘³ç€æˆ‘ä»¬è¦æ›´å¤šçš„ä»£ç æ¥æ›´æ–°æ•°æ®ï¼Œè€Œä¸”ï¼Œæˆ‘ä»¬æ¯æ¬¡ `setState()` çš„æ—¶å€™ `build()` æ–¹æ³•å°±ä¼šé‡æ–°æ‰§è¡Œä¸€æ¬¡( *è¿™å°±æ˜¯ä¸Šæ–‡æåˆ°çš„å‰¯ä½œç”¨* )ã€‚\n\nå…¶å®ï¼Œ**Flutter** å·²ç»æä¾›äº†æ›´ä¼˜é›…çš„æ–¹å¼æ¥æ›´æ–°æˆ‘ä»¬çš„æ•°æ®åŠå¤„ç†çŠ¶æ€ï¼Œå®ƒå°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦ä»‹ç»çš„ `futureBuilder`ã€‚\n{% endnote %}\n\n## FutureBuilder\n\n`FutureBuilder` é€šè¿‡ **future:** å‚æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ª `Future` ï¼Œå¹¶ä¸”é€šè¿‡ **builder:** å‚æ•°æ¥æ„å»º **UI** ï¼Œ**builder:** å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæä¾›äº†ä¸€ä¸ª `snapshot` å‚æ•°é‡Œé¢å¸¦ç€æˆ‘ä»¬éœ€è¦çš„çŠ¶æ€å’Œæ•°æ®ã€‚\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä¸Šé¢çš„ `StatefulWidget` æ”¹æˆ `StatelessWidget` ï¼Œå¹¶ä½¿ç”¨ `FutureBuilder` æ›¿æ¢ï¼Œå¦‚ä¸‹:\n\n```dart\nclass FutureBuilderDemo extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Future Builder Demo'),\n      ),\n      body: FutureBuilder(\n        future: _getListData(),\n        builder: (buildContext, snapshot) {\n          if (snapshot.hasError) {  // FutureBuilder å·²ç»ç»™æˆ‘ä»¬æä¾›å¥½äº† error çŠ¶æ€\n            return _getInfoMessage(snapshot.error);\n          }\n\n          if (!snapshot.hasData) { // FutureBuilder å·²ç»ç»™æˆ‘ä»¬æä¾›å¥½äº†ç©ºæ•°æ®çŠ¶æ€\n            return Center(\n              child: CircularProgressIndicator(\n                valueColor: AlwaysStoppedAnimation<Color>(Colors.yellow),\n                backgroundColor: Colors.yellow[100],\n              ),\n            );\n          }\n          var listData = snapshot.data;\n          if (listData.length == 0) {\n            return _getInfoMessage('No data found');\n          }\n\n          return ListView.builder(\n            itemCount: listData.length,\n            itemBuilder: (buildContext, index) {\n              return Column(\n                children: <Widget>[\n                  ListTile(\n                    title: Text(listData[index]),\n                  ),\n                  Divider(),\n                ],\n              );\n            },\n          );\n        },\n      ),\n    );\n  }\n\n  ...\n```\n\né€šè¿‡æŸ¥çœ‹æºç ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£çš„ `FutureBuilder` å·²ç»ç»™æˆ‘å¤„ç†å¥½äº†ä¸€äº›åŸºæœ¬çŠ¶æ€ï¼Œå¦‚å›¾\n\n<div style=\"width: 66%; margin:auto\">\n\n![snapshot](https://cdn.lishaoy.net/fureBuilderStreamBuilder/snapshot.png \"snapshot\")\n\n</div>\n\næˆ‘ä»¬ä½¿ç”¨ `_getInfoMessage()` æ–¹æ³•æ¥å¤„ç†çŠ¶æ€æç¤ºï¼Œå¦‚ä¸‹ï¼š\n\n```\n  Widget _getInfoMessage(String msg) {\n    return Center(\n      child: Text(msg),\n    );\n  }\n```\n\nå°±è¿™æ ·æˆ‘ä»¬ä¸ä½¿ç”¨ä»»ä½•ä¸€ä¸ª `setState()` å°±èƒ½å®Œæˆå’Œä¸Šé¢ä¸€æ ·çš„æ•ˆæœï¼Œå¹¶ä¸”ä¸ä¼šäº§ç”Ÿå‰¯ä½œç”¨ï¼Œæ˜¯ä¸æ˜¯å¾ˆç»™åŠ› ğŸ’ªã€‚\n\n{% note info %}\nä½†æ˜¯ï¼Œå®ƒå¹¶ä¸æ˜¯å®Œç¾çš„ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³åˆ·æ–°æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°è°ƒç”¨ `_getListData()` æ–¹æ³•ï¼Œç»“æœå®ƒå¹¶æ²¡æœ‰åˆ·æ–°ã€‚\n{% endnote %}  \n\n## StreamBuilder\n\n`StreamBuilder` é€šè¿‡ **stream:** å‚æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ª `stream` ï¼ŒåŒæ ·ï¼Œé€šè¿‡ **builder:** å‚æ•°æ¥æ„å»º **UI** ï¼Œå’Œ `futureBuilder` ç”¨æ³•ç±»ä¼¼ï¼Œå”¯ä¸€çš„å¥½å¤„å°±æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥éšæ„æ§åˆ¶ `stream` çš„è¾“å…¥è¾“å‡ºï¼Œæ·»åŠ ä»»ä½•çš„çŠ¶æ€æ¥æ›´æ–°æŒ‡å®šçŠ¶æ€ä¸‹çš„ **UI** ã€‚\n\né¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ `enum` æ¥è¡¨ç¤ºæˆ‘ä»¬çš„çŠ¶æ€ï¼Œåœ¨æ–‡ä»¶çš„å¤´éƒ¨æ·»åŠ å®ƒï¼Œå¦‚ä¸‹ï¼š\n\n```dart\nenum StreamViewState { Busy, DataRetrieved, NoData }\n```\n\næ¥ç€ï¼Œä½¿ç”¨ `StreamController` åˆ›å»ºä¸€ä¸ªæµæ§åˆ¶å™¨ï¼ŒæŠŠ `FutureBuilder` æ›¿æ¢æˆ `StreamBuilder` ï¼ŒæŠŠ **future:** å‚æ•° æ”¹æˆ **stream:** å‚æ•°ï¼Œå¦‚ä¸‹ï¼š\n\n```dart\n\nfinal StreamController<StreamDemoState> _stateController = StreamController<StreamDemoState>();\n\n@override\n  Widget build(BuildContext context) {\n    return Scaffold(\n\n      ...\n\n      body: StreamBuilder(\n        stream: model.homeState,\n        builder: (buildContext, snapshot) {\n          if (snapshot.hasError) {\n            return _getInfoMessage(snapshot.error);\n          }\n          // ä½¿ç”¨ æšä¸¾çš„ Busy æ¥æ›´æ–°æ•°æ®\n          if (!snapshot.hasData || StreamViewState.Busy) {\n            return Center(\n              child: CircularProgressIndicator(\n                valueColor: AlwaysStoppedAnimation<Color>(Colors.yellow),\n                backgroundColor: Colors.yellow[100],\n              ),\n            );\n          }\n          //ä½¿ç”¨ æšä¸¾çš„ NoData æ¥æ›´æ–°æ•°æ®\n          if (listItems.length == StreamViewState.NoData) {\n            return _getInfoMessage('No data found');\n          }\n\n          return ListView.builder(\n            itemCount: listItems.length,\n            itemBuilder: (buildContext, index) {\n              return Column(\n                children: <Widget>[\n                  ListTile(\n                    title: Text(listItems[index]),\n                  ),\n                  Divider(),\n                ],\n              );\n            },\n          );\n        },\n      ),\n    );\n  }\n```\n\nåªæ˜¯æ–°å¢äº†æšä¸¾å€¼æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°æ•°æ®ï¼Œå…¶ä»–åŸºæœ¬ä¿æŒä¸å˜ã€‚\n\næ¥ä¸‹æ¥ï¼Œæˆ‘éœ€è¦ä¿®æ”¹ `_getListData()` æ–¹æ³•ï¼Œä½¿ç”¨æµæ§åˆ¶å™¨æ·»åŠ çŠ¶æ€åŠæ•°æ®ï¼Œå¦‚ä¸‹ï¼š\n\n```dart\n  Future _getListData({bool hasError = false, bool hasData = true}) async {\n    _stateController.add(StreamViewState.Busy);\n    await Future.delayed(Duration(seconds: 2));\n\n    if (hasError) {\n      return _stateController.addError('error'); // å¾€ stream é‡Œæ–°å¢ error æ•°æ®\n    }\n\n    if (!hasData) {\n      return _stateController.add(StreamViewState.NoData); // å¾€ stream é‡Œæ–°å¢æ— æ•°æ®çŠ¶æ€\n    }\n\n    _listItems = List<String>.generate(10, (index) => '$index content');\n    _stateController.add(StreamViewState.DataRetrieved); // å¾€ stream é‡Œæ–°å¢æ•°æ®è·å–å®ŒæˆçŠ¶æ€\n  }\n```\n\næ­¤æ—¶æˆ‘ä»¬å¹¶æ²¡æœ‰è¿”å›æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ›å»º `listItems` å­˜å‚¨æ•°æ®ï¼Œç„¶åæŠŠ `StatelessWidget` æ”¹æˆ `StatefulWidget` ï¼Œä»¥ä¾¿æˆ‘ä»¬æ ¹æ® `stream` çš„è¾“å‡ºæ¥æ›´æ–°æ•°æ®ï¼Œè¿™ä¸ªè½¬æ¢éå¸¸æ–¹ä¾¿ï¼Œ**VS Code** ç¼–è¾‘å™¨å¯ä»¥ä½¿ç”¨ `Option + Shift + R` ï¼ˆMacï¼‰æˆ–è€… `Ctrl + Shift + R` (Win)å¿«æ·é”® ï¼Œ**Android Studio** ä½¿ç”¨`Option + Enter` å¿«æ·é”®ï¼Œä¹‹ååœ¨ `initState()` æ–¹æ³•ä¸­åˆå§‹åŒ–æ•°æ®ï¼Œå¦‚ä¸‹ï¼š\n\n```dart\nList<String> listItems;\n\n@override\nvoid initState() {\n  _getListData();\n  super.initState();\n}\n```\n\nåˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»è§£å†³äº† `FutureBuilder` çš„å±€é™æ€§é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æ–°å¢ä¸€ä¸ª `FloatingActionButton` æ¥åˆ·æ–°æ•°æ®ï¼Œå¦‚ä¸‹ï¼š\n\n```dart\n@override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Stream Builder Demo'),\n      ),\n      floatingActionButton: FloatingActionButton(\n        backgroundColor: Colors.yellow,\n        child: Icon(\n          Icons.cached,\n          color: Colors.black87,\n        ),\n        onPressed: () {\n          model.dispatch(FetchData());\n        },\n      ),\n      body: StreamBuilder(\n\n        ...\n        \n      ),\n    );\n  }\n```\n\nç°åœ¨ï¼Œç‚¹å‡» `FloatingActionButton` åŠ è½½æŒ‡ç¤ºå™¨å·²ç»æ˜¾ç¤ºï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬çš„ `listItems` æ•°æ®å¹¶æ²¡çœŸæ­£çš„æ›´æ–°ï¼Œç‚¹å‡» `FloatingActionButton` åªæ˜¯æ›´æ–°çš„åŠ è½½çŠ¶æ€è€Œå·²ï¼Œè€Œä¸”æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ä»£ç å’Œ **UI** ä»£ç è¿˜åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¾ˆæ˜¾ç„¶ï¼Œä»–ä»¬å·²ç»è§£è€¦ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­å®Œå–„å®ƒï¼Œå°†ä¸šåŠ¡é€»è¾‘ä»£ç å’Œ **UI** ä»£ç åˆ†ç¦»å‡ºæ¥ã€‚\n\n## åˆ†ç¦»ä¸šåŠ¡é€»è¾‘ä»£ç å’Œ **UI** ä»£ç \n\næˆ‘ä»¬å¯ä»¥æŠŠå¤„ç† `stream` çš„ä»£ç æŠ½ç¦»æˆä¸€ä¸ªç±»ï¼Œå¦‚ä¸‹ï¼š\n\n```dart\nimport 'dart:async';\nimport 'dart:math';\n\nimport 'package:pro_flutter/demo/stream_demo/stream_demo_event.dart';\nimport 'package:pro_flutter/demo/stream_demo/stream_demo_state.dart';\n\n\nenum StreamViewState { Busy, DataRetrieved, NoData }\n\nclass StreamDemoModel {\n  final StreamController<StreamDemoState> _stateController = StreamController<StreamDemoState>();\n\n  List<String> _listItems;\n\n  Stream<StreamDemoState> get streamState => _stateController.stream;\n\n  void dispatch(StreamDemoEvent event){\n    print('Event dispatched: $event');\n    if(event is FetchData) {\n      _getListData(hasData: event.hasData, hasError: event.hasError);\n    }\n  }\n\n  Future _getListData({bool hasError = false, bool hasData = true}) async {\n    _stateController.add(BusyState());\n    await Future.delayed(Duration(seconds: 2));\n\n    if (hasError) {\n      return _stateController.addError('error');\n    }\n\n    if (!hasData) {\n      return _stateController.add(DataFetchedState(data: List<String>()));\n    }\n\n    _listItems = List<String>.generate(10, (index) => '$index content');\n    _stateController.add(DataFetchedState(data: _listItems));\n  }\n}\n```\n\nç„¶åï¼ŒæŠŠçŠ¶æ€ä¹Ÿå°è£…æˆä¸€ä¸ªæ–‡ä»¶ä¸”å°†æ•°æ®å’ŒçŠ¶æ€å…³è”ï¼Œå¦‚ä¸‹ï¼š\n\n```dart\nclass StreamDemoState{}\n\nclass InitializedState extends StreamDemoState {}\n\nclass DataFetchedState extends StreamDemoState {\n  final List<String> data;\n\n  DataFetchedState({this.data});\n\n  bool get hasData => data.length > 0;\n}\n\nclass ErrorState extends StreamDemoState{}\n\nclass BusyState extends StreamDemoState{}\n```\n\nå†å°è£…ä¸€ä¸ªäº‹ä»¶æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š\n\n```dart\nclass StreamDemoEvent{}\n\nclass FetchData extends StreamDemoEvent{\n  final bool hasError;\n  final bool hasData;\n\n  FetchData({this.hasError = false, this.hasData = true});\n\n  @override\n  String toString() {\n    return 'FetchData { hasError: $hasError, hasData: $hasData }';\n  }\n}\n```\n\næœ€åï¼Œæˆ‘ä»¬ **UI** éƒ¨åˆ†çš„ä»£ç å¦‚ä¸‹ï¼š\n\n```dart\nclass _StreamBuilderDemoState extends State<StreamBuilderDemo> {\n  final model = StreamDemoModel(); // åˆ›å»º model\n\n  @override\n  void initState() {\n    model.dispatch(FetchData(hasData: true)); // è·å– model é‡Œçš„æ•°æ®\n    super.initState();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n\n      ...\n\n      body: StreamBuilder(\n        stream: model.streamState,\n        builder: (buildContext, snapshot) {\n          if (snapshot.hasError) {\n            return _getInformationMessage(snapshot.error);\n          }\n\n          var streamState = snapshot.data;\n\n          if (!snapshot.hasData || streamState is BusyState) {  // é€šè¿‡å°è£…çš„çŠ¶æ€ç±»æ¥åˆ¤æ–­æ˜¯å¦æ›´æ–°UI\n            return Center(\n              child: CircularProgressIndicator(\n                valueColor: AlwaysStoppedAnimation<Color>(Colors.yellow),\n                backgroundColor: Colors.yellow[100],\n              ),\n            );\n          }\n\n          if (streamState is DataFetchedState) { // é€šè¿‡å°è£…çš„çŠ¶æ€ç±»æ¥åˆ¤æ–­æ˜¯å¦æ›´æ–°UI\n            if (!homeState.hasData) {\n              return _getInformationMessage('not found data');\n            }\n          }\n          return ListView.builder(\n            itemCount: streamState.data.length,  // æ­¤æ—¶ï¼Œæ•°æ®ä¸å†æ˜¯æœ¬åœ°æ•°æ®ï¼Œè€Œæ˜¯ä» stream ä¸­è¾“å‡ºçš„æ•°æ®\n            itemBuilder: (buildContext, index) =>\n                _getListItem(index, streamState.data),\n          );\n        },\n      ),\n    );\n  }\n\n  ...\n\n}\n```\n\næ­¤æ—¶ï¼Œä¸šåŠ¡é€»è¾‘ä»£ç å’Œ **UI** ä»£ç å·²å®Œå…¨åˆ†ç¦»ï¼Œä¸”å¯æ‰©å±•æ€§å’Œç»´æŠ¤å¢å¼ºï¼Œä¸”æˆ‘ä»¬çš„æ•°æ®å’ŒçŠ¶æ€å·²å…³è”èµ·æ¥ï¼Œæ­¤æ—¶ï¼Œç‚¹å‡» `FloatingActionButton` æ•ˆæœå’Œä¸Šé¢ä¸€æ ·ï¼Œä¸”æ•°æ®å·²æ›´æ–°ã€‚","tags":["Stream"],"categories":["Dart"]},{"title":"Android Flutter æ··åˆå¼€å‘é«˜ä»¿å¤§å‚App","url":"%2FandroidCtrip.html","content":"\n{% li https://cdn.lishaoy.net/ctrip/android/android_ctrip_h.png, Flutter, Flutter %}\n\nè‡ªä¸Šç¯‡ [Flutter 10å¤©é«˜ä»¿å¤§å‚AppåŠå°æŠ€å·§ç§¯ç´¯æ€»ç»“](https://h.lishaoy.net/flutterctrip) çš„ç»­ç¯‡ï¼Œè¿™æ¬¡æ›´æ˜¯å¹²è´§æ»¡æ»¡ã€‚\n\nè¿™ç¯‡æ–‡ç« å°†æ¦‚è¿° **Androidç»„ä»¶åŒ–çš„æ¶æ„æ­å»º** åŠ **Flutter** å’Œ **Android** å¦‚ä½•æ··åˆå¼€å‘ *(æ•´ä¸ªAppåªæœ‰é¦–é¡µæ˜¯ç”¨åŸç”ŸAndroidå®Œæˆï¼Œå…¶ä»–é¡µé¢éƒ½æ˜¯å¼•å…¥ä¹‹å‰çš„åšå¥½çš„Flutteré¡µé¢)* ï¼Œä¸»å®¿ä¸»ç¨‹åºç”± Android æ­å»ºï¼Œé‡‡ç”¨äº†ç»„ä»¶åŒ–çš„æ¶æ„æ­å»ºæ•´ä¸ª **App** ï¼Œä¸åŒä¸šåŠ¡ï¼Œå¯¹åº”ä¸åŒçš„ module å·¥ç¨‹ï¼Œä¸šåŠ¡ä¹‹é—´é‡‡ç”¨æ¥å£é€šä¿¡ *(ARouter)* ï¼Œä»¥ module çš„å½¢å¼æ··å…¥ Flutterï¼Œé€šè¿‡ **MethodChannel** å’Œ **Flutter** ç«¯è¿›è¡Œæ•°æ®é€šä¿¡ç­‰ï¼Œä¸”è¿™äº›åŠŸèƒ½å®ç°æºç å¼€æºï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥ç§»æ­¥è‡³ [GitHub](https://github.com/persilee/android_ctrip)ã€‚\n\n<hr />\n\n<!-- more -->\n\nä»¥ä¸‹åšæ–‡ä¼šåˆ†ä¸º4ä¸ªéƒ¨åˆ†æ¦‚è¿°ï¼š\n- é¡¹ç›®å®Œæˆçš„åŠŸèƒ½é¢„è§ˆ\n- é¡¹ç›®ç»„ä»¶åŒ–ç»“æ„åˆ†æ\n- é¡¹ç›®åŠŸèƒ½è¯¦ç»†æ¦‚è¿°ï¼ˆæ‰€ç”¨çŸ¥è¯†ç‚¹ï¼‰\n- Android Flutter æ··åˆå¼€å‘\n\n## é¡¹ç›®å®Œæˆçš„åŠŸèƒ½é¢„è§ˆ\n\né¦–å…ˆï¼Œæˆ‘ä»¬è¿˜æ˜¯é€šè¿‡ä¸€ä¸ªè§†é¢‘æ¥å¿«é€Ÿé¢„è§ˆä¸‹é¡¹ç›®å®Œæˆçš„åŠŸèƒ½å’Œè¿è¡Œæ•ˆæœï¼Œå¦‚ä¸‹\n\n<video id=\"flutter\" class=\"video-js vjs-default-skin\" controls preload=\"auto\" poster=\"https://cdn.lishaoy.net/ctrip/android_ctripb_bg.png\"\n    data-setup=\"{'example_option':true}\">\n    <source src=\"https://cdn.lishaoy.net/ctrip/android_ctrip.mp4\" type='video/mp4' />\n</video>\n\n{% note warning %} \n<i class=\"fa fa-fw fa-bell  faa-horizontal animated faa-slow\" style=\"color: #faab33;\"></i> å¦‚è§†é¢‘æ’­æ”¾å¤±è´¥ï¼Œ [è¯·ç§»æ­¥è¿™é‡Œç‚¹å‡»è§‚çœ‹](https://www.bilibili.com/video/BV1W54y1B72U/) *(ç‚¹å‡»é½¿è½® --> æ›´å¤šæ’­æ”¾è®¾ç½®ï¼Œå¯ä»¥éšè—é»‘è¾¹)*\n{% endnote %}\n\nçœ‹å®Œè§†é¢‘åï¼Œå…¶å®å¤§éƒ¨åˆ†åŠŸèƒ½å’Œä¹‹å‰çš„ [çº¯flutteré¡¹ç›®](https://h.lishaoy.net/flutterctrip) åŠŸèƒ½ç›¸åŒï¼Œåªæ˜¯é¦–é¡µæ–°å¢äº†4ä¸ªtabæ¨èé¡µé¢åŠæºç¨‹äºŒæ¥¼å’Œå¸ƒå±€æ”¹å˜ã€‚\n\nå¤§å®¶ä¹Ÿå¯æ‰«æï¼Œå®‰è£…ä½“éªŒï¼š\n\n<div style=\"width:166px; margin:auto\">![no-shadow](https://www.pgyer.com/app/qrcode/AsHK?sign=&amp;auSign=&amp;code= \"æ‰‹æœºæ‰«æäºŒç»´ç å®‰è£…\")</div>\n\n\n## é¡¹ç›®ç»„ä»¶åŒ–ç»“æ„åˆ†æ\n\n### é¡¹ç›®ç»“æ„å›¾é¢„è§ˆ\n\nå…¶æ¬¡ï¼Œåˆ†ææ¢³ç†ä¸‹é¡¹ç›®ç»“æ„ï¼Œé¡¹ç›®çš„ç»“æ„å¤§è‡´å¦‚å›¾ï¼Œè¿˜æœ‰ä¸€äº›ç»†ææœ«èŠ‚çš„æ²¡æœ‰ä½“ç°åœ¨å›¾é‡Œï¼š\n\n![no-shadow](https://cdn.lishaoy.net/ctrip/android/project.png \"project structure\")\n\n### é¡¹ç›®ç»“æ„åˆ†æ\n\n#### ä¸šåŠ¡å·¥ç¨‹\n\næŠŠå…·ä½“ç‹¬ç«‹çš„ä¸šåŠ¡éƒ½æ‹†åˆ†æˆå•ç‹¬çš„ module å‡å°é¡¹ç›®çš„ç»´æŠ¤å‹åŠ›\n\n- ft_home: é¦–é¡µæ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—å…¶å®è¿˜å¯ä»¥ç»§ç»­æ‹†åˆ†ï¼Œå¯æŠŠ4ä¸ª tab *(ç²¾é€‰ã€é™„è¿‘ã€æ™¯ç‚¹ã€ç¾é£Ÿ)* é¡µéƒ½æ‹†æˆæ¨¡å—ï¼Œè¿™é‡Œæˆ‘æš‚æ—¶æ²¡æœ‰æ‹†åˆ†ï¼Œåç»­ä¼šå®Œæˆ\n- ft_destination: ç›®çš„åœ°æ¨¡å—ï¼Œå…¶å®å¹¶æ²¡æœ‰å»ºç«‹è¿™ä¸ªæ¨¡å—ï¼Œå› ä¸ºç›´æ¥å¼•å…¥äº†ä¹‹å‰åšå¥½çš„ flutter é¡µé¢\n- ft_travel: æ—…æ‹æ¨¡å—ï¼ŒåŒæ ·ä¹Ÿä½¿ç”¨äº† flutter é¡µé¢\n- flutter: flutteræ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—æ˜¯ä» flutter_module ä¸­è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œåé¢ä»‹ç»åˆ°\n\n### åŸºç¡€åº“å·¥ç¨‹\n\næŠŠå…·ä½“çš„åŠŸèƒ½éƒ½å°è£…æˆç‹¬ç«‹çš„åº“ä¾›ä¸šåŠ¡æ¨¡å—ä½¿ç”¨ï¼Œé™ä½é¡¹ç›®çš„ç»´æŠ¤æˆæœ¬åŠä»£ç ä¹‹é—´è€¦åˆæ€§\n\n- lib_network: ç½‘ç»œåº“ï¼Œä½¿ç”¨ [okhttp](https://github.com/square/okhttp) æ’ä»¶äºŒæ¬¡å°è£…ï¼Œä¸šåŠ¡å±‚ç®€å•çš„è°ƒç”¨å³å¯\n- lib_webview: æ‰“å¼€ç½‘é¡µçš„webviewåº“ï¼Œä½¿ç”¨äº† [agentweb](https://github.com/Justson/AgentWeb) æ’ä»¶äºŒæ¬¡å°è£…ï¼Œä¸šåŠ¡å±‚åªéœ€è¦ä¸€å¥ä»£ç å³å¯å®Œæˆç½‘é¡µçš„è·³è½¬\n- lib_image_loader: å›¾ç‰‡åŠ è½½åº“ï¼Œä½¿ç”¨äº† [glide](https://github.com/bumptech/glide) æ’ä»¶äºŒæ¬¡å°è£…ï¼Œä¸šåŠ¡å±‚åªéœ€ä¸€å¥ä»£ç å³å¯åŠ è½½ä¸åŒå‚æ•°çš„å›¾ç‰‡\n- lib_asr: ç™¾åº¦AIè¯­éŸ³åº“ï¼Œé€šè¿‡ Android é›†æˆå¥½ä¾› Flutter ç«¯ä½¿ç”¨\n- lib_common_ui: å…¬å…±UIåº“ï¼Œé‡å¤å¤šæ¬¡ä½¿ç”¨çš„é¡µé¢é›†ä¸­ç®¡ç†\n- lib_base: åŸºç¡€åº“ï¼Œé€šè¿‡ [ARouter](https://github.com/alibaba/ARouter) çš„ service åŠŸèƒ½æš´éœ²æ¥å£æä¾›æœåŠ¡ç»™ä¸šåŠ¡å±‚ï¼Œå½“ç„¶ä¸šåŠ¡å±‚ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œæš´éœ²æ¥å£ä¾›å¤–ç•Œä½¿ç”¨\n\nè¿™é‡Œæœ‰ä¸€äº›ä½¿ç”¨çš„æ’ä»¶å¹¶æ²¡æœ‰åœ¨é¡¹ç›®ç»“æ„å›¾é‡Œä½“ç°å‡ºæ¥(ç»“æ„å›¾ç©ºé—´æœ‰é™)ã€‚\n\n### æ’ä»¶\n\nåœ¨è¿™é‡ŒæŠŠé¡¹ç›®ä½¿ç”¨çš„æ’ä»¶æ•´ç†åˆ—ä¸¾å‡ºæ¥ä¾›å¤§å®¶å‚è€ƒï¼š\n\n- [magicindicator](https://github.com/hackware1993/MagicIndicator) å¼ºå¤§ã€å¯å®šåˆ¶ã€æ˜“æ‰©å±•çš„ ViewPager æŒ‡ç¤ºå™¨æ¡†æ¶ï¼Œé¦–é¡µçš„4ä¸ª tab *(ç²¾é€‰ã€é™„è¿‘ã€æ™¯ç‚¹ã€ç¾é£Ÿ)* å°±æ˜¯ç”¨è¿™ä¸ªå®ç°çš„ã€‚\n- [immersionbar](https://github.com/gyf-dev/ImmersionBar) ä¸€å¥ä»£ç è½»æ¾å®ç°çŠ¶æ€æ ã€å¯¼èˆªæ æ²‰æµ¸å¼ç®¡ç†\n- [pagerBottomTabStrip](https://github.com/tyzlmjj/PagerBottomTabStrip) é¡µé¢åº•éƒ¨å’Œä¾§è¾¹çš„å¯¼èˆªæ ï¼Œé¦–é¡µã€ç›®çš„åœ°ã€æ—…æ‹ã€æˆ‘çš„é¡µé¢åˆ‡æ¢å°±æ˜¯ç”¨è¿™ä¸ªå®ç°çš„ã€‚\n- [rxjava/rxandroid](https://github.com/ReactiveX/RxAndroid) å¼‚æ­¥å’Œé“¾å¼ç¼–ç¨‹\n- [butterknife](https://github.com/JakeWharton/butterknife) viewæ³¨å…¥æ’ä»¶ï¼Œé…åˆAndroidæ’ä»¶ä½¿ç”¨ï¼Œå¯å¿«é€Ÿè‡ªåŠ¨ç”Ÿæˆ init viewçš„ä»£ç ï¼Œä¸ç”¨å†™ä¸€å¥ `findViewById` çš„ä»£ç ã€‚\n- [gson](https://github.com/google/gson) jsonè§£æï¼Œé…åˆAndroidæ’ä»¶ä½¿ç”¨ï¼Œå¯å¿«é€Ÿç”Ÿæˆå®ä½“ç±»\n- [smartRefreshLayout](https://github.com/scwang90/SmartRefreshLayout) æ™ºèƒ½ä¸‹æ‹‰åˆ·æ–°æ¡†æ¶ï¼Œæºç¨‹äºŒæ¥¼åŠä¸‹æ‹‰åˆ·æ–°åŠ è½½æ›´å¤šå°±æ˜¯ç”¨è¿™ä¸ªå®ç°çš„\n- [eventbus](https://github.com/greenrobot/EventBus) å‘å¸ƒ/è®¢é˜…äº‹ä»¶æ€»çº¿ï¼Œä¼˜é›…çš„å®Œæˆç»„ä»¶ä¹‹é—´é€šä¿¡\n- [arouter](https://github.com/alibaba/ARouter) ä¾èµ–æ³¨å…¥ã€è·¯ç”±è·³è½¬ã€æ³¨å†Œserviceï¼Œä¼˜é›…çš„å®Œæˆæ¨¡å—ä¹‹é—´çš„é€šä¿¡\n- [okhttp](https://github.com/square/okhttp) ç½‘ç»œè¯·æ±‚æ’ä»¶\n- [agentweb](https://github.com/Justson/AgentWeb) webviewæ¡†æ¶ï¼Œè¿›è¡Œç®€å•çš„äºŒæ¬¡å°è£…å¯ä¼˜é›…çš„è¿›è¡Œç½‘é¡µè·³è½¬\n- [glide](https://github.com/bumptech/glide) é«˜æ€§èƒ½ã€å¯æ‰©å±•çš„å›¾ç‰‡åŠ è½½æ’ä»¶\n- [banner](https://github.com/youth5201314/banner) å›¾ç‰‡è½®æ’­æ§ä»¶\n\nåŸºæœ¬å°±æ˜¯è¿™äº›äº†ï¼Œåº”è¯¥æ²¡æœ‰æ¼çš„ï¼Œæ’ä»¶çš„è¯¦ç»†ä½¿ç”¨ï¼Œè¯·è¿›å…¥å„æ’ä»¶çš„ GitHub ä¸»é¡µã€‚\n\nåœ¨æ­¤ï¼ŒæŠŠæˆ‘é¡¹ç›®çš„æ’ä»¶å¼•å…¥ä»£ç åŠç‰ˆæœ¬ç®¡ç†çš„ `gradle` ä»£ç è´´å‡ºæ¥ï¼Œå¦‚ä¸‹ï¼š\n\næ’ä»¶å¼•å…¥ä»£ç ï¼š\n\n```bash\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n\n    implementation rootProject.depsLibs.appcompat\n    implementation rootProject.depsLibs.legacy\n    implementation rootProject.depsLibs.recyclerview\n    implementation rootProject.depsLibs.constraintlayout\n    implementation rootProject.depsLibs.cardview\n\n    //tabæŒ‡ç¤ºå™¨\n    implementation rootProject.depsLibs.magicindicator\n    //æ²‰æµ¸å¼\n    implementation rootProject.depsLibs.immersionbar\n    //å¯¼èˆªæ \n    implementation rootProject.depsLibs.pagerBottomTabStrip\n    //rxjava\n    implementation rootProject.depsLibs.rxjava\n    //rxandroid\n    implementation rootProject.depsLibs.rxandroid\n    //view æ³¨å…¥\n    implementation rootProject.depsLibs.butterknife\n    //view æ³¨å…¥\n    annotationProcessor rootProject.depsLibs.butterknifeCompiler\n    //gson\n    implementation rootProject.depsLibs.gson\n    //banner\n    implementation rootProject.depsLibs.banner\n    //smartRefreshLayout ä¸Šä¸‹æ‹‰åˆ·æ–°\n    implementation rootProject.depsLibs.smartRefreshLayout\n    implementation rootProject.depsLibs.refreshHeader\n    implementation rootProject.depsLibs.refreshHeaderTwoLevel\n    implementation rootProject.depsLibs.refreshFooter\n    //eventbus\n    implementation rootProject.depsLibs.eventbus\n    //arouteråº“\n    implementation(rootProject.depsLibs.arouterapi) {\n        exclude group: 'com.android.support'\n    }\n    annotationProcessor rootProject.depsLibs.aroutercompiler\n\n    //å¼•å…¥homeæ¨¡å—\n    implementation project(':ft_home')\n    //å¼•å…¥å›¾ç‰‡åŠ è½½åº“\n    implementation project(':lib_image_loader')\n    //å¼•å…¥ç½‘ç»œåº“\n    implementation project(':lib_network')\n    //webview\n    implementation project(':lib_webview')\n    //å¼•å…¥åŸºç¡€uiåº“\n    implementation project(':lib_common_ui')\n    //baseåº“\n    implementation project(':lib_base')\n    //å¼•å…¥flutteræ¨¡å—\n    implementation project(':flutter')\n    //å¼•å…¥ç™¾åº¦AIè¯­éŸ³åº“\n    implementation project(':lib_asr')\n}\n```\n\nç‰ˆæœ¬ç®¡ç†ä»£ç  *(ç»Ÿä¸€ç®¡ç†ç‰ˆæœ¬å·)* : \n\n```bash\next {\n    android = [\n            compileSdkVersion: 29,\n            buildToolsVersion: \"29.0.0\",\n            minSdkVersion    : 19,\n            targetSdkVersion : 29,\n            applicationId    : 'net.lishaoy.android_ctrip',\n            versionCode      : 1,\n            versionName      : '1.0',\n            multiDexEnabled  : true,\n    ]\n\n    depsVersion = [\n            appcompat            : '1.1.0',\n            legacy               : '1.0.0',\n            recyclerview         : '1.0.0',\n            constraintlayout     : '1.1.3',\n            cardview             : '1.0.0',\n            magicindicator       : '1.5.0',\n            immersionbar         : '3.0.0',\n            pagerBottomTabStrip  : '2.3.0X',\n            glide                : '4.11.0',\n            glidecompiler        : '4.11.0',\n            butterknife          : '10.2.1',\n            butterknifeCompiler  : '10.2.1',\n            rxjava               : '3.0.0',\n            rxandroid            : '3.0.0',\n            okhttp               : '4.7.2',\n            okhttpLogging        : '4.7.2',\n            gson                 : '2.8.6',\n            banner               : '2.0.10',\n            smartRefreshLayout   : '2.0.1',\n            refreshHeader        : '2.0.1',\n            refreshFooter        : '2.0.1',\n            refreshHeaderTwoLevel: '2.0.1',\n            eventbus             : '3.2.0',\n            agentweb             : '4.1.3',\n            arouterapi           : '1.5.0',\n            aroutercompiler      : '1.2.2',\n\n    ]\n\n    depsLibs = [\n            appcompat            : \"androidx.appcompat:appcompat:${depsVersion.appcompat}\",\n            legacy               : \"androidx.legacy:legacy-support-v4:${depsVersion.legacy}\",\n            recyclerview         : \"androidx.recyclerview:recyclerview:${depsVersion.recyclerview}\",\n            constraintlayout     : \"androidx.constraintlayout:constraintlayout:${depsVersion.constraintlayout}\",\n            cardview             : \"androidx.cardview:cardview:${depsVersion.cardview}\",\n            magicindicator       : \"com.github.hackware1993:MagicIndicator:${depsVersion.magicindicator}\",\n            immersionbar         : \"com.gyf.immersionbar:immersionbar:${depsVersion.immersionbar}\",\n            pagerBottomTabStrip  : \"me.majiajie:pager-bottom-tab-strip:${depsVersion.pagerBottomTabStrip}\",\n            glide                : \"com.github.bumptech.glide:glide:${depsVersion.glide}\",\n            glidecompiler        : \"com.github.bumptech.glide:compiler:${depsVersion.glidecompiler}\",\n            butterknife          : \"com.jakewharton:butterknife:${depsVersion.butterknife}\",\n            butterknifeCompiler  : \"com.jakewharton:butterknife-compiler:${depsVersion.butterknifeCompiler}\",\n            rxjava               : \"io.reactivex.rxjava3:rxjava:${depsVersion.rxjava}\",\n            rxandroid            : \"io.reactivex.rxjava3:rxandroid:${depsVersion.rxandroid}\",\n            okhttp               : \"com.squareup.okhttp3:okhttp:${depsVersion.okhttp}\",\n            okhttpLogging        : \"com.squareup.okhttp3:logging-interceptor:${depsVersion.okhttpLogging}\",\n            gson                 : \"com.google.code.gson:gson:${depsVersion.gson}\",\n            banner               : \"com.youth.banner:banner:${depsVersion.banner}\",\n            smartRefreshLayout   : \"com.scwang.smart:refresh-layout-kernel:${depsVersion.smartRefreshLayout}\",\n            refreshHeader        : \"com.scwang.smart:refresh-header-classics:${depsVersion.refreshHeader}\",\n            refreshHeaderTwoLevel: \"com.scwang.smart:refresh-header-two-level:${depsVersion.refreshHeader}\",\n            refreshFooter        : \"com.scwang.smart:refresh-footer-classics:${depsVersion.refreshFooter}\",\n            eventbus             : \"org.greenrobot:eventbus:${depsVersion.eventbus}\",\n            agentweb             : \"com.just.agentweb:agentweb:${depsVersion.agentweb}\",\n            arouterapi           : \"com.alibaba:arouter-api:${depsVersion.arouterapi}\",\n            aroutercompiler      : \"com.alibaba:arouter-compiler:${depsVersion.aroutercompiler}\",\n    ]\n}\n```\n\n## é¡¹ç›®åŠŸèƒ½è¯¦ç»†æ¦‚è¿°ï¼ˆæ‰€ç”¨çŸ¥è¯†ç‚¹ï¼‰\n\nè¿™é‡Œä¸»è¦å¯¹é¦–é¡µåŠŸèƒ½åŠçŸ¥è¯†ç‚¹è¿›è¡Œæ¦‚è¿°ï¼Œç”±äºå…¶ä»–é¡µé¢æ˜¯å¼•å…¥äº†ä¹‹å‰çš„ Flutter é¡µé¢ï¼Œ å…·ä½“åŠŸèƒ½åœ¨ [Flutter 10å¤©é«˜ä»¿å¤§å‚AppåŠå°æŠ€å·§ç§¯ç´¯æ€»ç»“](https://h.lishaoy.net/flutterctrip) å·²ç»ä»‹ç»è¿‡äº†ï¼Œåœ¨è¿™å°±ä¸å†é˜è¿°ã€‚\n\né¦–é¡µé‡ç‚¹æ¦‚è¿°ä»¥ä¸‹åŠŸèƒ½çš„å®ç°ï¼š\n\n- ä¸‹æ‹‰åˆ·æ–°ã€æºç¨‹äºŒæ¥¼\n- æœç´¢appBar\n- æ¸å˜è‰²ç½‘æ ¼å¯¼èˆª\n- bannerç»„ä»¶\n- å¤šçŠ¶æ€çš„tabæŒ‡ç¤ºå™¨ *(æ»šåŠ¨å›ºå®šé¡¶éƒ¨)*\n\n### ä¸‹æ‹‰åˆ·æ–°ã€æºç¨‹äºŒæ¥¼\n\né¦–å…ˆï¼Œçœ‹çœ‹å…·ä½“çš„æ•ˆæœå›¾ï¼Œå¦‚å›¾ï¼š\n\n![no-shadow](https://cdn.lishaoy.net/ctrip/android/second_floor.gif \"second floor\" )\n\nä¸‹æ‹‰åˆ·æ–°å’Œæºç¨‹äºŒæ¥¼æ˜¯ä½¿ç”¨ [smartRefreshLayout](https://github.com/scwang90/SmartRefreshLayout) æ’ä»¶å®Œæˆçš„ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š\n\n```java\nprivate void initRefreshMore() {\n    homeHeader.setRefreshHeader(new ClassicsHeader(getContext()), -1, (int) Utils.dp2px(76)); //è®¾ç½®ä¸‹æ‹‰åˆ·æ–°åŠäºŒæ¥¼headerçš„é«˜åº¦\n    homeHeader.setFloorRate(1.6f); //è®¾ç½®äºŒæ¥¼è§¦å‘æ¯”ç‡\n    homeRefreshContainer.setPrimaryColorsId(R.color.colorPrimary, R.color.white); //è®¾ç½®ä¸‹æ‹‰åˆ·æ–°åŠäºŒæ¥¼æç¤ºæ–‡å­—é¢œè‰²\n    homeRefreshContainer.setOnMultiListener(new SimpleMultiListener() {\n        @Override\n        public void onLoadMore(@NonNull RefreshLayout refreshLayout) {\n            loadMore(refreshLayout); //åŠ è½½æ›´å¤š\n        }\n\n        @Override\n        public void onRefresh(@NonNull RefreshLayout refreshLayout) {\n            refreshLayout.finishRefresh(1600); //è®¾ç½®ä¸‹æ‹‰åˆ·æ–°å»¶è¿Ÿ\n        }\n\n        @Override\n        public void onHeaderMoving(RefreshHeader header, boolean isDragging, float percent, int offset, int headerHeight, int maxDragHeight) {\n            homeSecondFloorImg.setVisibility(View.VISIBLE);  //éšè—äºŒæ¥¼èƒŒæ™¯å›¾\n            homeSearchBarContainer.setAlpha(1 - Math.min(percent, 1)); //æ”¹å˜searchBaré€æ˜åº¦\n        }\n\n        @Override\n        public void onStateChanged(@NonNull RefreshLayout refreshLayout, @NonNull RefreshState oldState, @NonNull RefreshState newState) {\n            if (oldState == RefreshState.ReleaseToTwoLevel) {  //å³å°†å»å¾€äºŒæ¥¼çŠ¶æ€å¤„ç†\n                homeSecondFloorImg.setVisibility(View.GONE);\n                homeHeaderContent.animate().alpha(1).setDuration(666);\n            } else if (newState == RefreshState.PullDownCanceled) { //ä¸‹æ‹‰å–æ¶ˆçŠ¶æ€å¤„ç†\n                homeHeaderContent.animate().alpha(0).setDuration(666);\n            } else if (newState == RefreshState.Refreshing) { //æ­£åœ¨åˆ·æ–°çŠ¶æ€å¤„ç†\n                homeHeaderContent.animate().alpha(0).setDuration(666);\n            } else if (oldState == RefreshState.TwoLevelReleased) { // å‡†å¤‡å»å¾€äºŒæ¥¼å®ŒæˆçŠ¶æ€å¤„ç†ï¼Œè¿™é‡Œæ‰“å¼€webview\n                WebViewImpl.getInstance().gotoWebView(\"https://m.ctrip.com/webapp/you/tsnap/secondFloorIndex.html?isHideNavBar=YES&s_guid=feb780be-c55a-4f92-a6cd-2d81e04d3241\", true);\n                homeHeader.finishTwoLevel();\n            } else if (oldState == RefreshState.TwoLevel) { //åˆ°è¾¾äºŒæ¥¼çŠ¶æ€å¤„ç†\n                homeCustomScrollView.setVisibility(View.GONE);\n                homeHeaderContent.animate().alpha(0).setDuration(666);\n            } else if (oldState == RefreshState.TwoLevelFinish) { //äºŒæ¥¼å®ŒæˆçŠ¶æ€å¤„ç†\n                homeCustomScrollView.setVisibility(View.VISIBLE);\n                homeCustomScrollView.animate().alpha(1).setDuration(666);\n            }\n        }\n\n    });\n\n}\n```\n\n`XML` é¡µé¢å¸ƒå±€æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š\n\n```xml\n<com.scwang.smart.refresh.layout.SmartRefreshLayout\n    android:id=\"@+id/home_refresh_container\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:clipChildren=\"false\"\n    app:srlAccentColor=\"@color/colorPrimary\"\n    app:srlPrimaryColor=\"@color/colorPrimary\">\n    <com.scwang.smart.refresh.header.TwoLevelHeader\n        android:id=\"@+id/home_header\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:gravity=\"top\">\n\n        <ImageView\n            android:id=\"@+id/home_second_floor_img\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"460dp\"\n            android:layout_alignTop=\"@+id/home_header\"\n            android:scaleType=\"fitXY\"\n            android:src=\"@drawable/second_floor\"\n            android:visibility=\"gone\"/>\n        <FrameLayout\n            android:id=\"@+id/home_header_content\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:alpha=\"0\">\n            <ImageView\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"match_parent\"\n                android:scaleType=\"fitXY\"\n                android:src=\"@drawable/second_floor\" />\n        </FrameLayout>\n\n    </com.scwang.smart.refresh.header.TwoLevelHeader>\n    \n    ...\n\n    <com.scwang.smart.refresh.footer.ClassicsFooter\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\" />\n\n</com.scwang.smart.refresh.layout.SmartRefreshLayout>\n```\n\nå…·ä½“å®ç°è¯¦æƒ…ï¼Œå¯ç§»æ­¥ [GitHub](https://github.com/persilee/android_ctrip) æŸ¥çœ‹æºç ã€‚\n\n### æœç´¢appBar\n\næœç´¢æ çš„æ»šåŠ¨çš„ placeholder æ–‡å­—æ˜¯ä½¿ç”¨ [banner](https://github.com/youth5201314/banner) æ’ä»¶å®ç°çš„ï¼Œç‚¹å‡»æœç´¢æ¡†å¯è·³è½¬åˆ°æœç´¢é¡µé¢ *(flutterå†™çš„æœç´¢é¡µé¢)* ï¼Œè·³è½¬é¡µé¢åå¯ä»¥æŠŠ placeholder æ–‡å­—å¸¦åˆ° flutter æœç´¢é¡µé¢ã€‚\n\næ•ˆæœå¦‚å›¾ï¼š\n\n![no-shadow](https://cdn.lishaoy.net/ctrip/android/searchBar.gif \"search bar\" )\n\næ»šåŠ¨çš„placeholderæ–‡å­—å®ç°ä»£ç å¦‚ä¸‹ *(æœç´¢æ¡†çš„å®ç°å°±ä¸å†è¿™é‡Œå±•ç¤ºéƒ½æ˜¯ä¸€äº›XMLå¸ƒå±€ä»£ç )*ï¼š\n\n```java\n        homeSearchBarPlaceholder\n                .setAdapter(new HomeSearchBarPlaceHolderAdapter(homeData.getSearchPlaceHolderList())) // è®¾ç½®é€‚é…å™¨\n                .setOrientation(Banner.VERTICAL) // è®¾ç½®æ»šåŠ¨æ–¹å‘\n                .setDelayTime(3600) // è®¾ç½®é—´éš”æ—¶é—´\n                .setOnBannerListener(new OnBannerListener() {\n                    @Override\n                    public void OnBannerClick(Object data, int position) {  //ç‚¹å‡»æ‰“å¼€ flutter æœç´¢é¡µé¢\n                        ARouter.getInstance()\n                                .build(\"/home/search\")\n                                .withString(\"placeHolder\", ((Home.SearchPlaceHolderListBean) data).getText())\n                                .navigation();\n                    }\n                });\n    }\n```\n\nsearchBarçš„å…·ä½“åŠŸèƒ½ä¸è¿‡å¤šé˜è¿°ï¼Œå’Œä¹‹å‰çš„é¡¹ç›®ä¸€è‡´ã€‚\n\n### æ¸å˜è‰²ç½‘æ ¼å¯¼èˆª\n\næ¸å˜è‰²ç½‘æ ¼å¯¼èˆªåŸºæœ¬éƒ½æ˜¯ä¸€äº› `XML` é¡µé¢å¸ƒå±€ä»£ç ï¼Œåªæ˜¯æˆ‘æŠŠå®ƒå°è£…æˆäº†å•ç‹¬çš„ç»„ä»¶ï¼Œæ•ˆæœå¦‚å›¾\n\n<img src=\"https://cdn.lishaoy.net/ctrip/android/gridBar.png\" alt=\"GridNav\" width=\"36%\" title=\"GridNav\" align=\"center\">\n\nå°è£…ä¹‹åçš„å¼•å…¥å°±éå¸¸ç®€å•ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```xml\n<LinearLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:orientation=\"vertical\"\n    android:background=\"@color/white\">\n\n    <!-- ç½‘æ ¼å¯¼èˆª -->\n    <net.lishaoy.ft_home.GridNavView\n        android:id=\"@+id/home_grid_nav_container\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\" />\n\n    ...\n\n</LinearLayout>\n```\n\nå…·ä½“å®ç°è¯¦æƒ…ï¼Œå¯ç§»æ­¥ [GitHub](https://github.com/persilee/android_ctrip) æŸ¥çœ‹æºç ã€‚\n\n### bannerç»„ä»¶\n\nbannerç»„ä»¶ä¹Ÿæ˜¯ç”¨ [banner](https://github.com/youth5201314/banner) æ’ä»¶å®ç°çš„ï¼Œå¦‚å›¾\n\n![no-shadow](https://cdn.lishaoy.net/ctrip/android/banner.gif \"banner\")\n\nå®ç°ä»£ç å¦‚ä¸‹ï¼š\n\n```java\nprivate void initBanner() {\n    homeBanner.addBannerLifecycleObserver(this)\n            .setAdapter(new HomeBannerAdapter(homeData.getBannerList())) //è®¾ç½®é€‚é…å™¨\n            .setIndicator(new EllipseIndicator(getContext()))           //è®¾ç½®æŒ‡ç¤ºå™¨ï¼Œå¦‚å›¾çš„æŒ‡ç¤ºå™¨æ˜¯æˆ‘è‡ªå®šä¹‰çš„æ’ä»¶é‡Œå¹¶æ²¡æœ‰æä¾›\n            .setIndicatorSelectedColorRes(R.color.white)                //è®¾ç½®æŒ‡ç¤ºå™¨é¢œè‰²\n            .setIndicatorSpace((int) BannerUtils.dp2px(10))             //è®¾ç½®é—´è·\n            .setBannerRound(BannerUtils.dp2px(6));                      //è®¾ç½®åœ†è§’\n\n}\n```\n\n### å¤šçŠ¶æ€çš„tabæŒ‡ç¤ºå™¨\n\nå¤šçŠ¶æ€çš„tabæŒ‡ç¤ºå™¨çš„å®ç°éœ€è¦æ³¨æ„å¾ˆå¤šç»†èŠ‚ï¼Œå› ä¸ºå®ƒæ˜¯åœ¨é¦–é¡µçš„ `fragment` çš„ `ScrollView` é‡ŒåµŒå…¥ `viewPaper`ï¼Œé¦–å…ˆä½ ä¼šå‘ç° viewPaper ä¸æ˜¾ç¤ºçš„é—®é¢˜ï¼Œå…¶æ¬¡æ˜¯æ»šåŠ¨ä¸æµç•…çš„é—®é¢˜ï¼Œè¿™ä¸¤ä¸ªé—®é¢˜æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š\n\n- viewPaper ä¸æ˜¾ç¤ºçš„é—®é¢˜ï¼šä½¿ç”¨è‡ªå®šä¹‰çš„ `ViewPager` é‡å†™ `onMeasure` æ–¹æ³•ï¼Œé‡æ–°è®¡ç®—é«˜åº¦\n- æ»šåŠ¨ä¸æµç•…çš„é—®é¢˜ï¼šä½¿ç”¨è‡ªå®šä¹‰çš„ `ScrollView`ï¼Œé‡å†™ `computeScroll` å’Œ `onScrollChanged` é‡æ–°è·å–æ»šåŠ¨è·ç¦»\n\nå®ç°æ•ˆæœå¦‚å›¾ï¼š\n\n![no-shadow](https://cdn.lishaoy.net/ctrip/android/tab_bar.gif \"tab page\")\n\nè¿™ä¸ªåŠŸèƒ½å®ç°ä»£ç è¿‡å¤šä¸ä¾¿åœ¨è¿™é‡Œå±•ç¤ºï¼Œå…·ä½“å®ç°è¯¦æƒ…ï¼Œå¯ç§»æ­¥ [GitHub](https://github.com/persilee/android_ctrip) æŸ¥çœ‹æºç ã€‚\n\n## Android Flutter æ··åˆå¼€å‘\n\nè¿™ä¸ªé¡¹ç›®çš„å®ç°åªæœ‰é¦–é¡µæ˜¯ç”¨ Android åŸç”Ÿå®ç°ï¼Œå…¶ä»–çš„é¡µé¢å‡æ˜¯ Flutter å®ç°çš„ï¼Œä¹‹å‰ [çº¯Flutteré¡¹ç›®](https://h.lishaoy.net/flutterctrip)ã€‚\n\nAndroid å¼•å…¥ Flutter è¿›è¡Œæ··åˆå¼€å‘ï¼Œéœ€è¦ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤\n\n- å»ºç«‹ä¸€ä¸ªflutter module\n- ç¼–å†™flutterä»£ç  *(åˆ›å»º flutter è·¯ç”±)*\n- flutter å’Œ android ä¹‹é—´ç›¸äº’é€šä¿¡\n\nä¸‹é¢ä¾æ¬¡æ¦‚è¿°è¿™å‡ éƒ¨åˆ†æ˜¯å¦‚ä½•æ“ä½œå®ç°çš„ã€‚\n\n### å»ºç«‹ä¸€ä¸ªflutter module\n\nè¿™ä¸ªåº”è¯¥ä¸ç”¨è¿‡å¤šæè¿°ï¼ŒåŸºæœ¬æ“ä½œå¤§å®¶éƒ½ä¼š File --> New --> New Module å¦‚å›¾ï¼š\n\n![no-shadow](https://cdn.lishaoy.net/ctrip/android/flutter_module.png \"flutter module\")\n\næ–°å»ºå®Œæˆä¹‹åï¼Œandroid studio ä¼šè‡ªåŠ¨ç”Ÿæˆé…ç½®ä»£ç åˆ° gradle é…ç½®æ–‡ä»¶é‡Œï¼Œä¸”ç”Ÿæˆä¸€ä¸ª flutter çš„ library æ¨¡å—ã€‚\n\n{% note warning %} \n<i class=\"fa fa-fw fa-bell  faa-horizontal animated faa-slow\" style=\"color: #faab33;\"></i> **Tipsï¼š** <br \\>\næ–°å»ºçš„æ—¶å€™æœ€å¥½ flutter module å’Œ android é¡¹ç›®æ”¾åˆ°åŒçº§ç›®å½•ä¸‹ï¼›<br \\>\næ–°ç‰ˆçš„ android studio æ‰ä¼šè‡ªåŠ¨ç”Ÿæˆ gradle é…ç½®ä»£ç ï¼Œè€ç‰ˆæœ¬è²Œä¼¼éœ€è¦æ‰‹åŠ¨é…ç½®\n\n{% endnote %}\n\nå¦‚ï¼Œæ²¡æœ‰ç”Ÿæˆ gradle é…ç½®ä»£ç ï¼Œä½ éœ€è¦åœ¨æ ¹é¡¹ç›®çš„ `settings.gradle` æ–‡ä»¶é‡Œæ‰‹åŠ¨åŠ å…¥å¦‚ä¸‹é…ç½®ï¼š\n\n```java\nsetBinding(new Binding([gradle: this]))\nevaluate(new File(\n  settingsDir, //è®¾ç½®æ ¹è·¯å¾„ï¼Œæ ¹æ®å…·ä½“flutter moduleè·¯å¾„é…ç½®\n  'flutter_module/.android/include_flutter.groovy'\n))\n\ninclude ':flutter_module'\n```\n\nè¿˜éœ€åœ¨å®¿ä¸»å·¥ç¨‹ *(æ²¡æ”¹åçš„è¯éƒ½æ˜¯app)* çš„ `build.gradle` å¼•å…¥ flutterï¼Œ å¦‚ä¸‹ï¼š\n\n```java\ndependencies {\n    ...\n    //å¼•å…¥flutteræ¨¡å—\n    implementation project(':flutter')\n    ...\n}\n```\n\n### ç¼–å†™flutterä»£ç \n\nç¼–å†™flutterä»£ç ï¼Œåœ¨ flutter module é‡ŒæŒ‰ç…§æ­£å¸¸ flutter å¼€å‘æµç¨‹ç¼–å†™ flutter ä»£ç å³å¯ã€‚ *(æˆ‘é¡¹ç›®é‡Œçš„ flutter çš„ä»£ç æ˜¯ä¹‹å‰é¡¹ç›®éƒ½å†™å¥½çš„ï¼Œå¤åˆ¶è¿‡æ¥ï¼Œæ”¹æ”¹åŒ…çš„å¼•å…¥é—®é¢˜ï¼Œå°±å¯ä»¥è¿è¡Œäº†ã€‚)*\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œflutter æœ‰ä¸”åªæœ‰ä¸€ä¸ªå…¥å£ï¼Œå°±æ˜¯ `main()` å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¿™é‡Œå¤„ç†å¥½ flutter é¡µé¢çš„è·³è½¬é—®é¢˜ã€‚\n\nåœ¨ android ç«¯ï¼Œåˆ›å»º flutter é¡µé¢ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```java\n    Flutter.createView(getActivity(),getLifecycle(),\"destination\");\n```\n\n`Flutter.createView` éœ€è¦3ä¸ªå‚æ•° `activity` ã€`lifecycle` ã€`route` ï¼Œè¿™ä¸ª route å°±æ˜¯è¦ä¼ é€’åˆ° flutter ç«¯çš„ï¼Œå½“ç„¶ï¼Œå®ƒæ˜¯ String ç±»å‹çš„ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªç”±å‘æŒ¥ä¼ é€’æ™®é€šå­—ç¬¦ä¸²æˆ– json å­—ç¬¦ä¸²ç­‰ã€‚\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å…¶ä»–çš„æ–¹å¼åˆ›å»º flutter é¡µé¢ï¼Œå¦‚ï¼š `Flutter.createFragment()` ã€ `FlutterActivity.withNewEngine()`ã€ `FlutterFragment.createDefault()` ç­‰ã€‚\n\nå…·ä½“çš„ä½¿ç”¨ï¼Œå¯å‰å¾€ [Flutterå®˜æ–¹æ–‡æ¡£](https://flutter.dev/docs/development/add-to-app/android) æŸ¥é˜…ã€‚\n\né‚£ä¹ˆï¼Œflutter ç«¯å¦‚ä½•æ¥æ”¶è¿™ä¸ª route å‚æ•°ï¼Œæ˜¯é€šè¿‡ `window.defaultRouteName`ï¼Œæ­¤é¡¹ç›®é‡Œç®¡ç† flutter ç«¯è·¯ç”±ä»£ç å¦‚ä¸‹ï¼š\n\n```dart\nvoid main() => runApp(MyApp());\n\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp(\n      debugShowCheckedModeBanner: false,\n      title: 'Flutter model',\n      theme: ThemeData(\n        primarySwatch: Colors.blue,\n        fontFamily: 'PingFang',\n      ),\n      home: _widgetRoute(window.defaultRouteName), // é€šè¿‡ window.defaultRouteName æ¥æ”¶ android ç«¯ä¼ æ¥çš„å‚æ•°\n    );\n  }\n}\n\nWidget _widgetRoute(String defaultRouteName) {\n    Map<String, dynamic> params = convert.jsonDecode(defaultRouteName); //è§£æå‚æ•°\n    defaultRouteName = params['routeName'];\n    placeHolder = params['placeHolder'];\n\n    switch (defaultRouteName) { // æ ¹æ®å‚æ•°è¿”å›å¯¹åº”çš„é¡µé¢\n        ...\n        case 'destination/search':\n            return DestinationSearchPage(\n                hideLeft: false,\n        );\n        ...\n        default:\n            return Center(\n                child: Column(\n                mainAxisAlignment: MainAxisAlignment.center,\n                children: <Widget>[\n                    Text('not found $defaultRouteName',\n                        textDirection: TextDirection.ltr),\n                ],\n                ),\n            );\n    }\n}\n```\n\nå…¶å®ï¼Œflutter ç«¯æ¥æ”¶è¿™ä¸ª route å‚æ•°ï¼Œè¿˜æœ‰ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯é€šè¿‡ `onGenerateRoute`ï¼Œå®ƒæ˜¯ MaterialApp é‡Œçš„ä¸€ä¸ªæ–¹æ³•ã€‚\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```dart\nonGenerateRoute: (settings){ //é€šè¿‡ settings.name è·å–androidç«¯ä¼ æ¥çš„å‚æ•°\n    return _widgetRoute(settings.name);\n},\n```\n\n### flutter å’Œ android ä¹‹é—´ç›¸äº’é€šä¿¡\n\nflutter ç«¯å¯ä»¥è°ƒç”¨ android ç«¯çš„æ–¹æ³•åŠç›¸äº’ä¼ é€’æ•°æ®æ˜¯å¦‚ä½•å®ç°çš„ï¼Œflutter å®˜æ–¹æä¾›äº†3ä¸ªæ–¹æ³•å¯ä»¥å®ç°ï¼Œåˆ†åˆ«æ˜¯ï¼š\n\n- EventChannelï¼šå•å‘çš„æŒç»­é€šä¿¡ï¼Œå¦‚ï¼šç½‘ç»œå˜åŒ–ã€ä¼ æ„Ÿå™¨ç­‰ã€‚\n- MethodChannelï¼šä¸€æ¬¡æ€§é€šä¿¡ï¼Œä¸€èˆ¬é€‚ç”¨å¦‚æ–¹æ³•çš„è°ƒç”¨ã€‚\n- BasicMessageChannelï¼šæŒç»­çš„åŒå‘é€šä¿¡ã€‚\n\næ­¤é¡¹ç›®é‡Œé‡‡ç”¨äº† `MethodChannel` æ–¹æ³•è¿›è¡Œé€šä¿¡ï¼Œå¦‚ï¼šflutter ç«¯è°ƒç”¨ android ç«¯çš„AIæ™ºèƒ½è¯­éŸ³æ–¹æ³•ä»¥åŠ flutter æ‰“å¼€ android ç«¯é¡µé¢å°±æ˜¯ç”¨ `MethodChannel` å®ç°çš„ã€‚\n\nflutter ç«¯è°ƒç”¨ android ç«¯çš„AIæ™ºèƒ½è¯­éŸ³æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š\n\n```dart\nclass AsrManager {\n  static const MethodChannel _channel = const MethodChannel('lib_asr');\n  //å¼€å§‹å½•éŸ³\n  static Future<String> start({Map params}) async {\n    return await _channel.invokeMethod('start', params ?? {});\n  }\n  //åœæ­¢å½•éŸ³\n    ...\n  //å–æ¶ˆå½•éŸ³\n    ...\n  //é”€æ¯\n    ...\n}\n```\n\nflutter æ‰“å¼€ android ç«¯é¡µé¢ä»£ç å¦‚ä¸‹ï¼š\n\n```dart\nclass MethodChannelPlugin {\n\n  static const MethodChannel methodChannel = MethodChannel('MethodChannelPlugin');\n\n  static Future<void> gotoDestinationSearchPage() async {\n    try {\n      await methodChannel.invokeMethod('gotoDestinationSearchPage'); //gotoDestinationSearchPage å‚æ•°ä¼šä¼ åˆ°androidç«¯\n    } on PlatformException {\n      print('Failed go to gotoDestinationSearchPage');\n    }\n  }\n    ...\n}\n```\n\nandroid æ¥æ”¶ä¹Ÿæ˜¯é€šè¿‡ `MethodChannel` ï¼Œå…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š\n\n```java\npublic class MethodChannelPlugin implements MethodChannel.MethodCallHandler {\n\n    private static MethodChannel methodChannel;\n    private Activity activity;\n\n    private MethodChannelPlugin(Activity activity) {\n        this.activity = activity;\n    }\n\n    //è°ƒç”¨æ–¹é€šè¿‡ registerWith æ¥æ³¨å†Œflutteré¡µé¢\n    public static void registerWith(FlutterView flutterView) {\n        methodChannel = new MethodChannel(flutterView, \"MethodChannelPlugin\");\n        MethodChannelPlugin instance = new MethodChannelPlugin((Activity) flutterView.getContext());\n        methodChannel.setMethodCallHandler(instance);\n    }\n\n    @Override\n    public void onMethodCall(MethodCall methodCall, MethodChannel.Result result) {\n        if (methodCall.method.equals(\"gotoDestinationSearchPage\")) { // æ”¶åˆ°æ¶ˆæ¯è¿›è¡Œå…·ä½“æ“ä½œ\n            EventBus.getDefault().post(new GotoDestinationSearchPageEvent());\n            result.success(200);\n        } \n        ...\n        else {\n            result.notImplemented();\n        }\n    }\n}\n```\n\nandroid flutter æ··åˆå¼€å‘åŸºæœ¬å°±æ˜¯è¿™3ä¸ªæ­¥éª¤ï¼Œå…¶ä»–ä¸€äº›ç»†èŠ‚åŠå…·ä½“çš„æµç¨‹è¯·å‚è€ƒ [GitHub](https://github.com/persilee/android_ctrip) é¡¹ç›®æºç ã€‚","tags":["Dart"],"categories":["Java"]},{"title":"Flutter 10å¤©é«˜ä»¿å¤§å‚AppåŠå°æŠ€å·§ç§¯ç´¯æ€»ç»“","url":"%2FflutterCtrip.html","content":"\n{% li https://cdn.lishaoy.net/flutterCtrip/iOS-andorid.png, Flutter, Flutter %}\n\nä¹‹å‰ï¼Œä¹Ÿå†™è¿‡å‡ ç¯‡å…³äº `Flutter` çš„åšæ–‡ï¼Œæœ€è¿‘ï¼ŒåˆèŠ±äº†ä¸€äº›æ—¶é—´å­¦ä¹ ç ”ç©¶ `Flutter`ï¼Œå®Œæˆäº†é«˜ä»¿å¤§å‚ **App** é¡¹ç›® *(é¡¹ç›®ä½¿ç”¨çš„æ¥å£éƒ½æ˜¯æ¥è‡ªçº¿ä¸ŠçœŸå®AppæŠ“åŒ…è€Œæ¥ï¼Œå¯ä»¥åšåˆ°å’Œçº¿ä¸Šé¡¹ç›®ç›¸åŒçš„æ•ˆæœ)*ï¼Œä¹Ÿæ€»ç»“ç§¯ç´¯äº†ä¸€äº›å°æŠ€å·§å’ŒçŸ¥è¯†ç‚¹ï¼Œæ‰€ä»¥ï¼Œåœ¨è¿™é‡Œè®°å½•åˆ†äº«å‡ºæ¥ï¼Œä¹Ÿå¸Œæœ› `Flutter` ç”Ÿæ€è¶Šæ¥è¶Šå¥½ *ï¼ˆflutterå¼€å‘Appæ•ˆç‡çœŸçš„å¾ˆé«˜ï¼Œå¼€å‘ä½“éªŒä¹Ÿæ˜¯å¾ˆå¥½çš„ ğŸ™‚ï¼‰*ã€‚\n\n<hr />\n\n<!-- more -->\n\nä»¥ä¸‹åšæ–‡ä¼šåˆ†ä¸º4ä¸ªéƒ¨åˆ†æ¦‚è¿°ï¼š\n- é¡¹ç›®å®Œæˆçš„åŠŸèƒ½é¢„è§ˆ\n- é¡¹ç›®ç»“æ„åˆ†æ\n- é¡¹ç›®åŠŸèƒ½è¯¦ç»†æ¦‚è¿°ï¼ˆæ‰€ç”¨çŸ¥è¯†ç‚¹ï¼‰\n- å°æŠ€å·§ç§¯ç´¯æ€»ç»“\n\n## é¡¹ç›®å®Œæˆçš„åŠŸèƒ½é¢„è§ˆ\n\né¦–å…ˆï¼Œæˆ‘ä»¬æ¥é€šè¿‡ä¸€ä¸ªè§†é¢‘æ¥å¿«é€Ÿé¢„è§ˆä¸‹é¡¹ç›®å®Œæˆçš„åŠŸèƒ½å’Œè¿è¡Œæ•ˆæœï¼Œå¦‚ä¸‹\n\n<video id=\"flutter\" class=\"video-js vjs-default-skin\" controls preload=\"auto\" poster=\"https://cdn.lishaoy.net/ctrip/ctripV.png\"\n    data-setup=\"{'example_option':true}\">\n    <source src=\"https://cdn.lishaoy.net/flutterCtrip/ctrip.mp4\" type='video/mp4' />\n</video>\n\n{% note warning %} \n<i class=\"fa fa-fw fa-bell  faa-horizontal animated faa-slow\" style=\"color: #faab33;\"></i> å¦‚è§†é¢‘æ’­æ”¾å¤±è´¥ï¼Œ [è¯·ç§»æ­¥è¿™é‡Œç‚¹å‡»è§‚çœ‹](https://www.bilibili.com/video/BV16p4y1Q71f/) ï¼ˆå¯ç‚¹å‡»é½¿è½®è®¾ç½®éšè—é»‘è¾¹ï¼‰\n{% endnote %}\n\n<br />\nå¤§å®¶çœ‹å®Œè§†é¢‘ï¼Œå¤§æ¦‚äº†è§£åˆ°ï¼Œå®Œæˆåº¦åŸºæœ¬å¯ä»¥å’Œçº¿ä¸Šçš„ **App** ç›¸å·®æ— å¼‚äº†ï¼Œå¤§å®¶å¦‚æœå¯¹é¡¹ç›®æ„Ÿå…´è¶£ï¼Œæƒ³äº†è§£å…·ä½“æ€ä¹ˆå®ç°çš„ï¼Œå¯ä»¥å»æˆ‘çš„ [GitHub](https://github.com/persilee) clone æºç æŸ¥çœ‹ã€‚\n\nä¹Ÿå¯æ‰«æï¼Œå®‰è£…ä½“éªŒï¼š\n\n<div style=\"width:166px; margin:auto\">![no-shadow](https://www.pgyer.com/app/qrcode/HqqH \"æ‰‹æœºæ‰«æäºŒç»´ç å®‰è£…\")</div>\n\næœ¬è§†é¢‘æ˜¯ç”¨çœŸæœºå½•å±çš„ï¼Œå› ä¸ºï¼Œè¯­éŸ³æœç´¢åŠŸèƒ½éœ€è¦å½•éŸ³ï¼Œæ¨¡æ‹Ÿå™¨æ— æ³•å½•éŸ³ï¼Œå½“ç„¶, `iOS` å’Œ `Andorid`éƒ½å¯ä»¥è¿è¡Œï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œå¦‚å›¾ï¼š\n\n![no-shadow](https://cdn.lishaoy.net/flutterCtrip/iOS-andorid.png \"iOS Andorid\")\n\n## é¡¹ç›®ç»“æ„åˆ†æ\n\nå…¶æ¬¡ï¼Œæ¢³ç†ä¸‹é¡¹ç›®çš„ç›®å½•ç»“æ„ï¼Œç†è§£æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯å¹²ä»€ä¹ˆçš„ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸€çº§ç›®å½•ï¼Œå¦‚ä¸‹ï¼š\n\n```bash\nâ”œâ”€â”€ README.md  # æè¿°æ–‡ä»¶\nâ”œâ”€â”€ android    # android å®¿ä¸»ç¯å¢ƒ\nâ”œâ”€â”€ build      # é¡¹ç›®æ„å»ºç›®å½•ï¼Œç”±flutterè‡ªåŠ¨å®Œæˆ\nâ”œâ”€â”€ flutter_ctrip.iml\nâ”œâ”€â”€ fonts      # è‡ªå·±åˆ›å»ºçš„ç›®å½•ï¼Œç”¨äºå­˜æ”¾å­—ä½“\nâ”œâ”€â”€ images     # è‡ªå·±åˆ›å»ºçš„ç›®å½•ï¼Œç”¨äºå­˜æ”¾å›¾ç‰‡\nâ”œâ”€â”€ ios        # iOS å®¿ä¸»ç¯å¢ƒ\nâ”œâ”€â”€ lib        # flutter æ‰§è¡Œæ–‡ä»¶ï¼Œè‡ªå·±å†™çš„ä»£ç éƒ½åœ¨è¿™\nâ”œâ”€â”€ pubspec.lock # ç”¨æ¥è®°å½•é”å®šæ’ä»¶ç‰ˆæœ¬\nâ”œâ”€â”€ pubspec.yaml # æ’ä»¶åŠèµ„æºé…ç½®æ–‡ä»¶\nâ””â”€â”€ test       # æµ‹è¯•ç›®å½•\n```\n\nè¿™ä¸ªå°±ä¸ç”¨å¤šè§£é‡Šï¼Œå¤§å¤šæ˜¯ flutter ç”ŸæˆåŠç®¡ç†çš„ï¼Œæˆ‘ä»¬éœ€è¦å…³æ³¨çš„æ˜¯ **lib** ç›®å½•ã€‚\n\næˆ‘ä»¬å†æ¥çœ‹çœ‹äºŒçº§ç›®å½•ï¼Œå¦‚ä¸‹ *(é‡ç‚¹å…³æ³¨ä¸‹libç›®å½•)*\n\n```bash\nâ”œâ”€â”€ README.md\nâ”œâ”€â”€ android\nâ”‚Â Â  â”œâ”€â”€ android.iml\n  ...\nâ”‚Â Â  â””â”€â”€ settings.gradle\nâ”œâ”€â”€ build\nâ”‚Â Â  â”œâ”€â”€ app\n  ...\nâ”‚Â Â  â””â”€â”€ snapshot_blob.bin.d.fingerprint\nâ”œâ”€â”€ flutter_ctrip.iml\nâ”œâ”€â”€ fonts\nâ”‚Â Â  â”œâ”€â”€ PingFang-Italic.ttf\nâ”‚Â Â  â”œâ”€â”€ PingFang-Regular.ttf\nâ”‚Â Â  â””â”€â”€ PingFang_Bold.ttf\nâ”œâ”€â”€ images\nâ”‚Â Â  â”œâ”€â”€ grid-nav-items-dingzhi.png\n  ...\nâ”‚Â Â  â””â”€â”€ yuyin.png\nâ”œâ”€â”€ ios\nâ”‚Â Â  â”œâ”€â”€ Flutter\n  ...\nâ”‚Â Â  â””â”€â”€ ServiceDefinitions.json\nâ”œâ”€â”€ lib\nâ”‚Â Â  â”œâ”€â”€ dao           # è¯·æ±‚æ¥å£çš„ç±»\nâ”‚Â Â  â”œâ”€â”€ main.dart     # flutter å…¥å£æ–‡ä»¶\nâ”‚Â Â  â”œâ”€â”€ model         # å®ä½“ç±»ï¼ŒæŠŠæœåŠ¡å™¨è¿”å›çš„ json æ•°æ®ï¼Œè½¬æ¢æˆ dart ç±»\nâ”‚Â Â  â”œâ”€â”€ navigator     # bottom bar é¦–é¡µåº•éƒ¨å¯¼èˆªè·¯ç”±\nâ”‚Â Â  â”œâ”€â”€ pages         # æ‰€ä»¥çš„é¡µé¢\nâ”‚Â Â  â”œâ”€â”€ plugin        # å°è£…çš„æ’ä»¶\nâ”‚Â Â  â”œâ”€â”€ util          # å·¥å…·ç±»ï¼Œé¿å…é‡å¤ä»£ç ï¼Œå°è£…æˆå·¥å…·ç±»ä»¥ä¾¿å„ä¸ª page è°ƒç”¨\nâ”‚Â Â  â””â”€â”€ widget        # å°è£…çš„ç»„ä»¶\nâ”œâ”€â”€ pubspec.lock\nâ”œâ”€â”€ pubspec.yaml\nâ””â”€â”€ test\n    â””â”€â”€ widget_test.dart\n```\n\nå†æ¥çœ‹çœ‹ï¼Œ**lib** ç›®å½•ä¸‹äºŒçº§ç›®å½•ï¼Œçœ‹çœ‹æ•´ä¸ªé¡¹ç›®åˆ›å»ºäº†å¤šå°‘ä¸ªæ–‡ä»¶ï¼Œå†™äº†å¤šå°‘ä»£ç ï¼Œå¦‚ä¸‹ *ï¼ˆå…¶å®ï¼Œå¹¶ä¸æ˜¯å¾ˆå¤šï¼‰*\n\n```bash\nâ”œâ”€â”€ dao/\nâ”‚Â Â  â”œâ”€â”€ destination_dao.dart*\nâ”‚Â Â  â”œâ”€â”€ destination_search_dao.dart*\nâ”‚Â Â  â”œâ”€â”€ home_dao.dart\nâ”‚Â Â  â”œâ”€â”€ search_dao.dart*\nâ”‚Â Â  â”œâ”€â”€ trave_hot_keyword_dao.dart*\nâ”‚Â Â  â”œâ”€â”€ trave_search_dao.dart*\nâ”‚Â Â  â”œâ”€â”€ trave_search_hot_dao.dart*\nâ”‚Â Â  â”œâ”€â”€ travel_dao.dart*\nâ”‚Â Â  â”œâ”€â”€ travel_params_dao.dart*\nâ”‚Â Â  â””â”€â”€ travel_tab_dao.dart*\nâ”œâ”€â”€ main.dart\nâ”œâ”€â”€ model/\nâ”‚Â Â  â”œâ”€â”€ common_model.dart\nâ”‚Â Â  â”œâ”€â”€ config_model.dart\nâ”‚Â Â  â”œâ”€â”€ destination_model.dart\nâ”‚Â Â  â”œâ”€â”€ destination_search_model.dart\nâ”‚Â Â  â”œâ”€â”€ grid_nav_model.dart\nâ”‚Â Â  â”œâ”€â”€ home_model.dart\nâ”‚Â Â  â”œâ”€â”€ sales_box_model.dart\nâ”‚Â Â  â”œâ”€â”€ seach_model.dart*\nâ”‚Â Â  â”œâ”€â”€ travel_hot_keyword_model.dart\nâ”‚Â Â  â”œâ”€â”€ travel_model.dart*\nâ”‚Â Â  â”œâ”€â”€ travel_params_model.dart*\nâ”‚Â Â  â”œâ”€â”€ travel_search_hot_model.dart\nâ”‚Â Â  â”œâ”€â”€ travel_search_model.dart\nâ”‚Â Â  â””â”€â”€ travel_tab_model.dart\nâ”œâ”€â”€ navigator/\nâ”‚Â Â  â””â”€â”€ tab_navigater.dart\nâ”œâ”€â”€ pages/\nâ”‚Â Â  â”œâ”€â”€ destination_page.dart\nâ”‚Â Â  â”œâ”€â”€ destination_search_page.dart\nâ”‚Â Â  â”œâ”€â”€ home_page.dart\nâ”‚Â Â  â”œâ”€â”€ my_page.dart\nâ”‚Â Â  â”œâ”€â”€ search_page.dart\nâ”‚Â Â  â”œâ”€â”€ speak_page.dart*\nâ”‚Â Â  â”œâ”€â”€ test_page.dart\nâ”‚Â Â  â”œâ”€â”€ travel_page.dart\nâ”‚Â Â  â”œâ”€â”€ travel_search_page.dart\nâ”‚Â Â  â””â”€â”€ travel_tab_page.dart*\nâ”œâ”€â”€ plugin/\nâ”‚Â Â  â”œâ”€â”€ asr_manager.dart*\nâ”‚Â Â  â”œâ”€â”€ side_page_view.dart\nâ”‚Â Â  â”œâ”€â”€ square_swiper_pagination.dart\nâ”‚Â Â  â””â”€â”€ vertical_tab_view.dart\nâ”œâ”€â”€ util/\nâ”‚Â Â  â””â”€â”€ navigator_util.dart*\nâ””â”€â”€ widget/\n    â”œâ”€â”€ grid_nav.dart\n    â”œâ”€â”€ grid_nav_new.dart\n    â”œâ”€â”€ loading_container.dart\n    â”œâ”€â”€ local_nav.dart\n    â”œâ”€â”€ sales_box.dart\n    â”œâ”€â”€ scalable_box.dart\n    â”œâ”€â”€ search_bar.dart*\n    â”œâ”€â”€ sub_nav.dart\n    â””â”€â”€ webview.dart\n```\n\næ•´ä¸ªé¡¹ç›®å°±æ˜¯ä»¥ä¸Šè¿™äº›æ–‡ä»¶äº† *ï¼ˆå…·ä½“çš„å°±ä¸ä¸€ä¸ªä¸€ä¸ªåˆ†æäº†ï¼Œå¦‚ï¼Œæ„Ÿå…´è¶£ï¼Œå¤§å®¶å¯ä»¥ clone æºç è¿è¡Œèµ·æ¥ï¼Œè‡ªç„¶å°±æ¸…é™¤äº†ï¼‰*ã€‚\n\n## é¡¹ç›®åŠŸèƒ½è¯¦ç»†æ¦‚è¿°ï¼ˆæ‰€ç”¨çŸ¥è¯†ç‚¹ï¼‰\n\né¦–å…ˆï¼Œæ¥çœ‹çœ‹é¦–é¡µåŠŸèƒ½åŠæ‰€ç”¨çŸ¥è¯†ç‚¹ï¼Œé¦–é¡µé‡ç‚¹çœ‹ä¸‹ä»¥ä¸‹åŠŸèƒ½å®ç°ï¼š\n\n- æ¸éšæ¸ç°çš„ **appBar** \n- æœç´¢ç»„ä»¶çš„å°è£…\n- è¯­éŸ³æœç´¢é¡µé¢\n- bannerç»„ä»¶\n- æµ®åŠ¨çš„ icon å¯¼èˆª\n- æ¸å˜ä¸è§„åˆ™å¸¦æœ‰èƒŒæ™¯å›¾çš„ç½‘æ ¼å¯¼èˆª\n\n### æ¸éšæ¸ç°çš„ appBar\n\nå…ˆæ¥çœ‹çœ‹å…·ä½“æ•ˆæœï¼Œä¸€ç¹èŠ³å®¹ï¼Œå¦‚å›¾ï¼š\n\n<div style=\"width:36%; margin:auto\">![no-shadow](https://cdn.lishaoy.net/flutterCtrip/appBar.gif \"appBar\" )</div>\n\næ»šåŠ¨çš„æ—¶å€™ **appBar** èƒŒæ™¯è‰²ä»é€æ˜å˜æˆç™½è‰²æˆ–ç™½è‰²å˜æˆé€æ˜ï¼Œè¿™é‡Œä¸»è¦ç”¨äº† **flutter** çš„ `NotificationListener` ç»„ä»¶ï¼Œå®ƒä¼šå»ç›‘å¬ç»„ä»¶æ ‘å†’æ³¡äº‹ä»¶ï¼Œå½“è¢«å®ƒåŒ…è£¹çš„çš„ç»„ä»¶*ï¼ˆå­ç»„ä»¶ï¼‰* å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ`Notification` å›è°ƒå‡½æ•°ä¼šè¢«è§¦å‘ï¼Œæ‰€ä»¥ï¼Œé€šè¿‡å®ƒå¯ä»¥å»ç›‘å¬é¡µé¢çš„æ»šåŠ¨ï¼Œæ¥åŠ¨æ€æ”¹å˜ **appBar** çš„é€æ˜åº¦*ï¼ˆalphaï¼‰*ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```dart\nNotificationListener(\n  onNotification: (scrollNotification) {\n    if (scrollNotification is ScrollUpdateNotification &&\n        scrollNotification.depth == 0) {\n      _onScroll(scrollNotification.metrics.pixels);\n    }\n    return true;\n  },\n  child: ...\n```\n\n{% note warning %} \n<i class=\"fa fa-fw fa-bell  faa-horizontal animated faa-slow\" style=\"color: #faab33;\"></i> **Tipsï¼š** \n{% label danger@scrollNotification.depth %}çš„å€¼ 0 è¡¨ç¤ºå…¶å­ç»„ä»¶*(åªç›‘å¬å­ç»„ä»¶ï¼Œä¸ç›‘å¬å­™ç»„ä»¶)*ï¼›\n{% label danger@scrollNotification is ScrollUpdateNotification %}æ¥åˆ¤æ–­ç»„ä»¶æ˜¯å¦å·²æ›´æ–°ï¼Œ**ScrollUpdateNotification** æ˜¯ notifications çš„ç”Ÿå‘½å‘¨æœŸä¸€ç§æƒ…å†µï¼Œåˆ†åˆ«æœ‰ä¸€ä¸‹å‡ ç§ï¼š\n- ScrollStartNotification ç»„ä»¶å¼€å§‹æ»šåŠ¨\n- ScrollUpdateNotification ç»„ä»¶ä½ç½®å·²ç»å‘ç”Ÿæ”¹å˜\n- ScrollEndNotification ç»„ä»¶åœæ­¢æ»šåŠ¨\n- UserScrollNotification ä¸æ¸…æ¥š\n\nè¿™é‡Œï¼Œæˆ‘ä»¬ä¸æ¢ç©¶å¤ªæ·±å…¥ï¼Œå¦‚æƒ³äº†è§£å¯å¤šæŸ¥çœ‹æºç ã€‚\n\n{% endnote %} \n\n**_onScroll** æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š\n\n```dart\n  void _onScroll(offset) {\n    double alpha = offset / APPBAR_SCROLL_OFFSET;  // APPBAR_SCROLL_OFFSET å¸¸é‡ï¼Œå€¼ï¼š100ï¼›offset æ»šåŠ¨çš„è·ç¦»\n\n    //æŠŠ alpha å€¼æ§åˆ¶å€¼ 0-1 ä¹‹é—´\n    if (alpha < 0) {\n      alpha = 0;\n    } else if (alpha > 1) {\n      alpha = 1;\n    }\n    setState(() {\n      appBarAlpha = alpha;\n    });\n    print(alpha);\n  }\n```\n\n### æœç´¢ç»„ä»¶çš„å°è£…\n\næœç´¢ç»„ä»¶æ•ˆæœå¦‚å›¾ï¼š\n\n<div style=\"width:36%; margin:auto\">![no-shadow](https://cdn.lishaoy.net/flutterCtrip/searchBar.gif \"searchBar\" )</div>\n\nä»¥ä¸‹æ˜¯é¦–é¡µè°ƒç”¨ `searchBar` çš„ä»£ç ï¼š\n\n```dart\nSearchBar(\n  searchBarType: appBarAlpha > 0.2  //searchBar çš„ç±»ï¼šæš—è‰²ã€äº®è‰²\n      ? SearchBarType.homeLight\n      : SearchBarType.home,\n  inputBoxClick: _jumpToSearch,     //ç‚¹å‡»å›è°ƒå‡½æ•°\n  defaultText: SEARCH_BAR_DEFAULT_TEXT,   // æç¤ºæ–‡å­—\n  leftButtonClick: () {},           //å·¦è¾¹è¾¹æŒ‰é’®ç‚¹å‡»å›è°ƒå‡½æ•°\n  speakClick: _jumpToSpeak,         //ç‚¹å‡»è¯ç­’å›è°ƒå‡½æ•°\n  rightButtonClick: _jumpToUser,    //å³è¾¹è¾¹æŒ‰é’®ç‚¹å‡»å›è°ƒå‡½æ•°\n),\n```\nå…¶å®å°±æ˜¯ç”¨ `TextField` ç»„ä»¶ï¼Œå†åŠ ä¸€äº›æ ·å¼ï¼Œéœ€è¦æ³¨æ„ç‚¹æ˜¯ï¼š**onChanged**ï¼Œä»–æ˜¯ **TextField** ç”¨æ¥ç›‘å¬æ–‡æœ¬æ¡†æ˜¯å¦å˜åŒ–ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬æ¥ç›‘å¬ç”¨æˆ·è¾“å…¥ï¼Œæ¥è¯·æ±‚æ¥å£æ•°æ®;\nå…·ä½“çš„å®ç°ç»†èŠ‚ï¼Œè¯·æŸ¥é˜…æºç ï¼š [ç‚¹å‡»æŸ¥çœ‹searchBaræºç ](https://github.com/persilee/flutter_ctrip/blob/master/lib/widget/search_bar.dart)\n\n### è¯­éŸ³æœç´¢é¡µé¢\n\nè¯­éŸ³æœç´¢é¡µé¢æ•ˆæœå¦‚å›¾ï¼šç”±äºæ¨¡æ‹Ÿå™¨æ— æ³•å½•éŸ³ï¼Œæ‰€ä»¥æ— æ³•å±•ç¤ºæ­£å¸¸æµç¨‹ï¼Œå¦‚æœå½•éŸ³è¯†åˆ«æˆåŠŸåä¼šè¿”å›æœç´¢é¡µé¢ï¼Œåœ¨é¡¹ç›®é¢„è§ˆè§†é¢‘ä¸­å¯ä»¥çœ‹åˆ°æ­£å¸¸æµç¨‹ã€‚\n\n<div style=\"width:36%; margin:auto\">![no-shadow](https://cdn.lishaoy.net/flutterCtrip/speak.gif \"speak\" )</div>\n\nè¯­éŸ³æœç´¢åŠŸèƒ½ä½¿ç”¨çš„æ˜¯ç™¾åº¦çš„è¯­è¨€è¯†åˆ«SDKï¼ŒåŸç”Ÿæ¥å…¥ä¹‹åï¼Œé€šè¿‡ **MethodChannel** å’ŒåŸç”ŸNativeç«¯é€šä¿¡ï¼Œè¿™é‡Œä¸åšé‡ç‚¹è®²è¿°ï¼ˆè¿™é‡Œä¼šæ¶‰åŠåŸç”ŸNativeçš„çŸ¥è¯†ï¼‰ã€‚\n\né‡ç‚¹çœ‹çœ‹ç‚¹å‡»å½•éŸ³æŒ‰é’®æ—¶çš„åŠ¨ç”»å®ç°ï¼Œè¿™ä¸ªåŠ¨ç”»ç”¨äº† **AnimatedWidget** å®ç°çš„ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```dart\nclass AnimatedWear extends AnimatedWidget {\n  final bool isStart;\n  static final _opacityTween = Tween<double>(begin: 0.5, end: 0); // è®¾ç½®é€æ˜åº¦å˜åŒ–å€¼\n  static final _sizeTween = Tween<double>(begin: 90, end: 260);   // è®¾ç½®åœ†å½¢çº¿çš„æ‰©æ•£å€¼\n\n  AnimatedWear({Key key, this.isStart, Animation<double> animation})\n      : super(key: key, listenable: animation);\n\n  @override\n  Widget build(BuildContext context) {\n    final Animation<double> animation = listenable;  // listenable ç»§æ‰¿ AnimatedWidgetï¼Œå…¶å®å°±æ˜¯æ§åˆ¶å™¨ï¼Œä¼šè‡ªåŠ¨ç›‘å¬ç»„ä»¶çš„å˜åŒ–\n    return Container(\n      height: 90,\n      width: 90,\n      child: Stack(\n        overflow: Overflow.visible,\n        alignment: Alignment.center,\n        children: <Widget>[\n          ...\n          // æ‰©æ•£çš„åœ†çº¿ï¼Œå…¶å®å°±æ˜¯ç”¨ä¸€ä¸ªåœ†å®ç°çš„ï¼Œè®¾ç½®åœ†ä¸ºé€æ˜ï¼Œè®¾ç½®border\n          Positioned(\n            left: -((_sizeTween.evaluate(animation) - 90) / 2), // æ ¹æ® _sizeTween åŠ¨æ€è®¾ç½®leftåç§»å€¼\n            top: -((_sizeTween.evaluate(animation) - 90) / 2), //  æ ¹æ® _sizeTween åŠ¨æ€è®¾ç½®topåç§»å€¼\n            child: Opacity(\n              opacity: _opacityTween.evaluate(animation),      // æ ¹æ® _opacityTween åŠ¨æ€è®¾ç½®é€æ˜å€¼\n              child: Container(\n                width: isStart ? _sizeTween.evaluate(animation) : 0, // è®¾ç½® å®½\n                height: _sizeTween.evaluate(animation),              // è®¾ç½® é«˜\n                decoration: BoxDecoration(\n                    color: Colors.transparent,\n                    borderRadius: BorderRadius.circular(\n                        _sizeTween.evaluate(animation) / 2),\n                    border: Border.all(\n                      color: Color(0xa8000000),\n                    )),\n              ),\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n}\n```\n\nå…¶ä»–ç»†èŠ‚ï¼Œå¦‚ï¼šç‚¹å‡»æ—¶æç¤ºå½•éŸ³ï¼Œå½•éŸ³å¤±è´¥æç¤ºï¼Œç‚¹å‡»å½•éŸ³æŒ‰é’®å‡ºç°åŠé€æ˜é»‘è‰²åœ†è¾¹æ¡†ï¼Œåœæ­¢åæ¶ˆå¤±ç­‰ï¼Œ[è¯·æŸ¥çœ‹æºç ](https://github.com/persilee/flutter_ctrip/blob/master/lib/pages/speak_page.dart)ã€‚\n\n\n\n### bannerç»„ä»¶\n\næ•ˆæœå¦‚å›¾ï¼š\n\n<div style=\"width:36%; margin:auto\">![no-shadow](https://cdn.lishaoy.net/flutterCtrip/banner.gif \"banner\" )</div>\n\n`banner`ä½¿ç”¨çš„æ˜¯flutterçš„ [flutter_swiper](https://pub.dev/packages/flutter_swiper) æ’ä»¶å®ç°çš„ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```dart\nSwiper(\n  itemCount: bannerList.length,              // æ»šåŠ¨å›¾ç‰‡çš„æ•°é‡\n  autoplay: true,                            // è‡ªåŠ¨æ’­æ”¾\n  pagination: SwiperPagination(              // æŒ‡ç¤ºå™¨\n      builder: SquareSwiperPagination(\n        size: 6,                             // æŒ‡ç¤ºå™¨çš„å¤§å°\n        activeSize: 6,                       // æ¿€æ´»çŠ¶æ€æŒ‡ç¤ºå™¨çš„å¤§å°\n        color: Colors.white.withAlpha(80),   // é¢œè‰²\n        activeColor: Colors.white,           // æ¿€æ´»çŠ¶æ€çš„é¢œè‰²\n      ),\n    alignment: Alignment.bottomRight,        // å¯¹é½æ–¹å¼\n    margin: EdgeInsets.fromLTRB(0, 0, 14, 28), // è¾¹è·\n  ),\n  itemBuilder: (BuildContext context, int index) { // æ„é€ å™¨\n    return GestureDetector(\n      onTap: () {\n        CommonModel model = bannerList[index];\n        Navigator.push(\n          context,\n          MaterialPageRoute(\n            builder: (context) => WebView(\n              url: model.url,\n            ),\n          ),\n        );\n      },\n      child: Image.network(\n        bannerList[index].icon,\n        fit: BoxFit.fill,\n      ),\n    );\n  },\n),\n```\n\nå…·ä½“ä½¿ç”¨æ–¹æ³•ï¼Œå¯ä»¥å» flutterçš„å®˜æ–¹æ’ä»¶åº“ [pub.dev](https://pub.dev/) æŸ¥çœ‹ï¼š[ç‚¹å‡»flutter_swiperæŸ¥çœ‹](https://pub.dev/packages/flutter_swiper)ã€‚\n{% note warning %} \n<i class=\"fa fa-fw fa-bell  faa-horizontal animated faa-slow\" style=\"color: #faab33;\"></i> **Tipsï¼š** \néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ç¨æ”¹é€ äº†ä¸€ä¸‹æŒ‡ç¤ºå™¨çš„æ ·å¼ï¼Œ`flutter_swiper` åªæä¾›äº† 3 ç§æŒ‡ç¤ºå™¨æ ·å¼ï¼Œå¦‚ä¸‹ï¼š\n- dots = const DotSwiperPaginationBuilder()ï¼Œåœ†å½¢\n- fraction = const FractionPaginationBuilder()ï¼Œç™¾åˆ†æ•°ç±»å‹çš„,å¦‚ï¼š1/6ï¼Œè¡¨ç¤º6é¡µçš„ç¬¬ä¸€é¡µ\n- rect = const RectSwiperPaginationBuilder()ï¼ŒçŸ©å½¢\n\nå¹¶æ²¡æœ‰ä¸Šå›¾çš„æ¿€æ´»çŠ¶æ€çš„é•¿æ¤­åœ†å½¢ï¼Œå…¶å®å°±æ˜¯æŒ‰è‘«èŠ¦ç”»ç“¢ï¼Œè‡ªå·±å®ç°ä¸€ä¸ªé•¿æ¤­åœ†ç±»å‹ï¼Œå¦‚çŸ¥è¯¦æƒ…ï¼Œå¯[ç‚¹å‡»æŸ¥çœ‹é•¿æ¤­åœ†å½¢æŒ‡ç¤ºå™¨æºç ](https://github.com/persilee/flutter_ctrip/blob/master/lib/plugin/square_swiper_pagination.dart)\n{% endnote %} \n\n### æµ®åŠ¨çš„ icon å¯¼èˆª\n\n**iconå¯¼èˆª**æ•ˆæœå¦‚å›¾ï¼š\n\n<img src=\"https://cdn.lishaoy.net/flutterCtrip/iconBar.png\" alt=\"iconBar\" width=\"36%\" title=\"iconBar\" align=\"center\">\n\n**iconå¯¼èˆª**æµ®åŠ¨åœ¨bannerä¹‹ä¸Šï¼Œå…¶å®ç”¨çš„æ˜¯ `flutter` çš„ **Stack** ç»„ä»¶ï¼ŒStack ç»„ä»¶èƒ½è®©å…¶å­ç»„ä»¶å †å æ˜¾ç¤ºï¼Œå®ƒé€šå¸¸å’Œ **Positioned** ç»„ä»¶é…åˆä½¿ç”¨ï¼Œå¸ƒå±€ç»“æ„ä»£ç å¦‚ä¸‹ï¼š\n\n```dart\nListView(\n  children: <Widget>[\n    Container(\n      child: Stack(\n        children: <Widget>[\n          Container( ... ), //è¿™é‡Œæ”¾çš„æ˜¯bannerçš„ä»£ç \n          Positioned( ... ), //è¿™ä¸ªå°±æ˜¯iconå¯¼èˆªï¼Œé€šè¿‡ Positioned å›ºå®šæ˜¾ç¤ºä½ç½®\n        ],\n      ),\n    ),\n    Container( ... ), // è¿™é‡Œæ”¾çš„ç½‘æ ¼å¯¼èˆªåŠå…¶ä»–\n  ],\n),\n```\n\n### æ¸å˜ä¸è§„åˆ™å¸¦æœ‰èƒŒæ™¯å›¾çš„ç½‘æ ¼å¯¼èˆª\n\nç½‘æ ¼å¯¼èˆªæ•ˆæœå¦‚å›¾ï¼š\n\n<img src=\"https://cdn.lishaoy.net/flutterCtrip/gridNav.png\" alt=\"gridNav\" width=\"46%\" title=\"gridNav\" align=\"center\">\n\nå¦‚å›¾ï¼Œç½‘æ ¼å¯¼èˆªåˆ†ä¸ºä¸‰è¡Œå››æ ï¼Œè€Œç¬¬ä¸€è¡Œåˆ†ä¸ºä¸‰æ ï¼Œæ¯ä¸€è¡Œçš„ç¬¬ä¸€æ å®½åº¦å¤§äºå…¶ä½™ä¸‰æ ï¼Œå…¶ä½™ä¸‰æ å‡ç­‰ï¼Œæ¯ä¸€è¡Œéƒ½æœ‰æ¸å˜è‰²ï¼Œè€Œä¸”ç¬¬ä¸€ã€äºŒæ éƒ½æœ‰èƒŒæ™¯å›¾;\n`flutter` é‡Œ **Column** ç»„ä»¶èƒ½è®©å­ç»„ä»¶ç«–è½´æ’åˆ—ï¼Œ **Row** ç»„ä»¶èƒ½è®©å­ç»„ä»¶æ¨ªè½´æ’åˆ—ï¼Œå¸ƒå±€ä»£ç å¦‚ä¸‹ï¼š\n\n```dart\nColumn(                      // æœ€å¤–é¢æ”¾åœ¨ Column ç»„ä»¶\n  children: <Widget>[\n    Container(               // ç¬¬ä¸€è¡ŒåŒ…è£¹ Container è®¾ç½®å…¶æ¸å˜è‰²\n      height: 72,\n      decoration: BoxDecoration(\n        gradient: LinearGradient(colors: [  //è®¾ç½®æ¸å˜è‰²\n          Color(0xfffa5956),\n          Color(0xffef9c76).withAlpha(45)\n        ]),\n      ),\n      child: Row( ... ),    // ç¬¬ä¸€è¡Œ\n    ),\n    Padding(\n      padding: EdgeInsets.only(top: 1),  // è®¾ç½®è¡Œç›´æ¥çš„é—´éš”\n    ),\n    Container(\n      height: 72,\n      decoration: BoxDecoration(\n        gradient: LinearGradient(colors: [  //è®¾ç½®æ¸å˜è‰²\n          Color(0xff4b8fed),\n          Color(0xff53bced),\n        ]),\n      ),\n      child: Row( ... ),  // ç¬¬äºŒè¡Œ\n    ),\n    Padding(\n      padding: EdgeInsets.only(top: 1),   // è®¾ç½®è¡Œç›´æ¥çš„é—´éš”\n    ),\n    Container(\n      height: 72,\n      decoration: BoxDecoration(\n        gradient: LinearGradient(colors: [  //è®¾ç½®æ¸å˜è‰²\n          Color(0xff34c2aa),\n          Color(0xff6cd557),\n        ]),\n      ),\n      child: Row( ... ),  // ç¬¬ä¸‰è¡Œ\n    ),\n  ],\n),\n```\n\nå…¶å®ï¼Œå…·ä½“å®ç°çš„ç»†èŠ‚è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œæ¯”å¦‚ï¼š\n- æ€ä¹ˆè®¾ç½®ç¬¬ä¸€æ å®½åº¦åå¤§ï¼Œå…¶ä»–å‡ç­‰ï¼›\n- ç¬¬ä¸€è¡Œæœ€åä¸€æ å®½åº¦æ˜¯å…¶ä»–çš„2å€ï¼›\n- ç¬¬ä¸€ã€äºŒæ çš„èƒŒæ™¯å›¾åŠæµ®åŠ¨çš„çº¢è‰²æ°”æ³¡tipç­‰;\n\nåœ¨è¿™é‡Œå°±ä¸ç»†è®²ï¼Œå¦åˆ™ç¯‡å¹…å¤ªé•¿ï¼Œå¦‚æƒ³äº†è§£è¯¦æƒ… [ç‚¹å‡»æŸ¥çœ‹æºç ](https://github.com/persilee/flutter_ctrip/blob/master/lib/widget/grid_nav_new.dart)\n\nå…¶æ¬¡ï¼Œå†æ¥çœ‹çœ‹**ç›®çš„åœ°**é¡µé¢åŠŸèƒ½åŠæ‰€ç”¨çŸ¥è¯†ç‚¹ï¼Œé‡ç‚¹çœ‹ä¸‹ä»¥ä¸‹åŠŸèƒ½å®ç°ï¼š\n\n- å·¦å³å¸ƒå±€tabBarListView \n- ç›®çš„åœ°æœç´¢é¡µé¢\n\n### å·¦å³å¸ƒå±€tabBarListView \n\nå…·ä½“æ•ˆæœå¦‚å›¾ï¼šç‚¹å‡»å·¦è¾¹æ ‡ç­¾å¯ä»¥åˆ‡æ¢é¡µé¢ï¼Œå·¦å³æ»‘åŠ¨ä¹Ÿå¯åˆ‡æ¢é¡µé¢ï¼Œç‚¹å‡»å±•å¼€æ˜¾ç¤ºæ›´å¤šç­‰\n\n<div style=\"width:36%; margin:auto\">![no-shadow](https://cdn.lishaoy.net/flutterCtrip/destination.gif \"destination\" )</div>\n\nå…¶å®å®˜æ–¹å·²ç»æä¾›äº† **tabBar** å’Œ **TabBarView** ç»„ä»¶å¯ä»¥å®ç°ä¸Šä¸‹å¸ƒå±€çš„æ•ˆæœ*(æ—…æ‹é¡µé¢å°±æ˜¯ç”¨è¿™ä¸ªå®ç°çš„)*ï¼Œä½†æ˜¯å®ƒæ— æ³•å®ç°å·¦å³å¸ƒå±€ï¼Œè€Œä¸”ä¸å¤ªçµæ´»ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ [vertical_tabs](https://pub.dev/packages/vertical_tabs)æ’ä»¶, ä»£ç å¦‚ä¸‹ï¼š\n\n```dart\nVerticalTabView(\n    tabsWidth: 88,\n    tabsElevation: 0,\n    indicatorWidth: 0,\n    selectedTabBackgroundColor: Colors.white,\n    backgroundColor: Colors.white,\n    tabTextStyle: TextStyle(\n      height: 60,\n      color: Color(0xff333333),\n    ),\n    tabs: tabs,\n    contents: tabPages,\n  ),\n),\n```\n\nå…·ä½“ä½¿ç”¨æ–¹æ³•ï¼Œåœ¨è¿™é‡Œå°±ä¸èµ˜è¿°äº†ï¼Œ[ç‚¹å‡»vertical_tabsæŸ¥çœ‹](https://pub.dev/packages/vertical_tabs)\n\n{% note warning %} \n<i class=\"fa fa-fw fa-bell  faa-horizontal animated faa-slow\" style=\"color: #faab33;\"></i> **Tipsï¼š** \nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼š**å±•å¼€**æ˜¾ç¤ºæ›´å¤šspanæ ‡ç­¾ç»„ä»¶çš„å®ç°ï¼Œå› ä¸ºï¼Œè¿™ä¸ªç»„ä»¶åœ¨å¾ˆå¤šçš„å…¶ä»–ç»„ä»¶é‡Œç”¨åˆ°è€Œä¸”è¦æ ¹æ®æ¥å£æ•°æ®åŠ¨æ€æ¸²æŸ“ï¼Œä¸”ç»„ä»¶è‡ªèº«å­˜åœ¨çŠ¶æ€çš„å˜åŒ–ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½æ˜¯æŠŠä»–å•ç‹¬å°è£…æˆä¸€ä¸ªç»„ä»¶*(widget)*ï¼Œå¦åˆ™ï¼Œå¾ˆéš¾æ§åˆ¶è‡ªèº«çŠ¶æ€çš„å˜åŒ–ï¼Œå‡ºç°ç‚¹å‡»æ²¡æœ‰æ•ˆæœï¼Œæˆ–ç‚¹å‡»å½±å“å…¶ä»–ç»„ä»¶ã€‚ \n{% endnote %} \n\n### ç›®çš„åœ°æœç´¢é¡µé¢\n\næ•ˆæœå¦‚å›¾ï¼šç‚¹å‡»æœç´¢ç»“æœï¼Œå¦‚ï¼šç‚¹å‡»â€˜ä¸€æ—¥æ¸¸â€˜ï¼Œä¼šæœç´¢åˆ°â€˜ä¸€æ—¥æ¸¸â€˜çš„ç›¸å…³æ•°æ®\n\n<div style=\"width:36%; margin:auto\">![no-shadow](https://cdn.lishaoy.net/flutterCtrip/destination-search.gif \"destination\" )</div>\n\nç›®çš„åœ°æœç´¢é¡µé¢ï¼Œå¤§å¤šéƒ½æ˜¯å’Œå¸ƒå±€å’Œå¯¹æ¥æ¥å£çš„ä»£ç ï¼Œåœ¨è¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚\n\nç„¶åå°±æ˜¯**æ—…æ‹é¡µé¢**åŠŸèƒ½åŠæ‰€ç”¨çŸ¥è¯†ç‚¹ï¼Œé‡ç‚¹çœ‹ä¸‹ä»¥ä¸‹åŠŸèƒ½å®ç°ï¼š\n\n- å·¦å³å¸ƒå±€tabBarListView\n- ç€‘å¸ƒæµå¡ç‰‡\n- æ—…æ‹æœç´¢é¡µ\n\n### å·¦å³å¸ƒå±€tabBarListView\n\næ•ˆæœå¦‚å›¾ï¼šå¯å·¦å³æ»‘åŠ¨åˆ‡æ¢é¡µé¢ï¼Œä¸Šæ‹‰åŠ è½½æ›´å¤šï¼Œä¸‹æ‹‰åˆ·æ–°ç­‰\n\n<div style=\"width:36%; margin:auto\">![no-shadow](https://cdn.lishaoy.net/flutterCtrip/travel.gif \"travel\" )</div>\n\nè¿™ä¸ªæ˜¯`flutter` æä¾›çš„ç»„ä»¶ï¼Œ**tabBar** å’Œ **TabBarView**ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```dart\nContainer(\n  color: Colors.white,\n  padding: EdgeInsets.only(left: 2),\n  child: TabBar(\n    controller: _controller,\n    isScrollable: true,\n    labelColor: Colors.black,\n    labelPadding: EdgeInsets.fromLTRB(8, 6, 8, 0),\n    indicatorColor: Color(0xff2FCFBB),\n    indicatorPadding: EdgeInsets.all(6),\n    indicatorSize: TabBarIndicatorSize.label,\n    indicatorWeight: 2.2,\n    labelStyle: TextStyle(fontSize: 18),\n    unselectedLabelStyle: TextStyle(fontSize: 15),\n    tabs: tabs.map<Tab>((Groups tab) {\n      return Tab(\n        text: tab.name,\n      );\n    }).toList(),\n  ),\n),\nFlexible(\n    child: Container(\n  padding: EdgeInsets.fromLTRB(6, 3, 6, 0),\n  child: TabBarView(\n      controller: _controller,\n      children: tabs.map((Groups tab) {\n        return TravelTabPage(\n          travelUrl: travelParamsModel?.url,\n          params: travelParamsModel?.params,\n          groupChannelCode: tab?.code,\n        );\n      }).toList()),\n)),\n```\n\n### ç€‘å¸ƒæµå¡ç‰‡\n\n**ç€‘å¸ƒæµå¡ç‰‡** ç”¨çš„æ˜¯ [flutter_staggered_grid_view](https://pub.dev/packages/flutter_staggered_grid_view) æ’ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```dart\nStaggeredGridView.countBuilder(\n  controller: _scrollController,\n  crossAxisCount: 4,\n  itemCount: travelItems?.length ?? 0,\n  itemBuilder: (BuildContext context, int index) => _TravelItem(\n        index: index,\n        item: travelItems[index],\n      ),\n  staggeredTileBuilder: (int index) => new StaggeredTile.fit(2),\n  mainAxisSpacing: 2.0,\n  crossAxisSpacing: 2.0,\n),\n```\n\nå¦‚ä¸‹äº†è§£æ›´å¤šç›¸å…³ä¿¡æ¯ï¼Œ[ç‚¹å‡»flutter_staggered_grid_viewæŸ¥çœ‹](https://pub.dev/packages/flutter_staggered_grid_view)ã€‚\n\n### æ—…æ‹æœç´¢é¡µ\n\næ•ˆæœå¦‚å›¾ï¼šé¦–å…ˆæ˜¾ç¤ºçƒ­é—¨æ—…æ‹æ ‡ç­¾ï¼Œç‚¹å‡»å¯æœç´¢ç›¸å…³å†…å®¹ï¼Œè¾“å…¥å…³é”®å­—å¯æœç´¢ç›¸å…³æ—…æ‹ä¿¡æ¯ï¼Œåœ°ç‚¹ã€æ™¯ç‚¹ã€ç”¨æˆ·ç­‰\n\n<div style=\"width:36%; margin:auto\">![no-shadow](https://cdn.lishaoy.net/flutterCtrip/travel-search.gif \"travel-search\" )</div>\n\næ—…æ‹æœç´¢é¡µï¼Œå¤§å¤šä¹Ÿæ˜¯å’Œå¸ƒå±€å’Œå¯¹æ¥æ¥å£çš„ä»£ç ï¼Œåœ¨è¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚\n\n## å°æŠ€å·§ç§¯ç´¯æ€»ç»“\n\nä»¥ä¸‹éƒ½æ˜¯æˆ‘åœ¨é¡¹ç›®é‡Œä½¿ç”¨çš„çŸ¥è¯†ç‚¹ï¼Œåœ¨è¿™é‡Œè®°å½•åˆ†äº«å‡ºæ¥ï¼Œå¸Œæœ›èƒ½å¸®åˆ°å¤§å®¶ã€‚\n\n### PhysicalModel\n\n**PhysicalModel** å¯ä»¥è£å‰ªå¸¦èƒŒæ™¯å›¾çš„å®¹å™¨ï¼Œå¦‚ï¼Œä½ åœ¨ä¸€ä¸ª Container é‡Œæ”¾äº†ä¸€å¼ å›¾ç‰‡ï¼Œæƒ³è®¾ç½®å›¾ç‰‡åœ†è§’ï¼Œè®¾ç½® Container çš„ decoration çš„ borderRadius æ˜¯æ— æ•ˆçš„ï¼Œè¿™æ—¶å€™å°±è¦ç”¨åˆ° **PhysicalModel**ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```dart\nPhysicalModel(\n  borderRadius: BorderRadius.circular(6),  // è®¾ç½®åœ†è§’\n  clipBehavior: Clip.antiAlias,            // è£å‰ªè¡Œä¸º\n  color: Colors.transparent,               // é¢œè‰²\n  elevation: 5,                            // è®¾ç½®é˜´å½±\n  child: Container(\n        child: Image.network(\n          picUrl,\n          fit: BoxFit.cover,\n        ),\n      ),\n),\n```\n\n### LinearGradient\n\nç»™å®¹å™¨æ·»åŠ æ¸å˜è‰²ï¼Œåœ¨ç½‘æ ¼å¯¼èˆªã€appBarç­‰åœ°æ–¹éƒ½ä½¿ç”¨åˆ°ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```dart\nContainer(\n  height: 72,\n  decoration: BoxDecoration(\n    gradient: LinearGradient(colors: [\n      Color(0xff4b8fed),\n      Color(0xff53bced),\n    ]),\n  ),\n  child: ...\n),\n```\n\n### Color(int.parse('0xff' + gridNavItem.startColor))\n\né¢œè‰²å€¼è½¬æ¢æˆé¢œè‰²ï¼Œå¦‚æœï¼Œæ²¡æœ‰å˜é‡çš„è¯ï¼Œä¹Ÿå¯ç›´æ¥è¿™æ ·ç”¨ `Color(0xff53bced)`ï¼Œ\n- oxï¼šflutterè¦æ±‚ï¼Œå¯å›ºå®šä¸å˜\n- ffï¼šä»£è¡¨é€æ˜åº¦ï¼Œä¸çŸ¥é“å¦‚ä½•è®¾ç½®çš„è¯ï¼Œå¯ä»¥ç”¨å–è‰²å™¨ï¼Œæˆ–è€… withOpacity(opacity) ã€ withAlpha(a)\n- 53bced: å¸¸è§„çš„6ä½RGBå€¼\n\n### Expandedã€FractionallySizedBox\n\n**Expanded** å¯ä»¥è®©å­ç»„ä»¶æ’‘æ»¡çˆ¶å®¹å™¨ï¼Œé€šå¸¸å’Œ **Row** åŠ **Column** ç»„ä»¶æ­é…ä½¿ç”¨ï¼›\n<br />\n**FractionallySizedBox** å¯ä»¥è®©å­ç»„ä»¶æ’‘æ»¡æˆ–è¶…å‡ºçˆ¶å®¹å™¨ï¼Œå¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œå¤§å°å— widthFactor å’Œ heightFactor å®½é«˜å› å­çš„å½±å“\n\n### MediaQuery.removePadding\n\n**MediaQuery.removePadding** å¯ä»¥ç§»é™¤ç»„ä»¶çš„è¾¹è·ï¼Œæœ‰äº›ç»„ä»¶è‡ªå¸¦æœ‰è¾¹è·ï¼Œæœ‰æ—¶å€™å¸ƒå±€çš„æ—¶å€™ï¼Œä¸éœ€è¦è¾¹è·ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ç”¨ **MediaQuery.removePadding**ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```dart\nMediaQuery.removePadding(\n  removeTop: true,\n  context: context,\n  child: ...\n)\n```\n\n### MediaQuery.of(context).size.width\n\n**MediaQuery.of(context).size.width** è·å–å±å¹•çš„å®½åº¦ï¼ŒåŒç†ï¼Œ**MediaQuery.of(context).size.height** è·å–å±å¹•çš„é«˜åº¦ï¼›\nå¦‚ï¼Œæƒ³ä¸€è¡Œå¹³å‡3ç­‰åˆ†ï¼š 0.3 * MediaQuery.of(context).size.widthï¼Œåœ¨**ç›®çš„åœ°é¡µé¢**çš„æ ‡ç­¾ç»„ä»¶å°±ä½¿ç”¨åˆ°å®ƒï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```dart\nContainer(\n  alignment: Alignment.center,\n  ...\n  width: 0.3*MediaQuery.of(context).size.width - 12, // å±å¹•å¹³åˆ†ä¸‰ç­‰åˆ†ï¼Œ - 12 æ˜¯ç»™æ¯ä»½ä¸­é—´ç•™å‡ºç©ºé—´ \n  height: 40,\n  ...\n  child: ...\n),\n```\n\n### Theme.of(context).platform == TargetPlatform.iOS\n\nåˆ¤æ–­æ“ä½œç³»ç»Ÿç±»å‹ï¼Œæœ‰æ—¶å€™å¯èƒ½æœ‰ç»™ Andorid å’Œ iOS åšå‡ºä¸åŒçš„å¸ƒå±€ï¼Œå°±éœ€è¦ç”¨åˆ°å®ƒã€‚\n\n### with AutomaticKeepAliveClientMixin\n\n`flutter` åœ¨åˆ‡æ¢é¡µé¢æ—¶å€™æ¯æ¬¡éƒ½ä¼šé‡æ–°åŠ è½½æ•°æ®ï¼Œå¦‚æœæƒ³è®©é¡µé¢ä¿ç•™çŠ¶æ€ï¼Œä¸é‡æ–°åŠ è½½ï¼Œå°±éœ€è¦ä½¿ç”¨ **AutomaticKeepAliveClientMixin**,ä»£ç å¦‚ä¸‹ï¼š*ï¼ˆåœ¨æ—…æ‹é¡µé¢å°±æœ‰ä½¿ç”¨åˆ°å®ƒï¼Œä¸ºäº†è®©tabBar å’Œ tabBarViewåœ¨åˆ‡æ¢æ—¶ä¸é‡æ–°åŠ è½½ï¼‰*\n\n```dart\nclass TravelTabPage extends StatefulWidget {\n  ...\n  //éœ€è¦é‡å†™ wantKeepAlive ä¸” è®¾ç½®æˆ true\n  @override\n  bool get wantKeepAlive => true;\n}\n```\n\n### with SingleTickerProviderStateMixin\n\næ··å…¥ `SingleTickerProviderStateMixin` å¯ä»¥åœ¨åˆ‡æ¢é¡µé¢æ—¶å€™ï¼Œä½¿ç”¨åŠ¨ç”»æ•ˆæœï¼Œå¦‚ï¼š\n\n```dart\nbottomNavigationBar: BottomNavigationBar(\n          currentIndex: _currentIndex,\n          onTap: (index) {\n            _controller.animateToPage( // _controller æ˜¯ PageView çš„ PageController\n                index,\n                curve: Curves.easeIn, duration: Duration(milliseconds: 260)\n            );\n            setState(() {\n              _currentIndex = index;\n            });\n          },\n          ...\n)          \n```\n\n### SystemUiOverlayStyle \n\n`SystemUiOverlayStyle` å¯å®ç°çŠ¶æ€æ æ²‰æµ¸å¼ï¼Œè®¾ç½®å…¨å±€é…ç½®ï¼Œå¦‚ä¸‹ï¼š\n\n```dart\nvoid main() => runApp(MyApp());\n\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    TextStyle textStyle = TextStyle(fontSize: 20);\n    SystemUiOverlayStyle style = SystemUiOverlayStyle(\n        statusBarColor: Colors.transparent,\n        statusBarIconBrightness: Brightness.light\n    );\n    SystemChrome.setSystemUIOverlayStyle(style);\n\n    return MaterialApp(\n      ...\n  }\n}\n```\n\nå•é¡µé¢è®¾ç½®å¦‚ä¸‹ï¼š\n\n```dart\nclass _HomePageState extends State<HomePage> {\n\n  ...\n\n  @override\n  Widget build(BuildContext context) {\n    SystemChrome.setSystemUIOverlayStyle(SystemUiOverlayStyle.light); //è®¾ç½®çŠ¶æ€æ æ²‰æµ¸å¼\n    return Scaffold(\n      backgroundColor: Color(0xfffafafc),\n      body: LoadingContainer(\n        ...\n      )\n      ...\n```\n\næš‚æ—¶åªèƒ½æƒ³åˆ°è¿™äº›å¸¸ç”¨çš„çŸ¥è¯†ç‚¹ï¼Œä»¥åå¦‚æœ‰æ–°çš„ä¼šæ…¢æ…¢è¡¥å……ã€‚\n\n**é¡¹ç›®GitHubåœ°å€:** [https://github.com/persilee/flutter_ctrip](https://github.com/persilee/flutter_ctrip)","tags":["Dart"],"categories":["Dart"]},{"title":"ä¸‰æ‹›è®©ä½ æˆä¸ºç¨‹åºçŒ¿ä¸­ä¼˜ç§€çš„å°„é¸¡æ¹¿","url":"%2FgoodDesigner.html","content":"\n{% li https://cdn.lishaoy.net/goodDesigner/goodDesigner.jpg, goodDesigner, goodDesigner %}\n\nè¿™ç¯‡æ–‡ç« æ€»ç»“ä¸€ä¸‹ä¹‹å‰é¡¹ç›®ä¸­ä¸€äº› **å‰ç«¯** å·¥å…·åŠæŠ€å·§ï¼Œä¸»è¦åŒ…æ‹¬ **Iconfontçš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿** ã€ **å¦‚ä½•ä½¿ç”¨é…·ç‚«æ¼‚äº®çš„åŠ¨ç”»ï¼ˆLottieï¼‰** ã€ **å¦‚ä½•åŠ å…¥é¡µé¢æ»šåŠ¨å…¥åœºç¦»åœºåŠ¨æ•ˆ**ã€‚\n\n<!-- more -->\n\n## Iconfontçš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ \n\n[Iconfont](https://www.iconfont.cn) æ˜¯é˜¿é‡Œå·´å·´æ‰“é€ çš„çŸ¢é‡å›¾æ ‡åº“ï¼Œå›¾æ ‡ä¸°å¯Œå¤šå½©ï¼ˆå•è‰²å’Œå½©è‰²ï¼‰ï¼Œä½¿ç”¨æ–¹ä¾¿å¿«æ·ï¼ˆå¯ç­›é€‰å›¾ç‰‡åˆ›å»ºè‡ªå·±é¡¹ç›®å›¾æ ‡åº“ï¼‰ï¼Œæ”¯æŒåœ¨çº¿ä½¿ç”¨ï¼Œæ‘†è„±äº†ä¼ ç»Ÿçš„å›¾ç‰‡çš„ç¹çå’Œcsså­—ä½“å›¾æ ‡åº“å¼•å…¥çš„å†—ä½™ã€‚\n\nä¸‹é¢ä»‹ç»ä¸‹å¦‚ä½•ä½¿ç”¨ Iconfont\n\n### æœç´¢é€‰æ‹©å›¾æ ‡\n\nç‚¹å‡» [Iconfont](https://www.iconfont.cn) æ‰“å¼€é¡µé¢å¦‚å›¾ï¼Œå¯ä»¥æœç´¢ ğŸ” å…³é”®å­—ï¼Œæ‰¾åˆ°æƒ³è¦çš„å›¾æ ‡\n\n![Iconfont](https://cdn.lishaoy.net/goodDesigner/Iconfont.png \"Iconfont\" )\n\nä¾‹å¦‚ï¼Œæœç´¢ â€˜imageâ€™ å…³é”®å­—ï¼Œå¦‚å›¾\n\n![Iconfont](https://cdn.lishaoy.net/goodDesigner/Iconfont2.png \"Iconfont\" )\n\né¼ æ ‡æ”¾åˆ°å›¾æ ‡ä¸Šä¼šå‡ºç° **æ·»åŠ å…¥åº“** ã€ **æ”¶è—** ã€ **ä¸‹è½½å›¾æ ‡** é€‰é¡¹ï¼Œä¸€èˆ¬æˆ‘ä¼šé€‰æ‹© **æ·»åŠ å…¥åº“** ï¼Œä¹‹åç»Ÿä¸€æ·»åŠ åˆ°é¡¹ç›®ï¼Œç”Ÿæˆåœ¨çº¿åœ°å€å¼•å…¥é¡¹ç›®ï¼ˆåé¢ä¼šä»‹ç»åˆ°ï¼‰\n\nå³è¾¹çš„è“è‰²çš‡å† æŒ‰é’®å¯ä»¥è¿›è¡Œ *ç²¾é€‰* ã€ *å…¨éƒ¨* çš„ç­›é€‰ï¼Œçº¢è‰²çš„æŒ‰é’®å¯ä»¥è¿›è¡Œ *å•è‰²* ã€ *å¤šè‰²* ã€ *å…¨éƒ¨* çš„ç­›é€‰\n\nç‚¹å‡» ä¸‹è½½ ä¼šå¼¹å‡ºä¸‹è½½é¡µé¢ï¼Œå¯ä»¥è¿›è¡Œå›¾æ ‡çš„ç¼–è¾‘å’Œä¸åŒæ ¼å¼çš„ä¸‹è½½ï¼Œå¦‚å›¾\n\n![Iconfont](https://cdn.lishaoy.net/goodDesigner/Iconfont3.1.png \"Iconfont\" )\n\n### æ·»åŠ å…¥åº“ç”Ÿæˆåœ¨çº¿è¿æ¥\n\né€‰æ‹© **æ·»åŠ å…¥åº“** çš„å›¾æ ‡ï¼Œä¼šåœ¨å³ä¸Šè§’çš„è´­ç‰©è½¦æ˜¾ç¤ºæ•°é‡ï¼Œç‚¹å‡»è´­ç‰©è½¦å›¾æ ‡ï¼Œä¼šå¼¹å‡ºå³ä¾§æ ï¼Œå¦‚å›¾\n\n![Iconfont](https://cdn.lishaoy.net/goodDesigner/Iconfont4.png \"Iconfont\" )\n\nå¯ä»¥æ‰¹é‡ä¸‹è½½å’Œæ·»åŠ åˆ°é¡¹ç›®ï¼Œç‚¹å‡» **æ·»åŠ è‡³é¡¹ç›®** å¦‚å›¾\n\n![Iconfont](https://cdn.lishaoy.net/goodDesigner/Iconfont5.png \"Iconfont\" )\n\nç»™é¡¹ç›®å–ä¸€ä¸ªåå­—ï¼Œç‚¹å‡»ç¡®å®šï¼Œå¦‚å›¾\n\n![Iconfont](https://cdn.lishaoy.net/goodDesigner/Iconfont6.png \"Iconfont\" )\n\nå¯ä»¥çœ‹åˆ°æœ‰ä¸‰ç§å›¾æ ‡å¼•å…¥çš„æ–¹å¼ï¼Œé»˜è®¤é€‰ä¸­çš„æ˜¯ **Font class** çš„æ–¹å¼ï¼Œä¹Ÿæ¨èä½¿ç”¨è¿™ç§æ–¹å¼\n\n**Unicode** : æ˜¯ä»¥å­—ä½“çš„æ–¹å¼å¼•å…¥ï¼Œå¦‚ä¸‹\n\n```css\n@font-face {\n  font-family: 'iconfont';  /* project id 1066942 */\n  src: url('//at.alicdn.com/t/font_1066942_yvi703p2pv.eot');\n  src: url('//at.alicdn.com/t/font_1066942_yvi703p2pv.eot?#iefix') format('embedded-opentype'),\n  url('//at.alicdn.com/t/font_1066942_yvi703p2pv.woff2') format('woff2'),\n  url('//at.alicdn.com/t/font_1066942_yvi703p2pv.woff') format('woff'),\n  url('//at.alicdn.com/t/font_1066942_yvi703p2pv.ttf') format('truetype'),\n  url('//at.alicdn.com/t/font_1066942_yvi703p2pv.svg#iconfont') format('svg');\n}\n```\n\n**Font class** : æ˜¯ä»¥Cssçš„æ–¹å¼å¼•å…¥ï¼Œå¦‚ä¸‹\n\n```html\n//at.alicdn.com/t/font_1066942_yvi703p2pv.css\n```\n\n**Symbol** : æ˜¯ä»¥jsçš„æ–¹å¼å¼•å…¥ï¼Œå¦‚ä¸‹\n\n```html\n//at.alicdn.com/t/font_1066942_yvi703p2pv.js\n```\n\nå¦‚æƒ³äº†è§£3ä¸­æ–¹å¼å…·ä½“ç”¨æ³•ï¼Œå¯ç‚¹å‡» [å®˜æ–¹æ–‡æ¡£](https://www.iconfont.cn/help/detail?spm=a313x.7781069.1998910419.d8cf4382a&helptype=code)ï¼Œè¿™é‡Œæˆ‘ä¸»è¦ä»‹ç» **Font class** çš„æ–¹å¼\n\n### å¼•å…¥é¡¹ç›®ä½¿ç”¨\n\né¦–å…ˆï¼ŒæŠŠç”Ÿæˆçš„é“¾æ¥å¼•å…¥åˆ°é¡µé¢ä¸­ï¼Œå¦‚ä¸‹\n\n```css\n<link rel=\"stylesheet\" href=\"//at.alicdn.com/t/font_1066942_yvi703p2pv.css\">\n```\n\nå…¶æ¬¡ï¼Œç”¨ `<i class=\"iconfont icon-Userselect\"></i>` åœ¨é¡µé¢ä¸­ä½¿ç”¨ï¼Œå¤§å°é¢œè‰²éƒ½å¯ä»¥ç”¨ `css` è°ƒæ•´\n\né˜¿é‡Œåœ¨ä»£ç çš„å¤åˆ¶ã€å›¾æ ‡çš„æœç´¢ã€ç¼–è¾‘ã€ä¸‹è½½ã€ç­›é€‰ç­‰ä¸€äº›æ“ä½œä¸Šåšçš„å¾ˆåˆ°ä½ï¼Œä½¿ç”¨èµ·æ¥æ–¹ä¾¿å¿«æ·\n\næˆ‘åœ¨ä¹‹å‰çš„é¡¹ç›®é‡Œä¹Ÿä½¿ç”¨è¿‡ï¼Œè¿˜æ˜¯å¾ˆæ¼‚äº®çš„ [https://a.lishaoy.net](https://a.lishaoy.net) ï¼Œå¦‚å›¾æ˜¯æˆ‘åœ¨é¡¹ç›®é‡Œä½¿ç”¨çš„ä¸€äº›å›¾æ ‡ï¼Œæ¯ä¸ªå›¾æ ‡æ˜¯ä¸æ˜¯éƒ½åšçš„å¾ˆç²¾è‡´\n\n![Iconfont](https://cdn.lishaoy.net/goodDesigner/Iconfont7.png \"Iconfont\" )\n\n## Lottieå¼€æºåŠ¨ç”»åº“\n\n**Lottie** æ˜¯Airbnbå¼€æºçš„ä¸€ä¸ªé¢å‘ iOSã€Androidã€React Native çš„åŠ¨ç”»åº“ï¼Œèƒ½å¤Ÿç›´æ¥æŠŠ **AE** å¯¼å‡ºçš„åŠ¨ç”»æ–‡ä»¶ï¼ˆjsonï¼‰ï¼Œå¼•å…¥åˆ°é¡µé¢ä½¿ç”¨ï¼Œä»¥ä¸‹æ˜¯å®˜æ–¹ç»™å‡ºçš„æ•ˆæœå›¾\n\n![no-shadow](https://cdn.lishaoy.net/goodDesigner/lottie.gif \"Lottie\" )\n\n![no-shadow](https://cdn.lishaoy.net/goodDesigner/lottie2.gif \"Lottie\" )\n\n**Lottie** æ”¯æŒ iOSã€Androidã€React Native ã€Web ï¼Œè¿™é‡Œä¸»è¦ä»‹ç» lottie-Web æ˜¯å¦‚ä½•ä½¿ç”¨ï¼Œæ›´å¤šä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒ [http://airbnb.io/lottie/](http://airbnb.io/lottie/)\n\né¦–å…ˆï¼Œåœ¨é¡µé¢ä¸­å¼•å…¥ `CDN` ä¸Šçš„æ–‡ä»¶ï¼Œå¦‚ä¸‹\n\n```js\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.4.2/lottie.min.js\" type=\"text/javascript\"></script>\n```\n\nå…¶æ¬¡ï¼Œä½¿ç”¨ **AE** åˆ¶ä½œåŠ¨ç”»ï¼ˆUIæä¾›æˆ–è€…è‡ªå·±åˆ¶ä½œï¼‰å¯¼å‡ºçš„ `json`ï¼Œæˆ–è€…å¯ä»¥åœ¨ [Lottie Files](https://lottiefiles.com/featured) ä¸‹è½½ ï¼ˆ[Lottie Files](https://lottiefiles.com/featured) æ˜¯ä¸€ä¸ªæ‹¥æœ‰é«˜è´¨é‡ **Lottie** æ–‡ä»¶æ ¼å¼åŠ¨ç”»çš„ç½‘ç«™ï¼Œä¸ä»…è®¾è®¡å¸ˆå¯ä»¥åœ¨ä¸Šé¢é™ˆåˆ—ä»–ä»¬çš„åŠ¨ç”»è€Œä¸”è¿˜æä¾›å…è´¹ä¸‹è½½ï¼‰\n\nä»¥ä¸‹æ˜¯æˆ‘åœ¨é¡¹ç›®é‡Œä½¿ç”¨çš„æ•ˆæœå›¾ï¼ˆä¸Šä¼ å›¾ç‰‡ä¸­ä¼šåŠ é‡åŠ¨ç”»ï¼Œä¸Šä¼ æˆåŠŸåŠ¨ç”»åœæ­¢ï¼‰ï¼Œå…·ä½“æ•ˆæœå¯ä»¥å»æˆ‘çš„é¡¹ç›®ä¸Šä¼ å›¾ç‰‡ä½“éªŒ [ä¸Šä¼ å›¾ç‰‡åŠ¨ç”»æ•ˆæœ](https://a.lishaoy.net/posts/56)\n\n![Lottie](https://cdn.lishaoy.net/adonisjs/image_upload4.gif \"Lottie\" )\n\nå…·ä½“çš„ä»£ç å¦‚ä¸‹ï¼Œåœ¨é¡µé¢ä¸­åˆ›å»ºéœ€è¦åŠ é‡åŠ¨ç”»çš„å®¹å™¨ï¼ˆ`HTML` ä»£ç ï¼‰\n\n```html\n<div class=\"image-load d-flex justify-content-center align-items-center\">\n  <div class=\"box\">\n    <div class=\"lottie\"></div>\n    <div class=\"text text-muted text-center\">The picture is being uploaded ...</div>\n  </div>\n</div>\n```\n\nç„¶åï¼Œç”¨ `js` åˆå§‹åŒ–åŠ¨ç”»ï¼Œå¦‚ä¸‹\n\n```js\n    let anim = lottie.loadAnimation({\n      container: $('.image-load .lottie')[0], //åŠ¨ç”»å®¹å™¨çš„å…ƒç´ \n      renderer: 'svg', //æ”¯æŒ svg å’Œ canvas\n      loop: true, //æ˜¯å¦å¾ªç¯\n      autoplay: false, // æ˜¯å¦è‡ªåŠ¨æ’­æ”¾\n      path: '/EmojiReaction.json' //åŠ¨ç”»jsonæ–‡ä»¶çš„ä½ç½®\n    })\n    anim.addEventListener('loopComplete', () => {  // ç›‘å¬ `loopComplete` äº‹ä»¶ï¼Œæ¯æ¬¡æ’­æ”¾å®Œæˆæ‰§è¡Œ\n      anim.pause() //åœæ­¢æ’­æ”¾\n      $('.image-load').removeClass('loading') //éšè—å®¹å™¨\n      $('.image-load .box .text').text('The picture is being uploaded...').removeClass('text-success').addClass('text-muted') //æ”¹å˜è¯´æ˜æ–‡å­—çŠ¶æ€åŠé¢œè‰²\n    })\n```\n\næ›´å¤šçš„å‚æ•°å’Œäº‹ä»¶å¯æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ [Lottie-Web](http://airbnb.io/lottie/web/web.html)\n\n## å¦‚ä½•åŠ å…¥é¡µé¢æ»šåŠ¨å…¥åœºç¦»åœºåŠ¨æ•ˆ\n\né¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥å…ˆçœ‹çœ‹æ•ˆæœï¼Œå¦‚å›¾ï¼ˆæ•ˆæœæ¥æºæˆ‘çš„åšå®¢ [https://lishaoy.net](https://lishaoy.net/laboratory/)ï¼‰\n\n![Lottie](https://cdn.lishaoy.net/goodDesigner/lottie3.gif \"Lottie\" )\n\nä»¥ä¸ŠåŠ¨æ•ˆå°±æ˜¯ç”¨çš„ **AOS** è¿™ä¸ªåº“ï¼Œå…·ä½“çš„ä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•\n\nåœ¨é¡µé¢ä¸Šå¼•å…¥ `css` å’Œ `js` æ–‡ä»¶\n\n```html\n<link rel=\"stylesheet\" href=\"https://unpkg.com/aos@next/dist/aos.css\"/>\n\n<script src=\"https://unpkg.com/aos@next/dist/aos.js\"></script>\n```\n\nç„¶åï¼Œç”¨ `AOS.init()` åˆå§‹åŒ–ï¼Œè¿™æ ·åˆå§‹åŒ–ï¼Œä½¿ç”¨çš„æ˜¯é»˜è®¤è®¾ç½®ï¼Œå…·ä½“æœ‰å¾ˆå¤šå‚æ•°å¯ä»¥è°ƒæ•´ï¼Œè¯¦æƒ…å¯æŸ¥é˜… [é¡¹ç›®æ–‡æ¡£](https://github.com/michalsnik/aos)ï¼Œå¦‚\n\n```js\nAOS.init({\n  // Global settings:\n  disable: false, // accepts following values: 'phone', 'tablet', 'mobile', boolean, expression or function\n  startEvent: 'DOMContentLoaded', // name of the event dispatched on the document, that AOS should initialize on\n  initClassName: 'aos-init', // class applied after initialization\n  animatedClassName: 'aos-animate', // class applied on animation\n  useClassNames: false, // if true, will add content of `data-aos` as classes on scroll\n  disableMutationObserver: false, // disables automatic mutations' detections (advanced)\n  debounceDelay: 50, // the delay on debounce used while resizing window (advanced)\n  throttleDelay: 99, // the delay on throttle used while scrolling the page (advanced)\n  \n\n  // Settings that can be overridden on per-element basis, by `data-aos-*` attributes:\n  offset: 120, // offset (in px) from the original trigger point\n  delay: 0, // values from 0 to 3000, with step 50ms\n  duration: 400, // values from 0 to 3000, with step 50ms\n  easing: 'ease', // default easing for AOS animations\n  once: false, // whether animation should happen only once - while scrolling down\n  mirror: false, // whether elements should animate out while scrolling past them\n  anchorPlacement: 'top-bottom', // defines which position of the element regarding to window should trigger the animation\n\n});\n```\n\næœ€åï¼Œåœ¨é¡µé¢ä¸Šä½¿ç”¨å³å¯ï¼Œå¦‚\n\n```html\n<div data-aos=\"fade-in\"></div>\n```\n\næˆ–è€…ï¼Œä¹Ÿå¯ä»¥å•ç‹¬ç»™å…ƒç´ è®¾ç½®å‚æ•°ï¼Œä½¿ç”¨ `data-aos-*` ï¼Œå¦‚\n\n```html\n<div data-aos=\"fade-in\"\n  data-aos-offset=\"200\"\n  data-aos-delay=\"50\"\n  data-aos-duration=\"1000\"\n  data-aos-easing=\"ease-in-out\"\n></div>\n```\n\næ›´å¤šçš„è½½å…¥æ•ˆæœå¯ä»¥å‚è€ƒå®˜æ–¹ç»™å‡ºçš„ [ç¤ºä¾‹](http://michalsnik.github.io/aos/)\n\nå¦‚åœ¨æ‚¨åšçš„é¡µé¢æˆ–åº”ç”¨ä¸­ä½¿ç”¨äº†è¿™ä¸‰æ‹›ï¼Œ**ç²¾è‡´å°å›¾æ ‡** ã€ **ç‚«é…·çš„åŠ¨ç”»** ã€ **é¡µé¢æ»šåŠ¨è½½å…¥åŠ¨æ•ˆ** ï¼Œé‚£ä¹ˆç¬é—´è®©æ‚¨çš„é¡µé¢æˆ–åº”ç”¨é«˜å¤§ä¸Šä¸”ç”ŸåŠ¨æ´»æ³¼èµ·æ¥ã€‚","tags":["AOS"],"categories":["è®¾è®¡"]},{"title":"ç”¨ Node.js å¿«é€Ÿå¼€å‘å‡ºå¤šåŠŸèƒ½çš„å¤šäººåœ¨çº¿çš„æ–‡ç« åˆ†äº«å¹³å°","url":"%2Fadonisjs.html","content":"\n{% li https://cdn.lishaoy.net/adonisjs/adonisjs1.png, Adonisjs, Adonisjs %}\n\næœ€è¿‘åœ¨å­¦ä¹ ä½¿ç”¨ `Node.js` æ¡†æ¶ï¼Œè¾¹å­¦ä¹ è¾¹ä½¿ç”¨ï¼ŒèŠ±äº†å¤§æ¦‚ **3å‘¨** æ—¶é—´åšå®Œè¿™ä¸ª **Webåº”ç”¨** ä¸”åœ¨ <time>12æœˆ16</time> å‡Œæ™¨å·¦å³ä¸Šçº¿æˆåŠŸï¼ˆå…¶å®å°±æ˜¯æŠŠå¼€å‘ç¯å¢ƒæ¬åˆ°æœåŠ¡å™¨ï¼‰ï¼Œ åœ°å€ï¼š [https://a.lishaoy.net](https://a.lishaoy.net)  \n\nè¿™ä¸ª **Webåº”ç”¨** çš„ä»£ç æ˜¯å¼€æºçš„ï¼Œå¦‚å¯¹è¿™ä¸ªåº”ç”¨æ„Ÿå…´è¶£ï¼Œæƒ³çŸ¥é“ä»£ç æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Œå¯ä»¥å»æˆ‘ **GitHub** ä¸‹è½½æˆ– `clone` ï¼š[åº”ç”¨æºç ](https://github.com/persilee/adonis_pro)\n\n<hr />\n\n<!-- more -->\n\né¦–å…ˆï¼Œæ¥çœ‹çœ‹ç”¨ **3å‘¨** æ—¶é—´åšå‡ºæ¥çš„åº”ç”¨éƒ½æœ‰äº›ä»€ä¹ˆåŠŸèƒ½ï¼Œä¹‹åå†çœ‹çœ‹é€‰ç”¨çš„ `Node.js` æ¡†æ¶ï¼Œæœ€åçœ‹çœ‹ `Node.js` é¡¹ç›®å¦‚ä½•éƒ¨ç½²åˆ°æœåŠ¡å™¨ã€‚\n\n## Webåº”ç”¨åŠŸèƒ½\n\n### ç™»å½•ã€æ³¨å†ŒéªŒè¯\n\n**ç™»å½•åŠŸèƒ½**\n\n- è¾“å…¥æ¡†æ²¡æœ‰è¾“å…¥ç‚¹å‡»ç™»å½•ä¼šæç¤ºï¼šç”¨æˆ·åã€å¯†ç ä¸èƒ½ä¸ºç©º\n- è¾“å…¥çš„ç”¨æˆ·é”™è¯¯æˆ–ä¸å­˜åœ¨ä¼šæç¤ºï¼šç”¨æˆ·ä¸å­˜åœ¨\n- è¾“å…¥çš„å¯†ç é”™è¯¯ä¼šæç¤ºï¼šå¯†ç é”™è¯¯\n- ç™»å½•åä¼šé‡å®šå‘åˆ°ç”¨æˆ·ä¸Šæ¬¡è®¿é—®çš„åœ°å€\n\n![no-shadow](https://cdn.lishaoy.net/adonisjs/login.gif \"Login\" )\n\n**æ³¨å†ŒåŠŸèƒ½**\n\n- è¾“å…¥æ¡†æ²¡æœ‰è¾“å…¥ç‚¹å‡»æ³¨å†Œä¼šæç¤ºï¼šç”¨æˆ·åã€é‚®ç®±ã€å¯†ç ä¸èƒ½ä¸ºç©º\n- ç”¨æˆ·åå’Œé‚®ç®±ä¸å…¶ä»–ç”¨æˆ·ç›¸åŒä¼šæç¤ºï¼šç”¨æˆ·åã€é‚®ç®±å·²å­˜åœ¨\n- å¯†ç å°äº6ä½æ•°ä¼šæç¤ºï¼šæœ€å°é•¿åº¦æ˜¯6ä½\n- æ³¨å†ŒæˆåŠŸåä¼šå‘é€éªŒè¯é‚®ä»¶åˆ°ç”¨æˆ·é‚®ç®±ï¼Œéœ€ç‚¹å‡»é‚®ç®±æŒ‰é’®éªŒè¯\n\n![no-shadow](https://cdn.lishaoy.net/adonisjs/register.gif \"Register\" )\n\n### æ–‡ç« åˆ—è¡¨\n\nç™»å½•è¿›æ¥ï¼Œä¼šæ˜¾ç¤ºæ–‡ç« åˆ—è¡¨é¡µé¢ï¼Œæ˜¾ç¤ºå†…å®¹å¦‚ä¸‹ï¼š\n\n- æ–‡ç« æ ‡é¢˜ï¼šç‚¹å‡»å¯è¿›å…¥æ–‡ç« è¯¦æƒ…é¡µ\n- ä½œè€…å¤´åƒã€ä½œè€…åç§°ï¼šç‚¹å‡»å¯è¿›å…¥ä½œè€…ä¿¡æ¯é¡µ\n- æ—¶é—´ï¼šæ˜¾ç¤ºåˆ›å»ºæ—¶é—´ï¼ˆå¤šä¹…ä»¥å‰æ–¹å¼æ˜¾ç¤ºï¼‰\n- é˜…è¯»æ¬¡æ•°ã€ç‚¹èµæ¬¡æ•°\n- æ–‡ç« ç®€è¦ï¼šè‡ªåŠ¨æ‘˜å–ç« å¤´æ–‡ç« \n- ç¼©ç•¥å›¾ï¼šè‡ªåŠ¨æ‘˜å–æ–‡ç« ç¬¬ä¸€å¼ å›¾ç‰‡\n\n![no-shadow](https://cdn.lishaoy.net/adonisjs/posts.png \"Post List\" )\n\n### æ–‡ç« è¯¦æƒ…\n\nç‚¹å‡»æ–‡ç« æ ‡é¢˜å¯è¿›å…¥æ–‡ç« è¯¦æƒ…é¡µé¢ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n\n- æ–‡ç« æ ‡é¢˜\n- ä½œè€…å¤´åƒã€ä½œè€…åç§°\n- å‘å¸ƒæ—¶é—´\n- é˜…è¯»æ¬¡æ•°å’Œç‚¹èµæ¬¡æ•°\n- ç¼–è¾‘æŒ‰é’®ï¼ˆä»…ä½œè€…å¯è§ï¼‰\n- å·¦ä¾§æµ®åŠ¨å·¥å…·æ ï¼ˆç‚¹èµã€å‘é€é‚®ä»¶åˆ°è‡ªå·±é‚®ç®±ã€è¿”å›é¡¶éƒ¨ã€åˆ†äº«ï¼‰\n- ç‚¹èµï¼šæ–‡ç« è¢«ç‚¹èµåï¼Œä½œè€…å¯ä»¥æ”¶åˆ°æ¶ˆæ¯é€šçŸ¥ï¼Œä¸”å°†æ–‡ç« æ”¶å½•åˆ°ç‚¹èµåˆ—è¡¨ï¼ˆæ”¯æŒåŒ¿åç‚¹èµï¼Œä½†ä¸ä¼šè®°å½•é€šçŸ¥ï¼Œåªä¼šåŠ ç‚¹èµæ•°ï¼‰\n\n![no-shadow](https://cdn.lishaoy.net/adonisjs/post.png \"Post\" )\n\n### ç¼–è¾‘æ–‡ç« æ”¯æŒ Markdown\n\næ–°å»ºæ–‡ç« å’Œä¿®æ”¹æ–‡ç« éƒ½æ”¯æŒ **Markdown** è¯­æ³•ï¼Œä¸”ä¼šæ¯éš”6ç§’é’Ÿè‡ªåŠ¨ä¿å­˜\n\n![no-shadow](https://cdn.lishaoy.net/adonisjs/post_edit.png \"Post Edit\" )\n\n### ä¸ªäººä¿¡æ¯\n\nä¸ªäººä¿¡æ¯é¡µé¢æ˜¾ç¤ºå†…å®¹å¦‚ä¸‹\n\n- ä½œè€…çš„å¤´åƒã€å§“åã€ç®€ä»‹ï¼ˆæ”¯æŒemojiï¼‰\n- ä¿¡æ¯æ ï¼šGitHub é“¾æ¥ã€ä¸ªäººç½‘ç«™é“¾æ¥ã€å‘å¸ƒæ–‡ç« æ•°ã€æ€»é˜…è¯»æ¬¡æ•°ã€æ€»ç‚¹èµæ¬¡æ•°\n- å‘å¸ƒæ–‡ç« åˆ—è¡¨ï¼šä¸ªäººå‘å¸ƒçš„æ‰€æœ‰æ–‡ç« (æœ‰åˆ é™¤å’Œç¼–è¾‘æŒ‰é’®)\n- å·²èµæ–‡ç« åˆ—è¡¨ï¼šç‚¹è¿‡èµçš„æ–‡ç« ä¼šè®°å½•åœ¨è¿™é‡Œ\n- å…³æ³¨è€…åˆ—è¡¨ï¼šå…³æ³¨ä½ çš„ç”¨æˆ·ï¼ˆå…³æ³¨è¿‡çš„ç”¨æˆ·ï¼Œå…³æ³¨æŒ‰é’®é«˜äº®æ˜¾ç¤ºï¼‰\n- å·²å…³æ³¨åˆ—è¡¨ï¼šä½ å…³æ³¨çš„ç”¨æˆ·ï¼ˆå…³æ³¨è¿‡çš„ç”¨æˆ·ï¼Œå…³æ³¨æŒ‰é’®é«˜äº®æ˜¾ç¤º)\n- å…³æ³¨æŒ‰é’®ï¼šä½œè€…æœ¬äººä¸å¯è§ï¼Œç‚¹å‡»å¯å…³æ³¨ï¼Œå†æ¬¡ç‚¹å‡»å–æ¶ˆå…³æ³¨ï¼Œå…³æ³¨åï¼Œç”¨æˆ·ä¼šæ”¶åˆ°æ¶ˆæ¯é€šçŸ¥\n\n![no-shadow](https://cdn.lishaoy.net/adonisjs/profile.gif \"Profile\" )\n\næ–‡ç« åˆ é™¤ç¼–è¾‘å¿«æ·å…¥å£ï¼Œå¦‚å›¾\n\n![no-shadow](https://cdn.lishaoy.net/adonisjs/edit_delete_post.gif \"Edit && Delete post\" )\n\nä¸‹é¢æ˜¯æˆ‘ç”¨å¦ä¸€ä¸ªç”¨æˆ·ç™»å½•ï¼Œè¿›å…¥åˆ°ä¸ªäººä¿¡æ¯é¡µé¢å°±ä¼šæ˜¾ç¤ºå…³æ³¨æŒ‰é’®ï¼Œå¦‚å›¾\n\n![no-shadow](https://cdn.lishaoy.net/adonisjs/follow.png \"Follow\" )\n\n### æ–‡ä»¶ä¸Šä¼ \n\nç‚¹å‡»æ–‡ä»¶ä¸Šä¼ å°å›¾æ ‡å¯è¿›å…¥æ–‡ä»¶ä¸Šä¼ é¡µé¢ï¼Œç‚¹å‡» **Files** é“¾æ¥å¯è¿›å…¥æ–‡ä»¶ä¸Šä¼ åˆ—è¡¨ï¼Œæ˜¾ç¤ºå†…å®¹å¦‚å›¾ï¼š\n\n![no-shadow](https://cdn.lishaoy.net/adonisjs/file_upload.png \"File Upload\" )\n\n![no-shadow](https://cdn.lishaoy.net/adonisjs/file_list.png \"File List\" )\n\n### æ–‡ä»¶é¢„è§ˆå’Œç¼–è¾‘\n\nä»æ–‡ä»¶åˆ—è¡¨é¡µé¢ç‚¹å‡»æ ‡é¢˜å¯è¿›å…¥æ–‡ä»¶é¢„è§ˆé¡µé¢ï¼Œæ˜¾ç¤ºå†…å®¹å¦‚ä¸‹ï¼š\n\n- å¦‚æœæ˜¯å›¾ç‰‡æ˜¾ç¤ºå›¾ç‰‡ï¼Œå¦‚æœæ˜¯è§†é¢‘æ˜¾ç¤ºè§†é¢‘\n- å·¥å…·æ ï¼šå‘é€é‚®ä»¶åˆ°è‡ªå·±é‚®ç®±ï¼ˆç™»å½•å¯è§ï¼‰ã€ç¼–è¾‘æŒ‰é’®ã€åˆ é™¤æŒ‰é’®ï¼ˆç™»å½•è‡ªå·±ä¸Šä¼ å¯è§ï¼‰\n- æ–‡ä»¶åç§°\n- ä¸‹è½½æŒ‰é’®\n- ä¸Šä¼ è€…å¤´åƒ\n\n![no-shadow](https://cdn.lishaoy.net/adonisjs/file_show.gif \"File Show\" )\n\n### æ¶ˆæ¯é€šçŸ¥\n\nç‚¹å‡»é“ƒé“›å°å›¾æ ‡å¯è¿›å…¥æ¶ˆæ¯é€šçŸ¥é¡µé¢ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n\n- ç‚¹èµæ¶ˆæ¯åˆ—è¡¨ï¼šæ”¶åˆ°ç”¨æˆ·ç‚¹èµé€šçŸ¥ï¼Œæœ€æ–°çš„æœªè¯»æ¶ˆæ¯ä¼šé«˜äº®æ˜¾ç¤ºï¼Œç‚¹å‡»ç‚¹èµè€…å¤´åƒè¿›å…¥ä¸ªäººä¿¡æ¯é¡µé¢ï¼Œç‚¹å‡»æ–‡ç« æ ‡é¢˜è¿›å…¥ä½ çš„æ–‡ç« è¯¦æƒ…é¡µé¢\n- å…³æ³¨è€…åˆ—è¡¨ï¼šæ”¶åˆ°å…³æ³¨è€…çš„é€šçŸ¥ï¼Œæœ€æ–°æœªè¯»æ¶ˆæ¯ä¼šé«˜äº®æ˜¾ç¤ºï¼Œç‚¹å…³æ³¨æŒ‰é’®ä¹Ÿå¯å…³æ³¨ä»–ï¼Œå†ç‚¹å‡»å–æ¶ˆå…³æ³¨\n- ç³»ç»Ÿæ¶ˆæ¯ï¼šç›®å‰è¿˜æ²¡æœ‰åšåŠŸèƒ½å®ç°\n\n![no-shadow](https://cdn.lishaoy.net/adonisjs/notification.gif \"Notification\" )\n\n### å·¥å…·æ åˆ—è¡¨\n\nç‚¹å‡»ä¸ªäººå¤´åƒå¯å±•å¼€å·¥å…·æ åˆ—è¡¨ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n\n- å†™æ–‡ç« ï¼šç‚¹å‡»å¯æ–°å»ºæ–‡ç« ç¼–è¾‘é¡µé¢ï¼Œå’Œ â• å°å›¾æ ‡æ˜¯åŒæ ·åŠŸèƒ½\n- ä¸Šä¼ æ–‡ä»¶ï¼šç‚¹å‡»å¯æ‰“å¼€æ–‡ä»¶ä¸Šä¼ é¡µé¢ï¼Œå’Œä¸Šä¼ å°å›¾æ ‡æ˜¯åŒæ ·åŠŸèƒ½\n- ä¸ªäººä¿¡æ¯ï¼š ç‚¹å‡»å¯è¿›å…¥ä¸ªäººä¿¡æ¯é¡µé¢\n- å·²èµï¼šç‚¹å‡»å¯æŸ¥çœ‹å·²èµè¿‡å¾—æ–‡ç« \n- è®¾ç½®ï¼šç‚¹å‡»å¯æ‰“å¼€ä¸ªäººè®¾ç½®é¡µé¢\n- ç™»å‡ºï¼šç‚¹å‡»é€€å‡ºç™»å½•\n\n![no-shadow](https://cdn.lishaoy.net/adonisjs/tool_menu.png \"Tool Menu\" )\n\n### è®¾ç½®\n\nç‚¹å‡»å·¥å…·æ ä¸Šçš„è®¾ç½®æŒ‰é’®å¯ä»¥è®¾ç½®é¡µé¢ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n\n**ä¸ªäººä¿¡æ¯è®¾ç½®**\n\n- å¤´åƒï¼šå¤´åƒæ˜¯ä½¿ç”¨çš„ `Gravatar` æä¾›çš„åŠŸèƒ½ï¼Œæ ¹æ®é‚®ç®±ç”Ÿæˆå¤´åƒ\n- ç”¨æˆ·å\n- é‚®ç®±ï¼šå·²éªŒè¯é€šè¿‡ä¼šæ˜¾ç¤ºéªŒè¯å°å›¾æ ‡ï¼Œæ²¡æœ‰é€šè¿‡çš„ä¼šæ˜¾ç¤ºæç¤º\n- GitHubï¼šåªéœ€å¡«å†™æœ‰æˆ·å\n- ä¸ªäººç®€ä»‹ï¼šæ”¯æŒemoji\n- ä¸ªäººç½‘ç«™\n\n![no-shadow](https://cdn.lishaoy.net/setting_profile.png \"Setting Profile\" )\n\n**ä¿®æ”¹å¯†ç è®¾ç½®**\n\néœ€å¡«å†™åŸå¯†ç ï¼Œæ–°å¯†ç ï¼Œå†æ¬¡è¾“å…¥å¯†ç \n\n![no-shadow](https://cdn.lishaoy.net/setting_pwd.png \"Setting Password\" )\n\n### èŠå¤©å®¤\n\nç‚¹å‡» **Chatroom** é“¾æ¥å¯è¿›å…¥èŠå¤©å®¤ï¼Œå½“ç„¶è¿™ä¸ªæ˜¯ç”¨çš„ `websocket` åšçš„ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n\n- çŠ¶æ€å›¾æ ‡ï¼šæ˜¾ç¤ºé“¾æ¥çŠ¶æ€\n- æ´»åŠ¨ç”¨æˆ·ï¼šå·¦ä¾§é»‘è‰²åŒºåŸŸä¼šåŠ¨æ€æ˜¾ç¤ºæ´»åŠ¨ç”¨æˆ·\n- æ¶ˆæ¯ï¼šä¼šæ˜¾ç¤ºå‘é€æ¶ˆæ¯ï¼Œè¿›å…¥ã€ç¦»å¼€æˆ¿é—´é€šçŸ¥æ¶ˆæ¯ï¼ˆæ”¯æŒåŒ¿åå‘é€æ¶ˆæ¯ï¼Œä½†ä¸ä¼šä¿å­˜æ¶ˆæ¯ï¼‰\n- æ¶ˆæ¯è¾“å…¥ï¼šæ¶ˆæ¯è¾“å…¥æ¡†å¯è¾“å…¥æ¶ˆæ¯ï¼Œ<kbd>Cmd</kbd> â€” <kbd>Enter</kbd> æ¢è¡Œï¼ˆWindowsä¼šæ˜¾ç¤ºæç¤ºCtrl+Enterï¼‰ï¼Œå›è½¦å‘é€æ¶ˆæ¯\n\n![no-shadow](https://cdn.lishaoy.net/adonisjs/chatroom1.gif \"Chart Room\" )\n\nåŠ å…¥æˆ¿é—´å’Œç¦»å¼€æˆ¿é—´éƒ½æœ‰æ¶ˆæ¯é€šçŸ¥ï¼Œå¦‚å›¾\n\n![no-shadow](https://cdn.lishaoy.net/adonisjs/chatroom.png \"Chart Room\" )\n\n## Node.js æ¡†æ¶\n\nè¿™ä¸ªåº”ç”¨çš„å¼€å‘æˆ‘é€‰æ‹©çš„æ˜¯ `Adonisjs` æ¡†æ¶ï¼Œä»–å’Œ `PHP` çš„ `Laravel` æœ‰äº›åƒï¼Œ`Adonisjs` æ˜¯åœ¨æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œçš„ `Node.js` **MVC** æ¡†æ¶ã€‚\n\næ¥ä¸‹æ¥ï¼Œæ¥çœ‹çœ‹ `Adonisjs` æ¡†æ¶æœ‰å“ªäº›ç‰¹æ€§ï¼š\n\n### ç¯å¢ƒå®‰è£…ç®€å•\n\nä¸ç®¡æ˜¯å¼€å‘ç¯å¢ƒè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œå®‰è£… `Adonisjs` è¿è¡Œç¯å¢ƒéƒ½æ˜¯éå¸¸ç®€å•ï¼Œå…ˆæ¥çœ‹çœ‹å¼€å‘ç¯å¢ƒçš„å®‰è£…ï¼Œç”Ÿäº§ç¯å¢ƒåé¢ä¼šæåˆ°ã€‚\n\né¦–å…ˆï¼Œæˆ‘ä»¬çš„ç”µè„‘ä¸Šéœ€è¦å®‰è£…å¥½ `Node.js`å¤§äº *8.00* ç‰ˆæœ¬ï¼Œç®¡ç† `Node.js` å¯ä»¥ä½¿ç”¨ `nvm`\n\nå…¶æ¬¡ï¼Œå°±å¯ä»¥ä½¿ç”¨ `npm` å®‰è£… `Adonis CLI` å‘½ä»¤è¡Œå·¥å…·ï¼ˆç®¡ç† `npm` ä½¿ç”¨æºå¯ä»¥ä½¿ç”¨ `nrm`ï¼‰\n\n```bash\nnpm i -g @adonisjs/cli\n```\n\nè¿™æ ·å°±å¯ä»¥åœ¨å…¨å±€ä½¿ç”¨ `adonis` å‘½ä»¤\n\nå†æ¬¡ï¼Œå¯ä»¥æ˜¯ `adonis new` å‘½ä»¤åˆ›å»ºé¡¹ç›®\n\n```bash\nadonis new adonis_pro\n```\n\nåœ¨ `cd` è¿›å…¥é¡¹ç›®ï¼Œæ‰§è¡Œ `adonis serve --dev` è¿è¡Œé¡¹ç›®\n\n```bash\ncd adonis_pro\nadonis serve --dev\n```\n\nè¿™æ ·æ‚¨çš„å¼€å‘ç¯å¢ƒå°±æ­å»ºå®Œæˆã€‚\n\n### RMVC\n\n`RMVC` å°±æ˜¯è·¯ç”±ã€æ¨¡å‹ã€è§†å›¾ã€æ§åˆ¶å™¨ã€‚\n\n#### è·¯ç”±\n\nåˆ›å»ºä¸€æ¡è·¯ç”±éå¸¸ç®€å•ï¼Œå¦‚ \n\n```js\nRoute.get('liked/:userId/:postId', 'LikedController.liked')\n```\n\nè¿™æ¡è·¯ç”±å°±æ˜¯ç”¨æ¥å¤„ç†ä¸Šé¢æåˆ°çš„ç‚¹èµåŠŸèƒ½çš„\n\nå½“ç„¶ï¼Œ`Adonisjs` æä¾›äº† **èµ„æºè·¯ç”±** ä»¥ä¾¿æ‚¨æ›´æ–¹ä¾¿çš„åˆ›å»ºè·¯ç”±ï¼Œä¾‹å¦‚\n\n```js\nRoute.resource('posts', 'PostController').middleware(\n\tnew Map([\n\t\t[ [ 'create', 'store', 'edit', 'update', 'destroy' ], [ 'auth' ] ],\n\t\t[ [ 'update', 'destroy', 'edit' ], [ 'own:post' ] ]\n\t])\n).validator(new Map([\n  [['posts.update', 'posts.store'], ['StorePost']]\n]))\n```\n\nè¿™ä¸ªè·¯ç”±æ˜¯æ¥å¤„ç†ä¸Šé¢åº”ç”¨æåˆ°çš„æ–‡ç« çš„ *å¢ã€åˆ ã€æ”¹ã€æŸ¥* ï¼Œè¿™ä¸ªå¯èƒ½æœ‰äº›å¤æ‚ï¼Œä½¿ç”¨äº† **ä¸­é—´ä»¶** æ¥å¤„ç†ç”¨æˆ·ç™»å½•çŠ¶æ€å’Œæ“ä½œæƒé™ï¼Œä½¿ç”¨äº† **éªŒè¯å™¨** æ¥å¤„ç†è¡¨å•éªŒè¯ï¼Œè¿™é‡Œä¸ä»‹ç»çš„å¤ªå¤æ‚ï¼Œå¦‚æƒ³äº†è§£è¿™äº›å…·ä½“åŠŸèƒ½ï¼Œå¯ä»¥éœ€è¦èŠ±ç‚¹æ—¶é—´äº†è§£å­¦ä¹ ã€‚\n\næˆ‘ä»¬å¯ä»¥å»æ‰ **ä¸­é—´ä»¶** å’Œ **éªŒè¯å™¨** ï¼Œå¦‚ä¸‹ï¼š\n\n```js\nRoute.resource('posts', 'PostController')\n```\n\nè¿™æ¡èµ„æºè·¯ç”±ï¼Œå…¶å®å°±åŒ…å«äº†ä»¥ä¸‹è·¯ç”±ï¼š\n\n```js\nRoute.get(url, closure)\nRoute.post(url, closure)\nRoute.put(url, closure)\nRoute.patch(url, closure)\nRoute.delete(url, closure)\n```\n\n`Adonisjs` è¿˜æä¾›äº†è·¯ç”±ç»„å’Œå…¶ä»–ä¸€äº›åŠŸèƒ½ï¼Œè·¯ç”±ç»„å¦‚ä¸‹ï¼š\n\n```js\nRoute.group(() => {\n\tRoute.get('profile', 'ProfileController.edit').as('profile.edit')\n\tRoute.post('profile', 'ProfileController.update').as('profile.update').validator('UpdateProfile')\n\tRoute.get('password', 'PasswordController.edit').as('password.edit')\n\tRoute.post('password', 'PasswordController.update').as('password.update').validator('UpdatePassword')\n})\n\t.prefix('settings')\n\t.middleware([ 'auth' ])\n```\n\nä½¿ç”¨ `.prefix` å’Œ `Route.group` æ¥åˆ›å»ºè·¯ç”±ç»„ï¼Œè¿™æ¡è·¯ç”±ç»„æ˜¯å¤„ç† ä¸ªäººä¿¡æ¯è®¾ç½® åŠŸèƒ½çš„ï¼Œè¿™æ ·è®¿é—®é¡µé¢æ˜¯å°±ç»Ÿä¸€è¦å¸¦ä¸Š `settings/**` ã€‚\n\n#### æ§åˆ¶å™¨\n\n`Adonisjs` æä¾›äº†å‘½ä»¤è¡Œæ¥åˆ›å»ºæ§åˆ¶å™¨ï¼Œå¦‚\n\n```bash\nadonis make:controller User --type http\n```\n\nè¿™æ ·å°±åˆ›å»ºäº†ä¸€ä¸ª `User` æ§åˆ¶å™¨,è‡ªåŠ¨ç”Ÿæˆä»£ç å¦‚ä¸‹ï¼š\n\n```js\n'use strict'\n\nclass UserController {\n}\n\nmodule.exports = UserController\n```\n\nå½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ `--resource` åˆ›å»ºèµ„æºç±»å‹çš„æ§åˆ¶å™¨\n\n```bash\nadonis make:controller Post --resource\n```\n\nè‡ªåŠ¨ç”Ÿæˆä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```js\n'use strict'\n\nclass PostController {\n /**\n   * Show a list of all posts.\n   * GET posts\n   */\nasync index ({ request, response, view }) {}\n\n /**\n   * Render a form to be used for creating a new posts.\n   * GET posts/create\n   */\nasync create ({ request, response, view }) {}\n\n /**\n   * Create/save a new posts.\n   * POST posts\n   */\nasync store ({ request, response, view }) {}\n /**\n   * Display a single posts.\n   * GET posts/:id\n   */\nasync show ({ request, response, view }) {}\n\n /**\n   * Render a form to update an existing posts.\n   * GET posts/:id/edit\n   */\nasync edit ({ request, response, view }) {}\n\n /**\n   * Update posts details.\n   * PUT or PATCH posts/:id\n   */\nasync update ({ request, response, view}) {}\n\n /**\n   * Delete a posts with id.\n   * DELETE posts/:id\n   */\nasync destroy ({ params, request, response }) {}\n}\n\nmodule.exports = PostController\n```\n\nå’Œä¸Šé¢çš„èµ„æºè·¯ç”±æ˜¯å¯¹åº”çš„ï¼Œå¦‚ç”¨ `GET` è¯·æ±‚è®¿é—® *posts* å°±ä¼šè°ƒç”¨ `index` æ–¹æ³•ï¼ˆä¸€èˆ¬ç”¨æ¥æ˜¾ç¤ºï¼‰ ï¼Œå†å¦‚ï¼šç”¨ `DELETE` è¯·æ±‚è®¿é—® *posts/1* å°±ä¼šæ‰§è¡Œ `destroy` æ–¹æ³•ï¼ˆä¸€èˆ¬ç”¨æ¥åˆ é™¤ï¼‰ã€‚\n\n#### æ¨¡å‹\n\n`Adonisjs` æä¾›äº†ä¸¤ç§æ¨¡å¼æ¥å¤„ç†æ•°æ®ï¼Œ`Query builder` å’Œ `LUCID`\n\né¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ `adonis make:migration` æ¥åˆ›å»ºæ•°æ®è¡¨\n\n```js\nadonis make:migration users\n```\n\nä¼šè‡ªåŠ¨ç”Ÿæˆä»£ç ï¼Œå¦‚ä¸‹ï¼š\n\n```js\n'use strict'\n\nconst Schema = use('Schema')\n\nclass UsersSchema extends Schema {\n  up () {\n    this.create('users', (table) => {\n      table.increments()\n      table.timestamps()\n    })\n  }\n\n  down () {\n    this.drop('users')\n  }\n}\n\nmodule.exports = UsersSchema\n```\n\nè¿™æ˜¯æˆ‘ä»¬åªéœ€åœ¨å…¶ä¸­æ·»åŠ æƒ³è¦çš„å­—æ®µå°±è¡Œï¼Œå¦‚ï¼š\n\n```js\n'use strict'\n\nconst Schema = use('Schema')\n\nclass UsersSchema extends Schema {\n  up () {\n    this.create('users', (table) => {\n      table.increments()\n      table.string('username', 80).notNullable().unique()\n      table.string('email', 254).notNullable().unique()\n      table.string('password', 60).notNullable()\n      table.timestamps()\n    })\n  }\n\n  down () {\n    this.drop('users')\n  }\n}\n\nmodule.exports = UsersSchema\n```\n\nåœ¨æ‰§è¡Œ `adonis migration:run` å‘½ä»¤å°±å¯ä»¥åœ¨æ•°æ®åº“ç”Ÿæˆæ•°æ®è¡¨\n\nå†æ¥çœ‹çœ‹ï¼Œå¦‚ä½•è·å–æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ `Query builder` å’Œ `LUCID` ä¸¤ç§æ–¹å¼\n\nå…ˆæ¥çœ‹çœ‹ `Query builder`ï¼š\n\n```js\nconst Database = use('Database')\n\nclass UserController {\n\n  async index (request, response) {\n    return await Database\n      .table('users')\n      .where('username', 'admin')\n      .first()\n  }\n\n}\n```\n\næŸ¥è¯¢ `user` è¡¨ `name` æ˜¯ `admin` çš„ç”¨æˆ·\n\n`Adonisjs` æä¾›äº†éå¸¸å¤šçš„æ–¹æ³•å»æ“ä½œæ•°æ®ï¼Œä¸æ˜¯ç‰¹å¤æ‚çš„å…³ç³»éƒ½å¤Ÿç”¨ï¼Œå¦‚æœï¼Œå…³ç³»æ¯”è¾ƒå¤æ‚ï¼Œè¿˜å¯ä»¥ç”¨åŸç”Ÿçš„ `sql` æ“ä½œï¼Œå¦‚\n\n```js\n'use strict'\n\nconst Database = use('Database')\n\n  class NotificationController {\n  async followNotice ({ auth, view }) {\n    const notices = await Database.raw('select users.id as user_id,users.username,users.email,b.title,b.created_at,b.is_read,b.id as post_id from adonis.users , (select posts.id,posts.title, a.user_id,a.created_at,a.is_read from adonis.posts,(SELECT post_user.post_id, post_user.user_id, post_user.created_at, post_user.is_read FROM adonis.post_user where post_user.post_id in (SELECT posts.id FROM adonis.posts where user_id = ?)) as a where posts.id = a.post_id) as b where b.user_id = users.id and b.user_id <> ? order by b.created_at desc limit 50',[ auth.user.id, auth.user.id ])\n  }\n}\n\nmodule.exports = NotificationController\n```\n\nä½¿ç”¨ `Database.raw` æ¥è¿è¡ŒåŸç”Ÿçš„ `sql`ï¼Œä»¥ä¸Šè¿™æ¡ `sql` æ˜¯ç”¨æ¥æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ç»™è‡ªå·±æ‰€æœ‰æ–‡ç« ç‚¹èµçš„ç”¨æˆ·ä¿¡æ¯å’Œæ–‡ç« ä¿¡æ¯ç”¨äºæ¶ˆæ¯é€šçŸ¥ã€‚\n\nå†æ¥çœ‹çœ‹ï¼Œ`LUCID` çš„æ¨¡å¼æ˜¯å¦‚ä½•æ“ä½œæ•°æ®çš„ï¼š\n\nä½¿ç”¨ `LUCID` æ¨¡å¼ï¼Œæˆ‘ä»¬å…ˆéœ€è¦ç”¨å‘½ä»¤è¡Œå·¥å…·åˆ›å»º `Models`ï¼Œå¦‚ï¼š\n\n```bash\nadonis make:model User\n```\n\nè‡ªåŠ¨ç”Ÿæˆä»£ç å¦‚ä¸‹ï¼š\n\n```js\n'use strict'\n\nconst Model = use('Model')\n\nclass User extends Model {\n}\n\nmodule.exports = User\n```\n\næ¨¡å‹å’Œæ¨¡å‹ä¹‹é—´éœ€è¦å®šä¹‰ä¸€äº›å…³ç³»ï¼Œå¦‚ï¼š\n\n```js\nconst Model = use('Model')\n\nclass User extends Model {\n  profile () {\n    return this.hasOne('App/Models/Profile')\n  }\n}\n\nmodule.exports = User\n```\n\næ„æ€æ˜¯ ä¸€ä¸ªç”¨æˆ·å¯¹åº”ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯æ¡£æ¡ˆï¼Œ**ä¸€å¯¹ä¸€** çš„å…³ç³»\n\nå®šä¹‰å¥½å…³ç³»ä¹‹åï¼Œå°±å¯ä»¥æ–¹ä¾¿çš„è·å–æ•°æ®ï¼Œå¦‚ï¼š\n\n```js\nconst User = use('App/Models/User')\n\nconst user = await User.find(1)\nconst userProfile = await user.profile().fetch()\n```\n\næ„æ€æ˜¯ï¼Œä»ç”¨æˆ·è¡¨å’Œç”¨æˆ·ä¸ªäººä¿¡æ¯è¡¨é‡Œè·å–ç”¨æˆ· `id` æ˜¯ `1` çš„ç”¨æˆ·ä¿¡æ¯åŠä¸ªäººä¿¡æ¯ï¼Œ\n\nå…¶ä¸­ï¼Œå…³ç³»å¯ä»¥å®šä¹‰ä¸º **3** ç§ **ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤š** ï¼Œå¤šå¯¹å¤šéœ€è¦å®šä¹‰ä¸­é—´è¡¨\n\nå†æ¥çœ‹çœ‹ï¼Œä¸Šé¢çš„åº”ç”¨ä¸­çš„å®é™…åº”ç”¨ï¼Œå¦‚ï¼š\n\n```js\nasync update ({ params, request, response, session, auth }) {\n  const { title, content, user_id, tags } = request.all()\n\n  const post = await Post.findOrFail(params.id)\n  post.merge({ title, content})\n  await post.save()\n\n  await post.tags().sync(tags)\n\n  session.flash({\n    type: 'primary',\n    message: 'Post updated successfully.'\n  })\n\n  return response.redirect(\n    Route.url('PostController.show', {\n      id: post.id\n    })\n  )\n}\n```\n\nä»¥ä¸Šï¼Œæ˜¯æ›´æ–°æ–‡ç« çš„æ–¹æ³•ï¼Œ**æ–‡ç« ** å’Œ **æ ‡ç­¾** æ˜¯ **å¤šå¯¹å¤š** çš„å…³ç³»ï¼Œä¸€ä¸ªæ ‡ç­¾å¯ä»¥å±äºå¤šç¯‡æ–‡ç« ï¼Œä¸€ç¯‡æ–‡ç« å¯ä»¥æœ‰å¤šä¸ªæ ‡ç­¾ï¼Œ`await post.tags().sync(tags)` è¿™å¥ä»£ç å°±å¯ä»¥é€šè¿‡ `Models` é‡Œå®šä¹‰çš„å…³ç³»è‡ªåŠ¨æŠŠæ ‡ç­¾å’Œæ–‡ç« å…³è”èµ·æ¥ä¿å­˜åˆ° `posts` å’Œ `tags` è¡¨é‡Œä¸”æŠŠå…³è”å…³ç³»ä¿å­˜åˆ°ä¸­é—´è¡¨ `post_tag`ã€‚\n\nå½“ç„¶ï¼Œ`Adonisjs` æä¾›äº†å¾ˆå¤šæ–¹ä¾¿çš„æ–¹æ³•ï¼Œæƒ³äº†è§£æ›´å¤šçš„è¯éœ€è¦æ‚¨èŠ±ç‚¹æ—¶é—´å»äº†è§£å­¦ä¹ ã€‚\n\n#### è§†å›¾\n\n`Adonisjs` æ¡†æ¶é‡Œè§†å›¾ä½¿ç”¨äº† `edge` æ¨¡æ¿ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·åˆ›å»ºè§†å›¾æ–‡ä»¶ï¼Œå¦‚ï¼š\n\n```bash\nadonis make:view post\n```\n\næˆ‘çœ‹å¯ä»¥çœ‹ä¸‹ç®€å•çš„ä¾‹å­ï¼š\n\n```html\n@loggedIn\n  <h2> You are logged in </h2>\n@else\n  <p> <a href=\"/login\">Click here</a> to login </p>\n@endloggedIn\n```\nè§†å›¾æ¨¡æ¿é‡Œå¯ä»¥ä½¿ç”¨æ ‡ç­¾æ¥åšé€»è¾‘åˆ¤æ–­ï¼Œè§†å›¾æ¨¡æ¿å°±æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼ŒåŸºæœ¬éƒ½æ˜¯é€šç”¨çš„ï¼Œå…³äº `edge` è§†å›¾æ¨¡æ¿æ›´å¤šè¯­æ³• [Edgeå®˜æ–¹æ–‡æ¡£](https://edge.adonisjs.com/docs/syntax-guide)\n\næœ€åï¼Œ`Adonisjs` æ¡†æ¶è¿˜æä¾›äº†å¾ˆå¤šå…¶å®ƒçš„å®ç”¨å·¥å…·ï¼Œå¦‚ï¼š`Middleware` ä¸­é—´ä»¶ã€`Validator` éªŒè¯å™¨ã€`Error Handling` è‡ªå®šä¹‰å¼‚å¸¸ã€`Events` äº‹ä»¶ã€`Mails` é‚®ä»¶ã€`Websocket` ç­‰æ¥å¤„ç†å„ç§é—®é¢˜ã€‚\n\n## Node.jsé¡¹ç›®å‘å¸ƒåˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨\n\né¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç”¨ `ssh` è¿æ¥åˆ°é˜¿é‡Œäº‘ï¼ˆæˆ–è€…å…¶ä»–æœåŠ¡å™¨ä¾›åº”å•†ï¼‰çš„ä¸»æœºä¸Šï¼Œå®‰è£…ä¸€äº›å¿…è¦çš„å·¥å…·ã€‚\n\n### å·¥å…·å®‰è£…\n\n#### å®‰è£… epel-release è½¯ä»¶åŒ…ä»“åº“\n\næˆ‘ä»¬éœ€è¦å®‰è£… `epel-release` è½¯ä»¶åŒ…ä»“åº“ï¼Œ`epel-release` é‡Œé¢æœ‰å¾ˆå¤šæœ€æ–°çš„è½¯ä»¶åŒ…ï¼Œå¦‚ï¼Œä¹‹åå®‰è£…çš„ `git` å°±ä¼šç”¨åˆ°\n\n```bash\nsudo yum install epel-release - y\n```\n\n#### å®‰è£… Git ç‰ˆæœ¬æ§åˆ¶å‘½ä»¤è¡Œå·¥å…·\n\n```\nsudo yum install git -y\n```\n\n### å‡†å¤‡ Node.js è¿è¡Œç¯å¢ƒ\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… `Node.js` ä»¥ä¾¿æˆ‘ä»¬çš„ `Node.js` é¡¹ç›®èƒ½å¤Ÿè·‘èµ·æ¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `nvm` å®‰è£…å’Œç®¡ç† `Node.js` ï¼Œä½¿ç”¨ `nrm` æ¥ç®¡ç†åˆ‡æ¢å®‰è£…æºã€‚\n\n#### å®‰è£… nvm\n\n```bash\ncurl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash\n```\n\nå®‰è£…å¥½ä¹‹å,æˆ‘ä»¬éœ€è¦é…ç½®ä¸‹ç¯å¢ƒå˜é‡ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨å‘½ä»¤è¡Œä½¿ç”¨ `nvm` å‘½ä»¤ï¼Œç”¨ `vi ~/.bash_profile` ç¼–è¾‘ä¸‹é…ç½®æ–‡ä»¶\n\n```bash\nvi ~/.bash_profile\n```\n\nåŠ å…¥ä»¥ä¸‹ä»£ç ï¼š\n\n```bash\nexport NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\" ] && \\. \"$NVM_DIR/nvm.sh\"\n[ -s \"$NVM_DIR/bash_completion\" ] && \\. \"$NVM_DIR/bash_completion\"\n```\n\nç„¶åï¼Œåœ¨ `source ~/.bash_profile` åˆ·æ–°ä¸‹é…ç½®æ–‡ä»¶ï¼Œè®©å®ƒç”Ÿæ•ˆ\n\n```bash\nsource ~/.bash_profile\n```\n\næ­¤æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ `nvm` æ¥å®‰è£… `Node.js`\n\n```bash\nnvm install node\n```\n\nå®‰è£…å¥½åï¼Œå¯ä»¥ä½¿ç”¨ `nvm list` æ¥æŸ¥çœ‹æœ‰å“ªäº›ç‰ˆæœ¬å¯ä»¥ä½¿ç”¨\n\n```bash\nnvm list\n```\n\nç»“æœï¼š\n\n```bash\n->     v10.13.0\n        v11.2.0\n         system\ndefault -> v10.13.0\nnode -> stable (-> v11.2.0) (default)\nstable -> 11.2 (-> v11.2.0) (default)\niojs -> N/A (default)\nlts/* -> lts/dubnium (-> v10.13.0)\nlts/argon -> v4.9.1 (-> N/A)\nlts/boron -> v6.14.4 (-> N/A)\nlts/carbon -> v8.13.0 (-> N/A)\nlts/dubnium -> v10.13.0\n```\n\næˆ‘ä½¿ç”¨çš„æ˜¯ *v10.13.0* çš„ç‰ˆæœ¬ï¼Œé»˜è®¤å®‰è£…çš„éƒ½æ˜¯æ¯”è¾ƒæ–°çš„ç‰ˆæœ¬ï¼Œå¯èƒ½æ˜¯ *v11.2.0* æˆ– *v11.1.0*ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ `nvm install v10.13.0` æ¥å®‰è£…æŒ‡å®šç‰ˆæœ¬ã€‚\n\n```bash\nnvm install v10.13.0\n```\n\nç„¶åï¼Œå°±å¯ä»¥ä½¿ç”¨ `nvm use  v10.13.0` æ¥ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬\n\n```bash\nnvm use nvm v10.13.0\n```\n\nç»“æœï¼š\n\n```bash\nNow using node v10.13.0 (npm v6.4.1)\n```\n\n#### å®‰è£… nrm ç®¡ç†å®‰è£…æº\n\nä½¿ç”¨ npm å®‰è£…çš„ç¨‹åºåŒ…ï¼Œé»˜è®¤çš„æ¥æºæ˜¯ [http://registry.npmjs.org](http://registry.npmjs.org)ï¼Œå›½å†…çš„ä¸‹è½½é€Ÿåº¦ä¼šæœ‰äº›æ…¢ï¼Œæˆ‘ä»¬å¯ä»¥æ˜¯ `nrm` æ¥åˆ‡æ¢åˆ° `taobao` çš„æº\n\n**å®‰è£… nrm**\n\n```bash\nnpm install nrm --global\n```\n\n**åˆ‡æ¢åˆ° taobao æº**\n\n```bash\nnrm use taobao\n```\n\n### å‡†å¤‡é¡¹ç›®\n\nä»¥ä¸Šå·¥ä½œå®Œæˆä¹‹åï¼Œæˆ‘ä»¬çš„æœåŠ¡å™¨å°±å¯ä»¥æ­£å¸¸è¿è¡Œ `Node.js` é¡¹ç›®ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦æŠŠæœ¬åœ°çš„é¡¹ç›®ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œä¸Šä¼ æ–¹æ³•æœ‰å¾ˆå¤šï¼Œå¦‚ï¼š\n\n- å¯ä»¥ä½¿ç”¨ `git`ï¼Œå…ˆæŠŠé¡¹ç›®ä¼ åˆ° **GitHub**ï¼Œç„¶åç”¨ `git` ä¸‹è½½åˆ°æœåŠ¡å™¨\n- å¯ä»¥æ˜¯ **FTP** å·¥å…·\n- å¯ä»¥æ˜¯å‘½ä»¤ä¸Šä¼  `scp -r æœ¬åœ°ç›®å½•  root@æœåŠ¡å™¨IP:/var/www/`\n\nå‘é¡¹ç›®æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„æŒ‡å®šç›®å½•ä¸‹ï¼Œå¦‚ï¼š`www`\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥æ˜¯ **PM2** æ¥ç®¡ç† **Node** è¿›ç¨‹ï¼Œå…ˆéœ€è¦å®‰è£… **PM2**\n\n#### å®‰è£…PM2\n\n```bash\nnpm install pm2@latest --global\n```\n\nè¿™äº›å·¥ä½œä½œä¸ºä¹‹åï¼Œå°±å¯ä»¥æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œå¯åŠ¨é¡¹ç›®ï¼Œåœ¨æœ¬åœ°è®¿é—®æœåŠ¡å™¨ `IP:PORT` æ¥æµ‹è¯•æ˜¯å¦å¯ä»¥è®¿é—®\n\n#### æµ‹è¯•é¡¹ç›®æ˜¯å¦å¯ä»¥è¿è¡Œ\n\nåœ¨æµ‹è¯•ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ”¹ä¸‹åº”ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œ`adonisjs` æ¡†æ¶é‡Œæ˜¯ `.env` æ–‡ä»¶ï¼Œä¿®æ”¹ä¸‹ `HOST` çš„å€¼ï¼š\n\n```bash\nHOST=0.0.0.0\nPORT=3333\n...\n```\n\n`HOST` é»˜è®¤æ˜¯ *127.0.0.1*ï¼Œéœ€è¦æ”¹æˆ *0.0.0.0* è¿™æ ·å°±å¯ä»¥åœ¨è‡ªå·±ç”µè„‘ä¸Šç”¨æœåŠ¡å™¨ `IP:PORT` æ¥è®¿é—®åº”ç”¨\n\næ”¹å®Œåï¼Œè¿›å…¥åˆ°é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œè¿è¡Œåº”ç”¨ï¼Œ`adonisjs` çš„å¯åŠ¨æ–‡ä»¶æ˜¯ `server.js`ï¼Œå¦‚ï¼š\n\n```bash\npm2 start server.js\n```\n\nå¦‚å¯åŠ¨æˆåŠŸä¼šæç¤ºï¼š\n\n```bash\n[PM2] Applying action restartProcessId on app [server](ids: 0)\n[PM2] [server](0) âœ“\n[PM2] Process successfully started\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ App name â”‚ id â”‚ version â”‚ mode â”‚ pid  â”‚ status â”‚ restart â”‚ uptime â”‚ cpu â”‚ mem      â”‚ user â”‚ watching â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ server   â”‚ 0  â”‚ 4.1.0   â”‚ fork â”‚ 7171 â”‚ online â”‚ 30      â”‚ 0s     â”‚ 0%  â”‚ 3.4 MB   â”‚ root â”‚ disabled â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n Use `pm2 show <id|name>` to get more details about an app\n```\n\nç„¶åï¼Œåœ¨è‡ªå·±ç”µè„‘ä¸Šç”¨æœåŠ¡å™¨ `IP:PORT` æ¥è®¿é—®åº”ç”¨ã€‚\n\n### Nginx ä»£ç†\n\nä¸ºäº†è®©æœåŠ¡å™¨æ›´å¥½åœ°å¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä½¿ç”¨ **Nginx åå‘ä»£ç†** æŠŠè¯·æ±‚è½¬å‘ç»™ `Node.js` åº”ç”¨\n\n#### å®‰è£… Nginx\n\n```bash\nsudo yum install nginx -y\n```\n\nå¦‚æœä½ çš„æœåŠ¡ä¹‹å‰å®‰è£…è¿‡å¯ä¸ç”¨å®‰è£…ï¼Œæˆ‘çš„é˜¿é‡Œäº‘æœåŠ¡å™¨è¿è¡Œäº† 4 ä¸ªç«™ç‚¹ä¹‹å‰å®‰è£…è¿‡ï¼Œä¹‹åæˆ‘åªéœ€æ·»åŠ é…ç½®å°±è¡Œã€‚\n\n#### å¯åŠ¨ Nginx\n\n```bash\nsudo systemctl start nginx\n```\n\n#### é…ç½® Nginx\n\nä¸€èˆ¬æƒ…å†µ **Nginx** å®‰è£…å¥½åä¼šæœ‰ */etc/nginx/conf.d*  ç›®å½•ï¼Œè¿›å…¥è¿™ä¸ªç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸º `Node.js` è€Œå‡†å¤‡ï¼Œåå­—å¯éšæ„å‘½åï¼Œå¦‚ï¼š`adonis.conf`\n\n```bash\nserver {\n  listen 80;\n  location / {\n      proxy_pass http://127.0.0.1:3333;\n      proxy_http_version 1.1;\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection 'upgrade';\n      proxy_set_header Host $host;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_set_header X-Forwarded-Proto $scheme;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n      proxy_cache_bypass $http_upgrade;\n  }\n}\n```\n\nç„¶åï¼Œåœ¨ **Nginx** çš„ä¸»é…ç½®æ–‡ä»¶é‡ŒæŠŠåˆšæ‰æ–°åˆ›å»ºçš„é…ç½®æ–‡ä»¶ï¼ˆ*/etc/nginx/nginx.conf*ï¼‰ `include` è¿›å»å°±å¯ä»¥,å¦‚ï¼š\n\n```bash\ninclude /etc/nginx/conf.d/*.conf;\n```\n\nå› ä¸ºï¼Œæˆ‘çš„ä¸»æœºé‡Œè¿è¡Œäº†4ä¸ªç«™ç‚¹ï¼Œ`*` çš„æ„æ€å°±æ˜¯åŠ è½½è¿™ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰é…ç½®æ–‡ä»¶\n\nç„¶åï¼Œè®°å¾—æŠŠåˆšæ‰é¡¹ç›®é‡Œçš„ *.env* é…ç½®æ–‡ä»¶æ”¹æˆ *127.0.0.1* ï¼Œå› ä¸ºæˆ‘ä»¬ç°åœ¨ä½¿ç”¨äº†ä»£ç†ï¼Œç½‘ç»œè¯·æ±‚äº¤ç»™äº† **Nginx**\n\nå†è¿›å…¥åˆ°é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹è¿è¡Œï¼š\n\n```bash\npm2 stop server.js #åœæ­¢é¡¹ç›®\npm2 start server.js #å¯åŠ¨é¡¹ç›®\n```\n\nè¿™æ—¶å€™å†ç”¨æœåŠ¡å™¨ **IP** è®¿é—®å°±æ˜¯ç”¨çš„ **Nginx** å»å¤„ç†è¯·æ±‚\n\n#### åŸŸåå’ŒSSL\n\nå¦‚æœä½ æœ‰åŸŸåå¯ä»¥å»å¯¹åº”çš„ä¾›åº”å•†è§£æå¥½ï¼Œå¦‚æƒ³ä½¿ç”¨ `https` åè®®ï¼Œä¹Ÿå¯ä»¥å»å¯¹åº”çš„ä¾›åº”å•†ä¸‹è½½å¥½è¯ä¹¦ï¼ˆä¸‹è½½å¥½çš„è¯ä¹¦è¦æ”¾åˆ°æœåŠ¡å™¨æŸä¸ªç›®å½•é‡Œï¼‰ã€‚\n\nå†ä¿®æ”¹ä¸‹åˆšæ‰åˆ›å»ºçš„é…ç½®æ–‡ä»¶ï¼Œè®©å®ƒèƒ½å¤Ÿæ”¯æŒ `https` å’Œ åŸŸå è®¿é—®ï¼š\n\n```bash\nserver {\n  listen 80;\n      listen 443 ssl http2; #SSL\n  server_name a.lishaoy.net; #åŸŸå\n  ssl on;\n\n  ssl_certificate /etc/letsencrypt/live/a.lishaoy.net/server.pem; #è¯ä¹¦ç›®å½•\n  ssl_certificate_key /etc/letsencrypt/live/a.lishaoy.net/server.key; #è¯ä¹¦ç›®å½•\n  ssl_protocols TLSv1.1 TLSv1.2;\n  ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;\n  ssl_prefer_server_ciphers on;\n  ssl_session_cache shared:SSL:10m;\n  ssl_session_timeout 10m;\n  if ($ssl_protocol = \"\") {\n    rewrite ^(.*) https://$host$1 permanent;\n  }\n  error_page 497  https://$host$request_uri;\n\n  error_page 404 /404.html;\n  error_page 502 /502.html;\n\n  location / {\n      proxy_pass http://localhost:3333;\n      proxy_http_version 1.1;\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection 'upgrade';\n      proxy_set_header Host $host;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_set_header X-Forwarded-Proto $scheme;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n      proxy_cache_bypass $http_upgrade;\n  }\n}\n```\n\nè¿™æ ·å†é‡å¯ `Ningx` æœåŠ¡å’Œé¡¹ç›®çš„æœåŠ¡ï¼Œå°±å¤§åŠŸå‘Šæˆäº†ã€‚","tags":["adonis"],"categories":["Node"]},{"title":"Flutterï¼šæ‰‹æ‹‰æ‰‹å¸¦ä½ æé€Ÿæ„å»ºæ¼‚äº®çš„è·¨å¹³å°ç§»åŠ¨åº”ç”¨ âœ¿ åˆä½“éªŒï¼ˆå®æˆ˜ï¼‰","url":"%2FfristFlutter.html","content":"\n{% li https://cdn.lishaoy.net/fristFlutter/flutterCover7.png, Flutter, Flutter %}\n\næˆ‘ä»¬ä¸Šç¯‡æ–‡ç« å·²ç»æŠŠ **Flutter** çš„å¼€å‘è¿è¡Œç¯å¢ƒæ­å»ºå¥½äº† [Flutterï¼šç¯å¢ƒæ­å»º](https://h.lishaoy.net/flutterInstall.html) ï¼Œæœ¬ç¯‡æ–‡ç« å°†å®Œæˆæ‚¨çš„ç¬¬ä¸€ä¸ª **Flutter** å°åº”ç”¨ï¼Œä¸ç”¨ä½†æ˜¯ä¸ä¼šï¼Œè·Ÿç€æ–‡ç« åšå°±è¡Œï¼Œå¼€å§‹ä¸å¿…å¤ªçº ç»“è¿™äº›ä»£ç ç»†èŠ‚ï¼Œæ˜ç™½å®ƒæ˜¯å¹²ä»€ä¹ˆçš„å°±è¡Œï¼Œåªæ˜¯ä¸€ä¸ªä½¿ç”¨ä½“éªŒï¼Œä½“éªŒ **Flutter** æ¡†æ¶ç»™ä½ å¸¦æ¥çš„å¼€å‘æ„Ÿå—ï¼Œåé¢ä¼šæœ‰å…·ä½“çš„ç»„ä»¶ï¼ˆwidgetï¼‰çš„æ–‡ç« ã€‚\n\n<hr />\n\n<!-- more -->\n\n## åˆ›å»ºé¡¹ç›®\n\nåœ¨ä¸Šç¯‡æ–‡ç« æˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ª Flutter é¡¹ç›® {% label success@new_flutter %}ï¼Œå¦‚æœæ‚¨è¿˜æ²¡æœ‰åˆ›å»ºï¼Œå¯ä»¥åœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n\n```bash\ncd ~/desktop #è¿›å…¥æ¡Œé¢\nflutter create new_flutter #åˆ›å»º Flutter é¡¹ç›®\ncd new_flutter #è¿›å…¥é¡¹ç›®\ncode ./ #ç”¨ VS Code æ‰“å¼€\n```\n\nç”¨ VS Code æ‰“å¼€é¡¹ç›®åï¼ŒæŒ‰ **F5** é€‰æ‹©æ¨¡æ‹Ÿå™¨è¿è¡Œé¡¹ç›®çœ‹çœ‹æ•ˆæœï¼Œè¿™äº›æ“ä½œåœ¨ä¸Šç¯‡æ–‡ç« éƒ½å·²ç»åšè¿‡äº†ï¼Œæ‚¨åº”è¯¥æœ‰äº›å°è±¡ï¼Œå¦‚æˆåŠŸçš„è¯ï¼Œä¼šçœ‹åˆ°å¦‚å›¾æ•ˆæœï¼š\n\n![no-shadow](https://cdn.lishaoy.net/flutterInstall/demo.png \"Flutter run\" )\n\nä¸Šå›¾ç•Œé¢æ˜¯ `flutter create` å‘½ä»¤åˆ›å»ºé¡¹ç›®æ—¶ï¼Œç»™æˆ‘ä»¬çš„æ¡ˆä¾‹ï¼ˆè®¡æ•°å™¨ï¼‰ï¼Œè¿™äº›ä»£ç åœ¨ *{% label default@ lib->main.dart %}* æ–‡ä»¶é‡Œï¼Œå¦‚ä½ å…³æ³¨çš„è¯å¯ä»¥çœ‹çœ‹è¿™äº›ä»£ç éƒ½åšäº†äº›ä»€ä¹ˆï¼Œä¸è¿‡ç°åœ¨æˆ‘ä»¬ä¸éœ€è¦è¿™äº›ä»£ç ï¼Œ<kbd>âŒ˜</kbd> - <kbd>A</kbd> å…¨é€‰åˆ é™¤ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±å†™ï¼Œå¦‚ä¸‹ï¼š\n\n```dart Dart https://h.lishaoy.net/fristFlutter.html#åˆ›å»ºé¡¹ç›® main.dart\nimport 'package:flutter/material.dart';\n\nvoid main() {\n  runApp(\n    Center(\n      child: Text(\n        'Hello',\n        textDirection: TextDirection.ltr,\n        style: TextStyle(fontSize: 36.0),\n      ),\n    )\n  );\n}\n```\n\nå†™å…¥ä»¥ä¸Šä»£ç ï¼ŒæŒ‰ <kbd>âŒ˜</kbd> - <kbd>â‡§</kbd> - <kbd>P</kbd> æ‰“å¼€ VS Code çš„å‘½ä»¤é¢æ¿ï¼Œæœç´¢ `hot restart` æ‰§è¡Œå‘½ä»¤ï¼Œæ•ˆæœå¦‚å›¾ï¼š\n\n<div style=\"padding: 0 30%;\">![no-shadow](https://cdn.lishaoy.net/fristFlutter/flutter_hello.png \"hello\" )</div>\n\n`main()` æ˜¯ Flutter çš„å…¥å£å‡½æ•°ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šæŠŠä»£ç å†™åœ¨é‡Œé¢ï¼Œæˆ‘ä»¬æ¥ä¿®æ”¹ä¸‹ä»£ç ï¼ˆè‡ªå®šä¹‰ widgetï¼‰ï¼š\n\n```dart Dart https://h.lishaoy.net/fristFlutter.html#åˆ›å»ºé¡¹ç›® main.dart\nimport 'package:flutter/material.dart';\n\nvoid main() => runApp(App());\n\nclass App extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Center(\n      child: Text(\n        'Hello',\n        textDirection: TextDirection.ltr,\n        style: TextStyle(fontSize: 36.0),\n      ),\n    );\n  }\n}\n```\n\nè¿è¡Œæ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œæˆ‘ä»¬è‡ªå®šä¹‰äº†ä¸€ä¸ª `StatelessWidget` ç±»å‹çš„ widget å« {% label primary@App %}ã€‚\n\n## æ–°å¢ Material AppBar\n\næˆ‘ä»¬å†æ¥ä¿®æ”¹ä¸‹ä»£ç ï¼Œè®©æˆ‘ä»¬çš„åº”ç”¨å»ä½¿ç”¨ {% label success@Material Design %} çš„ AppBar\n\n```dart Dart https://h.lishaoy.net/fristFlutter.html#æ–°å¢-Material-AppBar main.dart\nimport 'package:flutter/material.dart';\n\nvoid main() => runApp(App());\n\nclass App extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp(\n      home: Scaffold(\n        appBar: AppBar(\n          title: Text(\n            'lishaoy.net'.toUpperCase(),\n            style: TextStyle(letterSpacing: 3.0),\n          ),\n        ),\n        body: Hello(),\n      ),\n    );\n  }\n}\n\nclass Hello extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Center(\n      child: Text(\n        'Hello',\n        textDirection: TextDirection.ltr,\n        style: TextStyle(fontSize: 36.0),\n      ),\n    );\n  }\n}\n```\n\nè¿è¡Œæ•ˆæœå¦‚å›¾ï¼š\n\n<div style=\"padding: 0 30%;\">![no-shadow](https://cdn.lishaoy.net/fristFlutter/Appbar.png \"hello\" )</div>\n\n{% note success %}\n<i class=\"fa fa-fw fa-bell faa-horizontal animated faa-slow\" style=\"color: #009688;\"></i>**Tipï¼š**\n1. è‡ªå®šä¹‰äº†ä¸€ä¸ª Hello çš„ {% label info@StatelessWidget %} ç±»å‹çš„ widget\n2. æ–°å¢äº† MaterialApp ï¼Œè¿™é‡Œé¢å°±æœ‰æˆ‘ä»¬éœ€è¦ç”¨çš„ AppBar ï¼ˆMaterialApp é‡Œé¢æœ‰å¾ˆå¤š {% label info@Material Design %} é£æ ¼çš„ç»„ä»¶ï¼Œåé¢çš„æ–‡ç« æåˆ°ï¼‰\n3. Scaffold å¯ä»¥ç†è§£ä¸º MaterialApp å¸ƒå±€çš„æ¶å­ï¼Œ{% label info@Material Design %} é£æ ¼çš„ç»„ä»¶éƒ½ä¼šæ”¾åˆ°è¿™é‡Œé¢\n4. AppBar å°±æ˜¯é¡¶éƒ¨è“è‰²è¿™éƒ¨åˆ†ï¼ŒåŠ äº†ä¸€ä¸ª title è½¬ä¸ºå¤§å†™å’Œå¢åŠ è¯é—´è·\n5. body æ˜¯ä¸»æ˜¾ç¤ºåŒºï¼Œä¸‹é¢ç™½è‰²éƒ¨åˆ†ï¼Œæ”¾çš„æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ Hello å°éƒ¨ä»¶\n{% endnote %}  \n\n## æ–°å¢åˆ—è¡¨è§†å›¾ï¼ˆListViewï¼‰\n\nåœ¨æ–°å¢åˆ—è¡¨è§†å›¾ï¼ˆListViewï¼‰ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡ä¸€äº›æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ lib ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªç›®å½• model å’Œæ–‡ä»¶ {% label default@post.dart %}ï¼Œå¦‚å›¾ï¼š\n\n<img src=\"https://cdn.lishaoy.net/fristFlutter/model.png\" alt=\"post.dart\" width=\"26%\" title=\"post.dart\" align=\"center\">\n\nç„¶åï¼ŒæŠŠåœ¨ {% label success@GitHub %} å‡†å¤‡å¥½çš„ [post.dart](https://github.com/persilee/flutter_pro/blob/master/lib/model/post.dart) æ•°æ®æ”¾åˆ°é‡Œé¢ã€‚\n\nç°åœ¨æˆ‘ä»¬å†æ¥æ”¹è¿›ä¸‹ä»£ç ï¼Œè®©å®ƒæ›´å…·æœ‰ç»´æŠ¤æ€§ï¼Œæˆ‘ä»¬æŠŠ `home` å±æ€§ä¸‹çš„ Scaffold æ”¾åˆ°å•ç‹¬çš„ widget ï¼Œå–åä¸º {% label default@HomePage %}\n\n```dart Dart https://h.lishaoy.net/fristFlutter.html#æ–°å¢åˆ—è¡¨è§†å›¾ï¼ˆListViewï¼‰ main.dart\nimport 'package:flutter/material.dart';\n\nvoid main() => runApp(App());\n\nclass App extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp(\n      home: HomePage(),\n    );\n  }\n}\n\nclass HomePage extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n        appBar: AppBar(\n          title: Text(\n            'lishaoy.net'.toUpperCase(),\n            style: TextStyle(letterSpacing: 3.0),\n          ),\n        ),\n        body: Hello(),\n      );\n  }\n}\n```\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥åˆ›å»º {% label primary@è§†å›¾åˆ—è¡¨ %} \n\né¦–å…ˆï¼Œåœ¨å¤´éƒ¨å¼•å…¥åˆšæ‰åˆ›å»ºçš„æ•°æ® `post.dart` æ–‡ä»¶\n\n```Dart\nimport './model/post.dart';\n```\n\nç„¶åï¼Œå†æŠŠ `body` ä¸‹çš„ Hello() æ¢æˆ `ListView`ï¼Œå¦‚ä¸‹ï¼š\n\n```dart Dart https://h.lishaoy.net/fristFlutter.html#æ–°å¢åˆ—è¡¨è§†å›¾ï¼ˆListViewï¼‰ main.dart\nclass HomePage extends StatelessWidget {\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n        appBar: AppBar(\n          title: Text(\n            'lishaoy.net'.toUpperCase(),\n            style: TextStyle(letterSpacing: 3.0),\n          ),\n        ),\n        body: ListView.builder(\n          itemCount: posts.length,\n          itemBuilder: (BuildContext context, int index) => Text(posts[index].title),\n        ),\n      );\n  }\n}\n```\n\næ•ˆæœå¦‚å›¾ï¼š\n\n<div style=\"padding: 0 30%;\">![no-shadow](https://cdn.lishaoy.net/fristFlutter/listView.png \"ListView\" )</div>\n\n## å®Œå–„åˆ—è¡¨é¡¹ç›®\n\nç°åœ¨ï¼Œæ•°æ®å·²ç»å‘ˆç°åœ¨åº”ç”¨ç•Œé¢ä¸Šäº†ï¼Œæ¥ä¸‹æ¥è¦åšçš„æ˜¯è®©æ•°æ®å±•ç¤ºæ›´å‹å¥½ä¸€ç‚¹ã€‚\n\næˆ‘ä»¬å†æ¥æ”¹é€ ä¸€ä¸‹ `itemBuilder` ä¸‹çš„æ–¹æ³•ï¼š\n\n```dart Dart https://h.lishaoy.net/fristFlutter.html#å®Œå–„åˆ—è¡¨é¡¹ç›® main.dart\nclass HomePage extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      backgroundColor: Colors.grey[100],\n      appBar: AppBar(\n        title: Text(\n          'lishaoy.net'.toUpperCase(),\n          style: TextStyle(letterSpacing: 3.0),\n        ),\n      ),\n      body: ListView.builder(\n        itemCount: posts.length,\n        itemBuilder: (BuildContext context, int index) => Container(\n              margin: EdgeInsets.all(8.0),\n              color: Colors.white,\n              child: Column(\n                children: <Widget>[\n                  Image.network(\n                    posts[index].imageUrl,\n                    fit: BoxFit.cover,\n                  ),\n                  SizedBox(\n                    height: 16.0,\n                  ),\n                  Text(\n                    posts[index].title,\n                    style: Theme.of(context).textTheme.title,\n                  ),\n                  Text(\n                    posts[index].author,\n                    style: Theme.of(context).textTheme.subhead,\n                  ),\n                  SizedBox(\n                    height: 16.0,\n                  ),\n                ],\n              ),\n            ),\n      ),\n    );\n  }\n}\n```\n\nè¿è¡Œæ•ˆæœå¦‚å›¾ï¼š\n\n<div style=\"padding: 0 30%;\">![no-shadow](https://cdn.lishaoy.net/fristFlutter/listView1.png \"ListView\" )</div>\n\n{% note success %}\n<i class=\"fa fa-fw fa-bell faa-horizontal animated faa-slow\" style=\"color: #009688;\"></i>**Tipï¼š**\n1. {% label info@itemBuilder %} å±æ€§æ˜¯ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä¼  2 ä¸ªå‚æ•°ï¼Œcontextï¼ˆå†…å®¹ï¼‰ã€indexï¼ˆç´¢å¼•ï¼‰\n2. æˆ‘ä»¬ç”¨äº† {% label info@Container %} çš„ widget æ¥è£…è½½æˆ‘ä»¬çš„é¡¹ç›®ï¼Œå› ä¸º {% label info@Container %} æœ‰å¾ˆå¤šå±æ€§ï¼Œä¾‹å¦‚ marginã€paddingã€colorã€widthã€heightç­‰ï¼Œåé¢æˆ‘ä»¬ä¼šæ…¢æ…¢çš„ç†Ÿæ‚‰å®ƒ\n3. æˆ‘ä»¬ç”¨äº†ä¸€ä¸ª {% label info@Column %} çš„ widget æ¥å¸ƒå±€ï¼Œå› ä¸ºæˆ‘ä»¬çš„å›¾ç‰‡ã€æ ‡é¢˜ã€å°æ ‡é¢˜è¦çºµå‘æ’åˆ—ï¼ˆRowã€Columnç­‰ä¸€äº›å¸ƒå±€çš„ widget æˆ‘ä»¬ä¼šç»å¸¸ç”¨åˆ°ï¼‰\n4. ç”¨äº† {% label info@Image.network %} æ¥åŠ è½½ä¸€ä¸ªæ¥è‡ªç½‘ç»œçš„å›¾ç‰‡ï¼ˆImage.assetå¯ä»¥åŠ è½½æœ¬åœ°å›¾åƒï¼‰\n5. {% label info@Theme.of(context).textTheme.title%} æ˜¯ç”¨ {% label info@Material Design %} ä¸»é¢˜é‡Œçš„æ ‡é¢˜æ ·å¼\n{% endnote %}  \n\næœ€åï¼Œä¸ºäº†å¯é˜…è¯»æ€§å’Œç»´æŠ¤æ€§è€ƒé‡ï¼Œæˆ‘ä»¬å†å¯ä»¥è°ƒæ•´ä¸€ä¸‹ä»£ç  {% label success@ListView.builder %} æ–¹æ³•å•ç‹¬æç‚¼å‡ºæ¥ï¼š\n\n```dart Dart https://h.lishaoy.net/fristFlutter.html#å®Œå–„åˆ—è¡¨é¡¹ç›® main.dart\nclass HomePage extends StatelessWidget {\n  Widget _listItemBuilder(BuildContext context, int index) => Container(\n        margin: EdgeInsets.all(8.0),\n        color: Colors.white,\n        child: Column(\n          children: <Widget>[\n            Image.network(\n              posts[index].imageUrl,\n              fit: BoxFit.cover,\n            ),\n            SizedBox(\n              height: 16.0,\n            ),\n            Text(\n              posts[index].title,\n              style: Theme.of(context).textTheme.title,\n            ),\n            Text(\n              posts[index].author,\n              style: Theme.of(context).textTheme.subhead,\n            ),\n            SizedBox(\n              height: 16.0,\n            ),\n          ],\n        ),\n      );\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      backgroundColor: Colors.grey[100],\n      appBar: AppBar(\n        title: Text(\n          'lishaoy.net'.toUpperCase(),\n          style: TextStyle(letterSpacing: 3.0),\n        ),\n      ),\n      body: ListView.builder(\n        itemCount: posts.length,\n        itemBuilder: _listItemBuilder,\n      ),\n    );\n  }\n}\n```\n\nç°åœ¨ï¼Œç¬¬ä¸€ä¸ªæ¼‚äº®çš„ç•Œé¢å·²ç»å®Œæˆï¼Œåé¢çš„æ–‡ç« æˆ‘ä»¬ä¸€èµ·æ¥å®Œæˆå…¶ä»–éƒ¨åˆ†ã€‚\n","tags":["Dart"],"categories":["Dart"]},{"title":"Flutterï¼šæ‰‹æ‹‰æ‰‹å¸¦ä½ æé€Ÿæ„å»ºæ¼‚äº®çš„è·¨å¹³å°ç§»åŠ¨åº”ç”¨ âœ¿ ç¯å¢ƒæ­å»º","url":"%2FflutterInstall.html","content":"\n{% li https://cdn.lishaoy.net/flutterInstall/flutterCover8.png, Flutter, Flutter %}\n\nä¸Šç¯‡æ–‡ç« å¸¦å¤§å®¶è®¤è¯†äº† `Flutter` ï¼Œæƒ³å¿…å¤§å®¶å·²è¿«ä¸åŠå¾…çš„æƒ³ç»ƒç»ƒæ‰‹ï¼Œæ‰€ä»¥è¦è¡ŒåŠ¨èµ·æ¥ï¼Œç°åœ¨è¿™ç¯‡æ–‡ç« å°±å¸¦æ‚¨æ­å»ºä¸€ä¸ª `Flutter` è¿è¡ŒåŠå¼€å‘ç¯å¢ƒã€‚\n\n<hr />\n\n<!-- more -->\n\n## å®‰è£… Flutter SDK\n\næƒ³è¦åœ¨æœ¬åœ°ç”µè„‘ä¸Šè¿è¡Œ **Flutter** ï¼Œéœ€è¦å®‰è£… **Flutter SDK** æ‰å¯ä»¥è¿è¡Œï¼Œ **SDK** é‡Œé¢æœ‰ä¸€äº›ç”¨äºåˆ›å»ºã€æ„å»ºã€æµ‹è¯•å’Œç¼–è¯‘åº”ç”¨ç¨‹åºçš„å‘½ä»¤è¡Œå·¥å…·ç­‰ï¼Œè¿™äº›åœ¨å¼€å‘çš„æ—¶å€™ä¼šç”¨åˆ°ã€‚\n\né¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ 2 ç§æ–¹æ³•è·å– **SDK**\n\n- å¯ä»¥åˆ° [ä¸‹è½½ Flutter SDK ](https://flutter.io/docs/development/tools/sdk/archive#macos) åˆ°æœ¬åœ°ç”µè„‘\n- å¯ä»¥ç”¨ `git clone` å‘½ä»¤ä¸‹è½½åˆ°æœ¬åœ°ç”µè„‘\n\n```bash\ngit clone -b master https://github.com/flutter/flutter.git\n```\n\nå…¶æ¬¡ï¼ŒæŠŠä¸‹è½½ä¸‹æ¥çš„ **Flutter SDK** è§£å‹ï¼Œæ”¾åˆ°ç³»ç»Ÿçš„æŸä¸ªç›®å½•ï¼Œæ¯”å¦‚æˆ‘æ˜¯æ”¾åˆ°ï¼š `/Applications/flutter` ï¼Œå¦‚å›¾ï¼š\n\n![no-shadow](https://cdn.lishaoy.net/flutterInstall/flutterSDK.png \"Flutter SDK\")\n\n## é…ç½®ç¯å¢ƒå˜é‡\n\né…ç½®ç¯å¢ƒå˜é‡çš„ç›®çš„æ˜¯ä¸ºäº†è®© **Flutter SDK** å‘½ä»¤è¡Œå·¥å…·åœ¨å…¨å±€èŒƒå›´éƒ½èµ·ä½œç”¨ï¼Œä»¥ä¾¿å¼€å‘ä½¿ç”¨ã€‚\n\né¦–å…ˆï¼Œæ‚¨å¯ä»¥ç”¨ç¼–è¾‘å™¨æ‰“å¼€ä¸»ç›®å½•ä¸‹çš„ `.bash_profile`ï¼Œæˆ–è€…ç”¨ `vi` å‘½ä»¤ç¼–è¾‘ï¼Œæˆ‘ä¹ æƒ¯ç”¨ `vi` å‘½ä»¤ï¼Œå¦‚ä¸‹\n\n```bash\nvi $HOME/.bash_profile\n```\n\næ–°å¢ä»¥ä¸‹é…ç½®\n\n```\nexport PATH=$PATH:/Applications/flutter/bin\nexport PUB_HOSTED_URL=https://pub.flutter-io.cn\nexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n```\n{% note warning %} \n<i class=\"fa fa-fw fa-bell faa-horizontal animated faa-slow\" style=\"color: #faab33;\"></i> **Tipsï¼š** <br/>\nç¬¬ä¸€è¡Œ {% label danger@export PATH=$PATH:/Applications/flutter/bin %} ä¸­çš„ {% label danger@/Applications/flutter/bin %} å°±æ˜¯åˆšæ‰ä¸‹è½½çš„ **Flutter SDK** è§£å‹åæ”¾åœ¨æœ¬åœ°ç”µè„‘çš„ç›®å½•ï¼Œæ‚¨è¦æ ¹æ®è‡ªå·±æ“ä½œæ›´æ”¹ä¸ºè‡ªå·±ç”µè„‘å¯¹åº”çš„ç›®å½•ã€‚<br/>\nç¬¬äºŒã€ä¸‰è¡Œä¸ºè§£å†³å›½å†…ä¸‹è½½æˆ–æ›´æ–°èµ„æºæ…¢çš„å›½å†…é•œåƒï¼Œé…ç½®è¿™ä¸ªä¸‹è½½æˆ–æ›´æ–°èµ„æºä¼šå¿«ä¸€äº›ã€‚\n{% endnote %}  \n\nå†æ‰§è¡Œ `source $HOME/.bash_profile` å‘½ä»¤åˆ·æ–°å½“å‰å‘½ä»¤è¡Œçª—å£ï¼Œæˆ–è€…å…³æ‰å½“å‰å‘½ä»¤è¡Œçª—å£é‡æ–°æ‰“å¼€ï¼Œæ•ˆæœä¸€æ ·\n\n```bash\nsource $HOME/.bash_profile\n```\n\nå†æ‰§è¡Œ `flutter --help`ï¼Œæ¥æµ‹è¯•ç¯å¢ƒå˜é‡æ˜¯å¦é…ç½®æˆåŠŸï¼Œå¦‚å›¾ï¼š\n\n![no-shadow](https://cdn.lishaoy.net/flutterSDK3.png \"flutter help\")\n\n{% note warning %} \n<i class=\"fa fa-fw fa-bell  faa-horizontal animated faa-slow\" style=\"color: #faab33;\"></i> **Tipsï¼š** å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ {% label danger@zsh %}ï¼Œéœ€è¦åœ¨ ~/.zshrc æ–‡ä»¶ä¸­æ·»åŠ ï¼š{% label danger@source ~/.bash_profile %} ï¼Œå¦åˆ™ {% label danger@flutter %} å‘½ä»¤å°†æ— æ³•è¿è¡Œã€‚\n{% endnote %} \n\n## é…ç½® iOS å¼€å‘ç¯å¢ƒ\n\næƒ³ç”¨ **Flutter** ä¸º iOS å¹³å°å¼€å‘åº”ç”¨ï¼Œéœ€è¦å®‰è£… Xcodeï¼Œæˆ‘ä»¬å¯ä»¥å»è‹¹æœåº”ç”¨å•†åº—ä¸‹è½½ã€‚\n\nå®‰è£…å¥½ Xcode åï¼Œä½ éœ€è¦æ‰“å¼€ä¸€æ¬¡ Xcode åŒæ„è®¸å¯åè®®ï¼ˆä¼šæç¤ºï¼‰ï¼Œæˆ–è€…æ‰§è¡Œ `sudo xcodebuild -license` åŒæ„è®¸å¯åè®®ã€‚\n\nç„¶åæ‰§è¡Œ `open -a Simulator` å‘½ä»¤ï¼Œå°±å¯ä»¥æ‰“å¼€ä¸€ä¸ªæ¨¡æ‹Ÿå™¨ï¼Œæ¥è¿è¡Œå’Œæµ‹è¯• **Flutter** ç¨‹åºï¼Œå¦‚å›¾\n\n![no-shadow](https://cdn.lishaoy.net/flutterInstall/Simulator2.png \"Simulator\" )\n\n## é…ç½® Android å¼€å‘ç¯å¢ƒ\n\næƒ³ç”¨ **Flutter** ä¸º Android å¹³å°å¼€å‘åº”ç”¨ï¼Œéœ€è¦ä¸‹è½½å®‰è£… [Android Studio](https://developer.android.com/studio/)ã€‚\n\nå®‰è£…å¥½ Android Studio åï¼Œå¯åŠ¨å®ƒï¼Œé¦–æ¬¡å¯åŠ¨ä¼šå®‰è£…æœ€æ–°çš„ **Android SDK** ï¼Œä½†æ˜¯ä½ å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œå¦‚å›¾ï¼š\n\n<img src=\"https://cdn.lishaoy.net/flutterInstall/AndroidStudio.png\" alt=\"Android Studio\" width=\"50%\" title=\"Android Studio\" align=\"center\" />\n\nå¦‚æœé‡åˆ°è¿™ä¸ªé—®é¢˜åº”è¯¥å°±æ˜¯ç½‘ç»œé—®é¢˜ï¼ˆéœ€è¦ç§‘å­¦ä¸Šç½‘ï¼‰ï¼Œç‚¹ **Setup Proxy** æ¥è®¾ç½®ä»£ç†ï¼Œå¦‚å›¾ï¼š\n\n<img src=\"https://cdn.lishaoy.net/flutterInstall/AndroidStudio1.png\" alt=\"Android Studio\" width=\"50%\" title=\"Android Studio\" align=\"center\" />\n\nå¦‚ä¸€åˆ‡æ­£å¸¸ï¼Œå°±ä¼šæç¤ºä½ éœ€è¦ä¸‹è½½ä¸€äº›ä¸œè¥¿ï¼Œå¦‚å›¾\n\n<img src=\"https://cdn.lishaoy.net/flutterInstall/AndroidStudio2.png\" alt=\"Android Studio\" width=\"85%\" title=\"Android Studio\" align=\"center\" />\n\nç‚¹å‡» Finish æŒ‰é’®åå°±ä¼šä¸‹è½½å®‰è£…ä»¥ä¸Šåˆ—è¡¨çš„ä¸œè¥¿,ä¸‹è½½å®‰è£…å®Œ SDK åï¼Œå¦‚å›¾ï¼š\n\n<img src=\"https://cdn.lishaoy.net/flutterInstall/AndroidStudio3.png\" alt=\"Android Studio\" width=\"85%\" title=\"Android Studio\" align=\"center\" />\n\néœ€è¦æˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åˆšæ‰å·²ç»é…ç½®å¥½çš„ **Flutter SDK** çš„å‘½ä»¤è¡Œåˆ›å»ºä¸€ä¸ª Flutter é¡¹ç›®ï¼Œå¦‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤\n\n```bash\ncd ~/desktop\nflutter create new_flutter\n```\n\nå‘½ä»¤æ‰§è¡Œå®Œæˆåï¼Œåœ¨æ¡Œé¢å°±ä¼šç”Ÿæˆä¸€ä¸ª Flutter é¡¹ç›®ï¼Œå†ç”¨ Android Studio æ‰“å¼€ï¼Œé¡¹ç›®æ‰“å¼€åä¼šæç¤ºå®‰è£… Flutter æ’ä»¶å’Œä¾èµ– Dart è¯­è¨€æ’ä»¶ ï¼Œå®‰è£…å®Œä¹‹åæˆ‘ä»¬å¯ä»¥å»åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿå™¨ã€‚\n\næ‰“å¼€ **Tools>AVD Manager** ï¼Œç‚¹å‡» `Create Virtual Device...` æ¥åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿå™¨ï¼Œé€‰æ‹©ä¸€ä¸ªè®¾å¤‡ï¼Œç‚¹å‡» Nextï¼Œå¦‚å›¾\n\n<img src=\"https://cdn.lishaoy.net/flutterInstall/AndroidStudio4.png\" alt=\"Android Studio\" width=\"85%\" title=\"Android Studio\" align=\"center\" />\n\nä¸ºæ¨¡æ‹Ÿå™¨é€‰æ‹©ä¸€ä¸ªç³»ç»Ÿé•œåƒï¼ˆæˆ‘é€‰æ‹©çš„æ˜¯ç¬¬ä¸€ä¸ªï¼‰ï¼Œç‚¹å‡» Download ï¼Œä¸‹è½½å®Œæˆåï¼Œç‚¹å‡» Next åï¼Œå¦‚å›¾\n\n<img src=\"https://cdn.lishaoy.net/flutterInstall/AndroidStudio5.png\" alt=\"Android Studio\" width=\"85%\" title=\"Android Studio\" align=\"center\" />\n\næœ€åï¼Œåœ¨æ¨¡æ‹Ÿæ€§èƒ½è¿™é‡Œé€‰æ‹© **Hardware - GLES 2.0** å¯åŠ¨ç¡¬ä»¶åŠ é€Ÿï¼Œç‚¹å‡» Finish å®Œæˆ\n\n<img src=\"https://cdn.lishaoy.net/flutterInstall/AndroidStudio6.png\" alt=\"Android Studio\" width=\"85%\" title=\"Android Studio\" align=\"center\" />\n\n\n## é…ç½®ç¼–è¾‘å™¨\n\nå‰é¢æˆ‘ä»¬å·²ç»é…ç½®å¥½äº† **Flutter SDK** ã€**iOS æ¨¡æ‹Ÿå™¨** ã€**Android æ¨¡æ‹Ÿå™¨** ï¼Œæœ€åæˆ‘ä»¬è¿˜éœ€è¦é…ç½®ä¸€ä¸‹ç¼–è¾‘å™¨ï¼Œå½“ç„¶æ‚¨å¯ä»¥é€‰æ‹© `Android Studio` æˆ–è€… `VS Code`ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯è½»é‡çº§çš„ `VS Code`ã€‚\n\n{% note default %} å¦‚å¯¹ VS Code ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œå¯å‚è€ƒæˆ‘ä¹‹å‰å†™çš„ [VS Code ç¼–è¾‘æŠ€å·§](https://h.lishaoy.net/VSCodeCodingSkills.html) {% endnote %}  \n\næ‰“å¼€ç»ˆç«¯è¿›å…¥æˆ‘ä»¬åˆšæ‰æ–°å»ºçš„ Flutter é¡¹ç›®\n\n```bash\ncd new_flutter\n```\n\nå†ç”¨ VS Code æ‰“å¼€é¡¹ç›®\n\n```bash\ncode ./\n```\n\næ‰“å¼€é¡¹ç›®ä¹‹å <kbd>âŒ˜</kbd> - <kbd>â‡§</kbd> - <kbd>X</kbd> ,æ‰“å¼€æ‰©å±•ï¼Œå®‰è£… **Flutter** æ’ä»¶ï¼Œå¦‚å›¾\n\n\n<img src=\"https://cdn.lishaoy.net/flutterInstall/flutter_install.gif\" alt=\"Android Studio\" width=\"88%\" title=\"Flutter install\" align=\"center\" />\n\nå®Œæˆä¹‹åï¼Œæ‰“å¼€é¡¹ç›®ç›®å½• `lib->main.dart` æ–‡ä»¶ï¼Œ VS Code ä¼šè‡ªåŠ¨æç¤ºä½ å®‰è£… Dart è¯­è¨€æ‰©å±•åŒ…ã€‚\n\n## è¿è¡Œé¡¹ç›®\n\nç°åœ¨ï¼Œæ‰€æœ‰çš„å‡†å¤‡å·¥ä½œéƒ½å®Œæˆäº†ï¼Œå°±å¯ä»¥å¼€å‘ã€æµ‹è¯•æˆ–è¿è¡Œé¡¹ç›®äº†ï¼Œåœ¨ä¸Šé¢æˆ‘ä»¬ç”¨ `Flutter create` å‘½ä»¤åˆ›å»ºçš„ Flutter é¡¹ç›®ï¼Œè‡ªå¸¦ä¸€ä¸ªè®¡æ•°å™¨çš„å°åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œçœ‹çœ‹æ•ˆæœ\n\né¦–å…ˆï¼Œæ‚¨éœ€è¦æ‰§è¡Œ `flutter doctor` æ¥æ£€æŸ¥ä¸€ä¸‹ç¯å¢ƒæ˜¯å¦æ­£å¸¸\n\n![no-shadow](https://cdn.lishaoy.net/flutterInstall/flutter_run.png \"Flutter run\" )\n\nå¦‚ä¸Šå›¾ç¬¬äºŒé¡¹æç¤º `Android license status unknown.` æ„æ€æ˜¯ Android åè®®æ²¡å®‰è£…å¥½ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ¥è§£å†³é—®é¢˜\n\n```bash\nflutter doctor --android-licenses\n```\n\nå¦‚ä¸Šå›¾ç¬¬ä¸‰é¡¹æ˜¯ iOS çœŸæœºçš„æ£€æŸ¥é¡¹ï¼Œå¯ä»¥æŒ‰ç…§æç¤ºæ“ä½œ<br />\nå¦‚ä¸Šå›¾ç¬¬å››é¡¹æ˜¯ Java çš„ç¼–è¾‘å™¨æ£€æŸ¥ï¼Œå¯ä¸ç”¨ç†ä¼šï¼Œå¦‚ä½ æ²¡æœ‰å®‰è£… IDEA ä¹Ÿä¸ä¼šæœ‰è¿™ä¸ªæç¤º\n\nå…¶å®åœ¨æˆ‘å¦ä¸€å°ç”µè„‘ä¸Šå…¨éƒ¨éƒ½é…ç½®å¥½äº† ğŸ˜ ï¼Œå¦‚å›¾\n\n![no-shadow](https://cdn.lishaoy.net/flutterInstall/flutter_run1.png \"Flutter run\" )\n\næœ€åï¼Œåœ¨ VS Code ç¼–è¾‘å™¨é‡ŒæŒ‰ **F5** åï¼Œä¼šè®©ä½ é€‰æ‹©æ¨¡æ‹Ÿå™¨æ¥è¿è¡Œ Flutter ç¨‹åºï¼Œå¦‚å›¾\n\n<img src=\"https://cdn.lishaoy.net/flutterInstall/flutter_run1.gif\" alt=\"Flutter run\" width=\"88%\" title=\"Flutter run\" align=\"center\" />\n\nè¿™ä¸ªæ˜¯åˆ†åˆ«åœ¨ iOS å’Œ Android è¿è¡Œ Flutter çš„æ•ˆæœï¼Œå¦‚å›¾\n\n![no-shadow](https://cdn.lishaoy.net/flutterInstall/demo.png \"Flutter run\" )\n\n## è¿è¡Œ Flutter æ¡ˆä¾‹\n\nç°åœ¨æ‰€æœ‰çš„éƒ½å‡†å¤‡å¥½äº†ï¼Œæ‚¨å¯ä»¥å»æˆ‘çš„ GitHub ä¸Šä¸‹è½½ä¸Šç¯‡æ–‡ç« ä¸­çš„æ¡ˆä¾‹ä»£ç ï¼Œä¹Ÿå¯ä»¥ `git clone`\n\n```bash\ncd $HOME/Desktop #è¿›åˆ°æ¡Œé¢\ngit clone https://github.com/persilee/flutter_pro.git #ä¸‹è½½æ¡ˆä¾‹\ncd flutter_pro #è¿›å…¥æ¡ˆä¾‹ç›®å½•\nflutter packages get #è·å–ä¾èµ–åŒ…\ncode ./ #ç”¨ VS Code æ‰“å¼€\n```\n\nå®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œåœ¨ VS Code æŒ‰ F5 é€‰æ‹©æ¨¡æ‹Ÿå™¨ï¼ŒæŸ¥çœ‹è¿è¡Œæ•ˆæœï¼Œå¦‚å›¾\n\n![no-shadow](https://cdn.lishaoy.net/flutterInstall/flutter_run5.png \"Flutter Demo\" )\n\nå¥½çš„ï¼Œå¤§åŠŸå‘Šæˆï¼Œè¿™ç¯‡åˆ°å¤„ä¸ºæ­¢ï¼Œä¸‹ç¯‡å°†æ‰‹æ‹‰æ‰‹å¸¦å¤§å®¶å®Œæˆä¸€ä¸ªå®æ“å°æ¡ˆä¾‹ ã€‚","tags":["Dart"],"categories":["Dart"]},{"title":"Flutterï¼šæ‰‹æ‹‰æ‰‹å¸¦ä½ æé€Ÿæ„å»ºæ¼‚äº®çš„è·¨å¹³å°ç§»åŠ¨åº”ç”¨ âœ¿ åˆè¯†","url":"%2FbeautifulFlutter.html","content":"\n{% li https://cdn.lishaoy.net/beautifulFlutter/flutter_750x400.png, Flutter, Flutter %}\n\næœ€è¿‘ï¼Œå­¦ä¹ äº†ä¸€äº› `Flutter` ç›¸å…³çš„çŸ¥è¯†ï¼Œåšäº†å¦‚ä¸‹çš„å°ç§»åŠ¨åº”ç”¨ï¼Œå½“ç„¶æ˜¯ä¸€å¥—ä»£ç å³å¯åœ¨ `iOS` å¹³å°è¿è¡Œ,ä¹Ÿå¯ä»¥åœ¨ `Android` è¿è¡Œã€‚\n\nä¸‹é¢æˆ‘å°†æ‰‹æ‹‰æ‰‹å¸¦æ‚¨å¿«é€Ÿæ„å»ºå‡ºæ¼‚äº®çš„ç§»åŠ¨åº”ç”¨ç•Œé¢ï¼ˆå¦‚ä¸‹ğŸ‘‡å°è§†é¢‘ï¼‰\n\n<video id=\"flutter\" class=\"video-js vjs-default-skin\" controls preload=\"auto\" poster=\"https://cdn.lishaoy.net/flutter_start/flutter5.1.png\"\n    data-setup=\"{'example_option':true}\">\n    <source src=\"https://cdn.lishaoy.net/flutter_start/flutter7.mp4\" type='video/mp4' />\n</video>\n\n<hr />\n\n<!-- more -->\n\n## åˆè¯† Flutter\n\n[Flutter](https://flutterchina.club) æ˜¯è°·æ­Œçš„ç§»åŠ¨UIæ¡†æ¶ï¼Œå¯ä»¥å¿«é€Ÿåœ¨iOSå’ŒAndroidä¸Šæ„å»ºé«˜è´¨é‡çš„åŸç”Ÿç”¨æˆ·ç•Œé¢ã€‚\n\nGoogle æ¨å‡º Flutter ç§»åŠ¨åº”ç”¨æ¡†æ¶å·²ç»æœ‰ä¸‰å¹´ï¼Œç›´åˆ°ä»Šå¹´çš„ Google I/O å¼€å‘å¤§ä¼šæ‰æ­£å¼ä»‹ç» `Flutter` ä¸”å‘å¸ƒ Beta ç‰ˆæœ¬, [Flutter Google I/O è§†é¢‘](https://www.youtube.com/watch?v=w2TcYP8qiRI) è¿™ä¸ªæ˜¯ `Flutter` åœ¨æ²¹ç®¡ï¼ˆYouTubeï¼‰çš„ Google I/O å¼€å‘è€…å¤§ä¼šçš„è§†é¢‘ï¼Œè¯·è‡ªè¡Œè§‚çœ‹ã€‚\n\nå†æ¥çœ‹çœ‹æ›´åŠ ç”ŸåŠ¨çš„è§†é¢‘ä»‹ç»ï¼ŒåŠ é€Ÿæ‚¨çš„åˆè¯† `Flutter`\n\n<video id=\"IntroducingFlutter\" class=\"video-js vjs-default-skin\" controls preload=\"auto\" poster=\"https://cdn.lishaoy.net/beautifulFlutter/IntroducingFlutter1.png\"\n    data-setup=\"{'example_option':true}\">\n    <source src=\"https://cdn.lishaoy.net/beautifulFlutter/IntroducingFlutter.mp4\" type='video/mp4' />\n</video>\n\n<hr />\n\nGoogle çš„å¹¿å‘Šåº”ç”¨ Adwordsï¼Œé˜¿é‡Œçš„é—²é±¼ App éƒ½æ˜¯åŸºäº `Flutter` æ¡†æ¶å¼€å‘çš„ã€‚\n\nä»¥ä¸‹æ˜¯é˜¿é‡Œå·´å·´ç”¨ Flutter æ‰“é€ äº†5000å¤šä¸‡ç”¨æˆ·é—²é±¼ App (Flutter Developer Story) çš„æ•…äº‹è§†é¢‘\n\n<video id=\"FlutterDeveloperStory\" class=\"video-js vjs-default-skin\" controls preload=\"auto\" poster=\"https://cdn.lishaoy.net/beautifulFlutter/FlutterDeveloperStory2.png\"\n    data-setup=\"{'example_option':true}\">\n    <source src=\"https://cdn.lishaoy.net/beautifulFlutter/FlutterDeveloperStory.mp4\" type='video/mp4' />\n</video>\n\n<hr />\n\n`Flutter` ä½œä¸ºè°·æ­Œæ¨å‡ºçš„è·¨å¹³å°å¼€å‘æ¡†æ¶ï¼Œä¸€ç»æ¨å‡ºä¾¿å¸å¼•äº†ä¸å°‘æ³¨æ„,åœ¨ GitHub ä¸Šçš„ Star æ•°å·²è¶…è¿‡ **4W+** ã€‚\n\n[CMTCå…¨çƒå¤§å‰ç«¯æŠ€æœ¯å¤§ä¼š ã„§ Flutterè§†é¢‘](https://www.bilibili.com/video/av27857568/) è¿™æ˜¯ Googleä¸­å›½åœ¨ **bilibili** ä¸Šå‘å¸ƒçš„è§†é¢‘ï¼Œè¯·è‡ªè¡Œè§‚çœ‹ã€‚\n\n## Flutter ç‰¹æ€§\n\né€šè¿‡ä»¥ä¸Šçš„è§†é¢‘ï¼Œå¯¹äº `Flutter` å·²æœ‰æ‰€è®¤è¯†ï¼Œä¸‹é¢å†æ¥çœ‹çœ‹ `Flutter` çš„ä»¥ä¸‹ç‰¹æ€§\n\n### çƒ­é‡è½½\n\nå½“ä½ ä¿®æ”¹äº†ä»£ç  <kbd>âŒ˜</kbd> - <kbd>S</kbd> ï¼Œå¯ç«‹åˆ»çœ‹åˆ°æ•ˆæœï¼Œè€Œä¸”å¯ä»¥ä¿æŒç•Œé¢çŠ¶æ€ä¸å˜ï¼ˆå¦‚æ–‡æœ¬æ¡†è¾“å…¥çš„ä¿¡æ¯ä¸ä¼šæ”¹å˜ï¼‰ï¼Œå¦‚å›¾ï¼š\n\n![no-shadow](https://cdn.lishaoy.net/beautifulFlutter/HotReload1.gif \"Hot reload\")\n\n### è®¾è®¡\n\n`Flutter` è‡ªå¸¦ Google æ¨è¡Œçš„è®¾è®¡ç³»ç»Ÿï¼š[Material Design](https://www.material.io) ï¼Œå®ƒæä¾›äº†ä¸°å¯Œçš„ **Material Design** é£æ ¼çš„ç»„ä»¶ï¼ˆæ¯”å¦‚ï¼šæŒ‰é’®ã€è¾“å…¥æ¡†ã€å¯¹è¯æ¡†ã€å¯¼èˆªæ ã€è¾¹æ ç­‰ï¼‰ï¼Œè€Œä¸”ä¹Ÿæä¾›äº†ä¸°å¯Œçš„ **iOSï¼ˆCupertinoï¼‰** é£æ ¼çš„ç»„ä»¶ï¼Œåˆ©ç”¨è¿™äº›é£æ ¼çš„ç»„ä»¶èƒ½å¤Ÿå¿«é€Ÿçš„æ„å»ºåº”ç”¨ï¼Œå¦‚å›¾\n\n![no-shadow](https://cdn.lishaoy.net/beautifulFlutter/Material.jpg \"Material Design\")\n\n### widget\n\n**widget** æ˜¯ `Flutter` åº”ç”¨ç¨‹åºåŸºæœ¬æ„å»ºå—, `Flutter` æ—¢ä¸ä½¿ç”¨ WebViewï¼Œä¹Ÿä¸ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„åŸç”Ÿæ§ä»¶ï¼Œç›¸å `Flutter` ä½¿ç”¨è‡ªå·±çš„é«˜æ€§èƒ½æ¸²æŸ“å¼•æ“æ¥ç»˜åˆ¶**widget** ï¼Œ `Flutter` çš„ä¸­å¿ƒæ€æƒ³æ˜¯ç”¨ **widget** æ„å»ºä½ çš„ UIï¼ˆ**ä¸€åˆ‡çš†ä¸º widget**ï¼‰ ï¼Œå¦‚å›¾æ˜¯å®˜ç½‘ç»™å‡ºçš„æ¡†æ¶å›¾ï¼š\n\n![no-shadow](https://cdn.lishaoy.net/beautifulFlutter/widget.png \"widget\")\n\nåœ¨è¿™ä¸ªæ¶æ„é‡Œï¼Œä½ å¯ä»¥å®ç° `Flutter` æä¾›çš„æ‰€æœ‰ç°æˆçš„ **widget** ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå·±å®šåˆ¶çš„ **widget** ï¼Œæ¯ä¸ª **widget** éƒ½æ˜¯å…¬å¼€çš„ï¼Œä½ å¯ä»¥ä»é«˜å±‚æ¬¡ä¸”ç»Ÿä¸€çš„ **widget** ä¸­è·å¾—å¼€å‘æ•ˆç‡ä¼˜åŠ¿ï¼Œè¿™ä¸ªè®¾è®¡çš„ç›®æ ‡æ˜¯ä¸ºäº†ç”¨æ›´å°‘çš„ä»£ç åšæ›´å¤šçš„äº‹æƒ…ã€‚\n\n### è¯­è¨€\n\n`Flutter` ä½¿ç”¨ Cã€C ++ã€Dart å’Œ Skiaï¼ˆ2Dæ¸²æŸ“å¼•æ“ï¼‰æŠ€æœ¯æ„å»ºï¼Œå¦‚ä¸Šå›¾ï¼Œåº•å±‚ï¼ˆengineï¼‰æ˜¯ç”¨ C ++ ï¼Œæ¡†æ¶æ˜¯ç”¨ Dart ï¼Œå½“ç„¶æˆ‘ä»¬å¼€å‘ä½¿ç”¨çš„ä¹Ÿæ˜¯ Dartã€‚\n\nDart æ˜¯ Google å‘å¸ƒçš„ä¸€ç§é«˜æ•ˆã€ç®€æ´ã€æ‹¥æœ‰å®Œæ•´ç±»å‹ç³»ç»Ÿçš„ `ç»“æ„åŒ–çš„Webç¼–ç¨‹` è¯­è¨€ï¼Œ `Flutter` å®˜æ–¹ç»™å‡ºä¸ºä»€ä¹ˆé€‰æ‹© Dart ä½œä¸ºå¼€å‘è¯­è¨€çš„åŸå› ï¼Œå¦‚ä¸‹\n\n- å¼€å‘äººå‘˜çš„æ•ˆç‡\n- é¢å‘å¯¹è±¡\n- å¯é¢„æµ‹ï¼Œé«˜æ€§èƒ½\n- å¿«é€Ÿå†…å­˜åˆ†é…\n\nå¯¹äºå¼€å‘è€…ï¼ˆè¯­è¨€ä½¿ç”¨è€…ï¼‰æ¥è¯´ï¼Œä¸å¿…å¤ªæ‹…å¿ƒï¼ŒDart å’Œ Java ã€ JavaScript æ¯”è¾ƒç±»ä¼¼ï¼Œæœ‰ä¸€äº›ç¨‹åºè¯­è¨€åŸºç¡€ï¼Œä¾¿å¯æ‹¿æ¥å³ç”¨ï¼ˆä¸æ¸…æ¥šçš„çœ‹çœ‹è¯­æ³•ã€å…³é”®å­—ã€ç±»å‹å³å¯ï¼‰ã€‚\n\nç°åœ¨æƒ³å¿…æ‚¨å¯¹ `Flutter` å·²ç»æœ‰äº†ä¸€å®šçš„è®¤è¯†ï¼Œåœ¨ä¹‹åçš„ç¯‡å¹…äº†ä¼šæ‰‹æ‹‰æ‰‹å¸¦ä½ æé€Ÿæ„å¦‚æ–‡å¤´å°è§†é¢‘çš„å°åº”ç”¨ã€‚\n\n<img class=\"hidden\" src=\"https://cdn.lishaoy.net/beautifulFlutter/flutter_750x400.png\" alt=\"VS Code\" width=\"100%\" title=\"VS Code\" align=\"center\">","tags":["Dart"],"categories":["Dart"]},{"title":"VS Codeï¼šè®©ä½ å·¥ä½œæ•ˆç‡ç¿»å€çš„23ä¸ªæ’ä»¶å’Œ23ä¸ªç¼–è¾‘æŠ€å·§","url":"%2FVSCodeCodingSkills.html","content":"\n{% li https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code.jpg, VS Code, VS Code %}\n\næ€»ç»“äº†ä¸€äº›å¹³æ—¶å¸¸ç”¨ä¸”å¥½ç”¨çš„ **VS Code** çš„æ’ä»¶å’Œç¼–è¾‘æŠ€å·§åˆ†äº«å‡ºæ¥ã€‚\n\n<!-- more -->\n\n## å¤–è§‚\n\n### ä¸»é¢˜\nè¿™é‡Œæˆ‘åˆ†äº«ä¸¤æ¬¾ä¸»é¢˜ï¼š\n\n1. **[Material Theme](https://marketplace.visualstudio.com/items?itemName=Equinusocio.vsc-material-theme)**\n\næ•ˆæœå¦‚å›¾ï¼š\n\n![no-shadow](https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_theme1.jpg \"Material Theme\")\n\n2. **[An Old Hope Theme](https://marketplace.visualstudio.com/items?itemName=dustinsanders.an-old-hope-theme-vscode)**\n\næ•ˆæœå¦‚å›¾ï¼š\n\n![no-shadow](https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_theme2.jpg \"An Old Hope Theme\")\n\n### å›¾æ ‡\n\n3. **[Material Icon Theme](https://marketplace.visualstudio.com/items?itemName=PKief.material-icon-theme)**å½“ç„¶ï¼Œè¿™ä¸¤æ¬¾ä¸»é¢˜çš„æ–‡ä»¶ç®¡ç†å™¨ï¼ˆå·¦ä¾§ï¼‰çš„ icon å°å›¾æ ‡ä½¿ç”¨çš„æ˜¯ Material Icon Theme\n\n### å­—ä½“åŠå…¶ä»–\n\nå…¶ä»–å’Œå¤–è§‚ç›¸å…³çš„è®¾ç½®å¦‚ä¸‹ï¼š\n\n```json\n{\n    \"editor.multiCursorModifier\": \"ctrlCmd\",\n    \"editor.formatOnPaste\": false,\n    \"workbench.activityBar.visible\": false,\n    \"workbench.iconTheme\": \"eq-material-theme-icons-darker\",\n    \"workbench.colorCustomizations\": {},\n    \"materialTheme.cache.workbench.settings\": {\n        \"themeColours\": \"Darker\",\n        \"accentPrevious\": \"Acid Lime\"\n    },\n    \"workbench.colorTheme\": \"Material Theme Darker\",\n    \"material-icon-theme.angular.iconsEnabled\": true,\n    \"material-icon-theme.folders.icons\": \"specific\",\n    \"editor.lineHeight\": 24,\n    \"editor.fontLigatures\": true,\n    \"editor.fontFamily\": \"FiraCode-Medium\"\n}\n```\n\nç‰¹åˆ«æ³¨æ„çš„æ˜¯ `\"editor.lineHeight\": 24,` å’Œ `\"editor.fontFamily\": \"FiraCode-Medium\"` ã€‚\n\n`\"editor.lineHeight\": 24,` ï¼š è®¾ç½®ä»£ç çš„è¡Œé—´è·ï¼Œè¿™é‡Œæ¯”é»˜è®¤çš„ç¨å¤§äº›ï¼Œå°±è¿™ä¸€ç‚¹å°å°çš„æ”¹å˜ï¼Œè®©ä»£ç çœ‹èµ·æ¥æ¸…çˆ½æ•´æ´ã€‚\n\n`\"editor.fontFamily\": \"FiraCode-Medium\"` ï¼š è®¾ç½®å­—ä½“ï¼Œè¿™ç§å­—ä½“ä¼šè®©ä»£ç çœ‹èµ·æ¥æ›´å½¢è±¡ç”ŸåŠ¨ï¼Œå¦‚ä¸‹\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_code3.png\" alt=\"FiraCode-Mediumå­—ä½“\" width=\"100%\" title=\"FiraCode-Mediumå­—ä½“\" align=\"center\" />\n\nçº¢è‰²ç«–çº¿å·¦è¾¹æ˜¯ä½¿ç”¨äº† **FiraCode-Medium** å­—ä½“çš„æ•ˆæœï¼Œçº¢è‰²ç«–çº¿å³è¾¹æ˜¯æ²¡æœ‰ä½¿ç”¨ **FiraCode-Medium** å­—ä½“çš„æ•ˆæœ\n\nå…³äº **FiraCode-Medium** å­—ä½“æ›´å¤šæ•ˆæœå¯æŸ¥é˜… [https://github.com/tonsky/FiraCode](https://github.com/tonsky/FiraCode) åœ°å€ã€‚\n\n## ä»£ç ç®¡ç†\n\n### æ ¼å¼åŒ–\n\n4. **[Beautify](https://marketplace.visualstudio.com/items?itemName=HookyQR.beautify)** ï¼šæ ¼å¼åŒ–çš„æ—¶å€™ï¼Œç»™å‡ºæ ¼å¼åŒ–æ–‡æœ¬é€‰é¡¹ï¼Œå¦‚ä¸‹\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_Beatify.gif\" alt=\"Beautify\" width=\"100%\" title=\"Beautify\" align=\"center\" />\n\n5. **[Prettier](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode)** ï¼šä¸ªäººæ¯”è¾ƒå–œæ¬¢è¿™ä¸ªï¼Œçœ‹èµ·æ¥ä»£ç æ›´æ¸…æ™°ï¼Œå¦‚ä¸‹\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_Prettier.gif\" alt=\"Prettier\" width=\"100%\" title=\"Prettier\" align=\"center\" />\n\n{% note info %} å½“ç„¶ï¼Œå¤§å®¶å¯ä»¥è‡ªå®šä¹‰å¿«æ·é”®ï¼Œä¹Ÿå¯ä»¥æŒ‰ <kbd>âŒ˜</kbd> - <kbd>â‡§</kbd> - <kbd>P</kbd>  æ¥æœç´¢ç›¸å…³å‘½ä»¤ {% endnote %}  \n\n### ä»£ç æ£€æŸ¥\n\n6. [ESLint](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint) ï¼šæ£€æŸ¥ `js` è¯­æ³•è§„èŒƒï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸åŒçš„è§„èŒƒï¼Œå¦‚ [airbnb](https://www.npmjs.com/package/eslint-config-airbnb) ã€[standard](https://github.com/standard/eslint-config-standard) ã€[google](https://github.com/google/eslint-config-google)ã€‚\n7. [TSLint](https://marketplace.visualstudio.com/items?itemName=eg2.tslint) ï¼šæ£€æŸ¥ `typescript` è¯­æ³•è§„èŒƒã€‚\n8. [Stylelint](https://marketplace.visualstudio.com/items?itemName=shinnn.stylelint) ï¼šæ£€æŸ¥ `CSS/SCSS/Less` è¯­æ³•è§„èŒƒã€‚\n9. [Markdownlint](https://marketplace.visualstudio.com/items?itemName=DavidAnson.vscode-markdownlint) ï¼šæ£€æŸ¥ `markdown` è¯­æ³•è§„èŒƒã€‚\n\n### è‡ªåŠ¨è¡¥å…¨\n\nä»¥ä¸‹æ’ä»¶ç‚¹å‡»é“¾æ¥å¯ä»¥æŸ¥çœ‹gifåŠ¨å›¾ï¼Œè¯¦ç»†äº†è§£å…·ä½“åŠŸèƒ½ã€‚\n10. [Emmet](https://emmet.io) ï¼šå¤§å®¶åº”è¯¥å¾ˆç†Ÿæ‚‰è¿™ä¸ªæ’ä»¶äº†ï¼ˆå¾ˆå¥½ç”¨ï¼‰ï¼ŒVS Code å·²ç»å†…ç½®äº†ï¼Œå¾ˆåˆ°ä½ã€‚\n11. [Auto Close Tag](https://marketplace.visualstudio.com/items?itemName=formulahendry.auto-close-tag) ï¼šè‡ªåŠ¨é—­åˆ `html` ç­‰æ ‡ç­¾ ï¼ˆ</...>ï¼‰ã€‚\n12. [Auto Rename Tag](https://marketplace.visualstudio.com/items?itemName=formulahendry.auto-rename-tag) ï¼šä¿®æ”¹ `html` æ ‡ç­¾æ—¶ï¼Œè‡ªåŠ¨ä¿®æ”¹é—­åˆæ ‡ç­¾ã€‚\n13. [Path Intellisense](https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense) ï¼šè‡ªåŠ¨æç¤ºè¡¥å…¨è·¯å¾„ã€‚\n\n### ä»£ç ç‰‡æ®µ\n\n14. **snippets** ï¼šæ­å»ºå¯ä»¥è‡ªå·±å®‰è£…å„ç§ä»£ç ç‰‡æ®µï¼ˆvueã€reactã€angularç­‰ï¼‰ï¼Œè¿™é‡Œå°±ä¸åˆ—ä¸¾ã€‚\n\n## åŠŸèƒ½æ‰©å±•\n\nä»¥ä¸‹çš„åŠŸèƒ½æ‰©å±•æ’ä»¶å¤§éƒ¨åˆ†éƒ½æœ‰gifåŠ¨å›¾ï¼Œå¯ç‚¹å‡»é“¾æ¥äº†è§£è¯¦ç»†åŠŸèƒ½\n15. [Bracket Pair Colorizer](https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer) ï¼šè®©ä»£ç çš„å„ç§æ‹¬å·å‘ˆç°ä¸åŒçš„é¢œè‰²ã€‚\n16. [Code Runner](https://marketplace.visualstudio.com/items?itemName=formulahendry.code-runner) ï¼šå¯ä»¥åœ¨ç¼–è¾‘å™¨é‡Œç›´æ¥è¿è¡Œä»£ç ï¼ŒæŸ¥çœ‹ç»“æœã€‚\n17. [Color Picker](https://marketplace.visualstudio.com/items?itemName=anseki.vscode-color) ï¼šå¯ä»¥ç›´æ¥åœ¨ç¼–è¾‘å™¨é‡Œæ‰“å¼€è‰²æ¿ï¼Œé€‰æ‹©å„ç§æ¨¡å¼çš„é¢œè‰²ã€‚\n18. [Document This](https://marketplace.visualstudio.com/items?itemName=joelday.docthis) ï¼šå¯ä»¥ç»™å‡½æ•°ã€ç±»ç­‰è‡ªåŠ¨çš„åŠ ä¸Šè¯¦ç»†çš„æ³¨é‡Šã€‚\n19. [Git History](https://marketplace.visualstudio.com/items?itemName=donjayamanne.githistory) ï¼šæ–¹ä¾¿çš„æŸ¥çœ‹gitç‰ˆæœ¬ç®¡ç†çš„è¯¦ç»†ä¿¡æ¯ã€‚\n20. [Live Server](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer) ï¼šå¯ä»¥ä¸€é”®åœ¨æœ¬åœ°å¯åŠ¨æœåŠ¡å™¨ã€‚\n21. [Settings Sync](https://marketplace.visualstudio.com/items?itemName=Shan.code-settings-sync) ï¼šé‡ç‚¹ä»‹ç»ä¸‹è¿™ä¸ªæ’ä»¶ï¼Œå¦‚æœä½ æœ‰ä¸¤å°ç”µè„‘ï¼ˆæ¯”å¦‚ï¼Œå®¶é‡Œå’Œå…¬å¸ï¼‰éƒ½ä½¿ç”¨ VS Code ï¼Œå¯æ˜¯åœ¨å…¬å¸æˆ–å®¶é‡Œå¯¹ VS Code å®‰è£…äº†æ’ä»¶æˆ–è€…ä¿®æ”¹äº†é…ç½®ï¼Œå›åˆ°å®¶æˆ–å…¬å¸åˆè¦é‡æ–°å¼„ä¸€æ¬¡ï¼Œè¿™ä¸ªæ’ä»¶å°±èƒ½è§£å†³é—®é¢˜ï¼ŒåŒæ­¥å¤šå°ç”µè„‘è®¾ç½®ã€‚\n\nåªéœ€è¦æŠŠé…ç½®ä¸Šä¼ åˆ°GitHubï¼Œåœ¨å¦ä¸€ä¸ªåœ°æ–¹ä¸‹è½½é…ç½®å³å¯ï¼Œå¦‚ä¸‹\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_Sync.gif\" alt=\"Settings Sync\" width=\"100%\" title=\"Settings Sync\" align=\"center\" />\n\n22. [gi](https://marketplace.visualstudio.com/items?itemName=rubbersheep.gi) ï¼šå¯ä»¥ç»™ `.gitignore` æ–‡ä»¶æ·»åŠ å„ç§è¯­è¨€å¿½ç•¥æ–‡ä»¶é…ç½®ã€‚\n23. [Polacode](https://marketplace.visualstudio.com/items?itemName=pnp.polacode) ï¼šå¯ä»¥æŠŠä»£ç ç”Ÿæˆå›¾ç‰‡ï¼ˆæœ‰äº›åœ°æ–¹å‘ä»£ç ç»“æ„ä¼šä¹±ä¹Ÿæ²¡æœ‰ä»£ç é«˜äº®ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ç”Ÿæˆå›¾ç‰‡å†å‘ï¼‰ã€‚\n\n## ç¼–è¾‘æŠ€å·§\n\n### å…‰æ ‡\n\n1. æŠŠå…‰æ ‡ç§»åˆ°æ–‡ä»¶çš„é¦–éƒ¨æˆ–å°¾éƒ¨\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_1.gif\" alt=\"âŒ˜ - â†‘ æˆ– âŒ˜ - â†“\" width=\"100%\" title=\"âŒ˜ - â†‘ æˆ– âŒ˜ - â†“\" align=\"center\" />\n\n2. æŠŠå…‰æ ‡ç§»åŠ¨åˆ°è¡Œçš„é¦–éƒ¨æˆ–è€…å°¾éƒ¨\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_2.gif\" alt=\"âŒ˜ - â† æˆ– âŒ˜ - â†’\" width=\"100%\" title=\"âŒ˜ - â† æˆ– âŒ˜ - â†’\" align=\"center\" />\n\n3. æŒ‰å•è¯ç§»åŠ¨\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_3.gif\" alt=\"âŒ¥ - â† æˆ– âŒ¥ - â†’\" width=\"100%\" title=\"âŒ¥ - â† æˆ– âŒ¥ - â†’\" align=\"center\" />\n\n4. æŒ‰å•è¯å¤§å°å†™åˆ†è§£ç§»åŠ¨å…‰æ ‡\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_4.gif\" alt=\"âŒ¥ - âŒƒ - â† æˆ– âŒ¥ - âŒƒ - â†’\" width=\"100%\" title=\"âŒ¥ - âŒƒ - â† æˆ– âŒ¥ - âŒƒ - â†’\" align=\"center\" />\n\n### é€‰æ‹©\n\n5. é€‰æ‹©è¡Œä»¥ä¸Šæˆ–ä»¥ä¸‹å…¨éƒ¨å†…å®¹\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_5.gif\" alt=\"â‡§ - âŒ˜ - â†‘ æˆ– â‡§ - âŒ˜ - â†“\" width=\"100%\" title=\"â‡§ - âŒ˜ - â†‘ æˆ– â‡§ - âŒ˜ - â†“\" align=\"center\" />\n\n6. é€‰æ‹©åˆ°è¡Œé¦–æˆ–è¡Œå°¾çš„å†…å®¹\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_6.gif\" alt=\"â‡§ - âŒ˜ - â† æˆ– â‡§ - âŒ˜ - â†’\" width=\"100%\" title=\"â‡§ - âŒ˜ - â† æˆ– â‡§ - âŒ˜ - â†’\" align=\"center\" />\n\n7. æŒ‰å­—æ¯æˆ–å•è¯é€‰æ‹©\n\n- <kbd>â‡§</kbd> - <kbd>â†</kbd> ã€ <kbd>â‡§</kbd> - <kbd>â†’</kbd> æŒ‰å­—æ¯é€‰æ‹©   \n- <kbd>â‡§</kbd> - <kbd>âŒ¥</kbd> - <kbd>â†</kbd> ã€ <kbd>â‡§</kbd> - <kbd>âŒ¥</kbd> - <kbd>â†’</kbd> æŒ‰å•è¯é€‰æ‹©\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_7.gif\" alt=\"â‡§ - â† ã€ â‡§ - â†’ æˆ– â‡§ - âŒ¥ - â† ã€ â‡§ - âŒ¥ - â†’\" width=\"100%\" title=\"â‡§ - â† ã€ â‡§ - â†’ æˆ– â‡§ - âŒ¥ - â† ã€â‡§ - âŒ¥ - â†’\" align=\"center\" />\n\n8. ä¼¸ç¼©é€‰æ‹©\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_8.gif\" alt=\"â‡§ - âŒƒ - âŒ˜ - â† æˆ– â‡§ - âŒƒ - âŒ˜ - â†’\" width=\"100%\" title=\"â‡§ - âŒƒ - âŒ˜ - â† æˆ– â‡§ - âŒƒ - âŒ˜ - â†’\" align=\"center\" />\n\n9. é€‰æ‹©åŒ¹é…å•è¯\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_9.gif\" alt=\"âŒ˜ - D æˆ– âŒ˜ - U\" width=\"100%\" title=\"âŒ˜ - D æˆ– âŒ˜ - U\" align=\"center\" />\n\n### è¡Œ\n\n10. å‘ä¸Šæˆ–å‘ä¸‹ç§»åŠ¨è¡Œ\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_10.gif\" alt=\"âŒ¥ - â†‘ æˆ– âŒ¥ - â†“\" width=\"100%\" title=\"âŒ¥ - â†‘ æˆ– âŒ¥ - â†“\" align=\"center\" />\n\n11. å¤åˆ¶æˆ–åˆ é™¤è¡Œ\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_11.gif\" alt=\"âŒ¥ - â‡§ - â†“ æˆ– âŒ˜ - â‡§ - K\" width=\"100%\" title=\"âŒ¥ - â‡§ - â†“ æˆ– âŒ˜ - â‡§ - K\" align=\"center\" />\n\n12. å¤šè¡Œåˆå¹¶æˆä¸€è¡Œ\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_12.gif\" alt=\"âŒ˜ - J\" width=\"100%\" title=\"âŒ˜ - J\" align=\"center\" />\n\n13. ç¼©è¿›æˆ–ä¼¸ç¼©è¡Œ\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_13.gif\" alt=\"âŒ˜ - [ æˆ– âŒ˜ - ]\" width=\"100%\" title=\"âŒ˜ - [ æˆ– âŒ˜ - ]\" align=\"center\" />\n\n14. åœ¨å½“å‰è¡Œä¹‹ä¸Šæˆ–ä¸‹æ’å…¥è¡Œ\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_14.gif\" alt=\"âŒ˜ - â†© æˆ– âŒ˜ - â‡§ - â†©\" width=\"100%\" title=\"âŒ˜ - â†© æˆ– âŒ˜ - â‡§ - â†©\" align=\"center\" />\n\n### å¤šè¡Œ\n\n15. é¼ æ ‡ç‚¹å‡»ï¼Œå¤šè¡Œç¼–è¾‘\n\næŒ‰ <kbd>âŒ˜</kbd> é€‰æ‹©ç¼–è¾‘ç‚¹ï¼ŒæŒ‰ <kbd>â‹</kbd> é€€å‡ºå¤šè¡Œç¼–è¾‘\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_15.gif\" alt=\"âŒ˜\" width=\"100%\" title=\"âŒ˜\" align=\"center\" />\n\n16. ä½¿ç”¨å¿«æ·é”®å¤šè¡Œç¼–è¾‘\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_16.gif\" alt=\"âŒ˜ - âŒ¥ - â†“ æˆ– âŒ˜ - âŒ¥ - â†‘\" width=\"100%\" title=\"âŒ˜ - âŒ¥ - â†“ æˆ– âŒ˜ - âŒ¥ - â†‘\" align=\"center\" />\n\n17. åœ¨æ‰€é€‰æ‹©çš„è¡Œçš„ç»“å°¾æ’å…¥ç¼–è¾‘ç‚¹\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_17.gif\" alt=\"â‡§ - âŒ¥ - I\" width=\"100%\" title=\"â‡§ - âŒ¥ - I\" align=\"center\" />\n\n18. é€‰æ‹©æ ä½\n\næŒ‰ <kbd>â‡§</kbd> - <kbd>âŒ˜</kbd> å†é€‰æ‹©æ ä½\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_18.gif\" alt=\"â‡§ - âŒ˜\" width=\"100%\" title=\"â‡§ - âŒ˜\" align=\"center\" />\n\n### é«˜çº§\n\n19. æŸ¥çœ‹ç±»æˆ–æ–¹æ³•çš„å®šä¹‰\n\n- æŒ‰ <kbd>âŒ¥</kbd> ç‚¹å‡»ï¼Œå¯ä»¥åœ¨æ–°é¡µé¢æŸ¥çœ‹\n- æŒ‰ <kbd>â‡§</kbd> - <kbd>âŒ¥</kbd> - <kbd>âŒ˜</kbd> ç‚¹å‡»ï¼Œå¯ä»¥åœ¨æ–°ç»„æŸ¥çœ‹\n- æŒ‰ <kbd>â‡§</kbd> - <kbd>F12</kbd> ç‚¹å‡»ï¼Œå¯ä»¥åœ¨å½“å‰é¡µé¢æŸ¥çœ‹\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_19.gif\" alt=\"æŸ¥çœ‹å®šä¹‰\" width=\"100%\" title=\"æŸ¥çœ‹å®šä¹‰\" align=\"center\" />\n\n20. æŠ˜å ä»£ç \n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_20.gif\" alt=\"âŒ¥ - âŒ˜ - ] æˆ– âŒ¥ - âŒ˜ - [\" width=\"100%\" title=\"âŒ¥ - âŒ˜ - ] æˆ– âŒ¥ - âŒ˜ - [\" align=\"center\" />\n\n21. å»æ‰é€‰æ‹©è¡Œçš„å°¾éƒ¨ç©ºæ ¼\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_21.gif\" alt=\"âŒ˜ - K ã€ âŒ˜ - X\" width=\"100%\" title=\"âŒ˜ - K ã€ âŒ˜ - X\" align=\"center\" />\n\n22. å®šä½åˆ°æŒ‡å®šè¡Œå·\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_22.gif\" alt=\"âŒƒ - G\" width=\"100%\" title=\"âŒƒ - G\" align=\"center\" />\n\n23. åœ¨æ–‡ä»¶é‡ŒæŸ¥æ‰¾ç±»æˆ–æ–¹æ³•\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_23.gif\" alt=\"@\" width=\"100%\" title=\"@\" align=\"center\" />\n\næœ€åï¼Œå¦‚æœè®°ä¸ä½è¿™äº›å¿«æ·é”®ï¼Œå¯ä»¥æŒ‰ <kbd>âŒ˜</kbd> - <kbd>K</kbd> ã€ <kbd>âŒ˜</kbd> - <kbd>S</kbd> æœç´¢å¯¹åº”å¿«æ·é”®ç»‘å®š\n\n<img src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code_24.gif\" alt=\"æœç´¢å¿«æ·é”®\" width=\"100%\" title=\"æœç´¢å¿«æ·é”®\" align=\"center\" />\n\n<img class=\"hidden\" src=\"https://cdn.lishaoy.net/VSCodeCodingSkills/vs-code.jpg\" alt=\"VS Code\" width=\"100%\" title=\"VS Code\" align=\"center\">","tags":["VS Code"],"categories":["å·¥å…·"]},{"title":"ç™¾åº¦ç»Ÿè®¡","url":"%2Fbaidustatistics.html","content":"\n{% li https://cdn.lishaoy.net/baidustatistics/lishaoy.net.990x699.jpg, lishaoy.net, lishaoy.net %}\n\nå‰å¤©ï¼Œå¼„äº†ä¸ªç™¾åº¦ç»Ÿè®¡ï¼Œçœ‹çœ‹æ•°æ®è¿˜æŒºæœ‰æ„æ€ã€‚ã€‚ã€‚\n \n<!-- more -->\n\n**ç«™ç‚¹** æ¥å…¥ **ç™¾åº¦ç»Ÿè®¡** ï¼Œè¿˜æ˜¯æŒºç®€å•çš„ï¼š\n\n- é¦–å…ˆï¼Œå» [ç™¾åº¦ç»Ÿè®¡](https://tongji.baidu.com/web/welcome/login) æ³¨å†Œè´¦å·ï¼Œæ ¹æ®æç¤ºç»‘å®šè‡ªå·±ç«™ç‚¹åŸŸå\n- ä¹‹åï¼ŒæŠŠæä¾›çš„ `js` ä»£ç æ”¾åˆ°è‡ªå·±ç«™ç‚¹\n\n```javascript \n  //ç™¾åº¦ç»Ÿè®¡\n  var _hmt = _hmt || [];\n  (function () {\n    var hm = document.createElement(\"script\");\n    hm.src = \"https://hm.baidu.com/hm.js?5fd52c901f2213883f51a476eab3914b\";\n    var l = document.getElementsByTagName(\"script\").length;\n    var s = document.getElementsByTagName(\"script\")[l - 1];\n    s.parentNode.insertBefore(hm, s);\n  })();\n```\n\nè¿™äº›è®¾ç½®å¥½ä¹‹åï¼Œå°±å¯ä»¥çœ‹åˆ°ç»Ÿè®¡æ•°æ®äº†ï¼Œæ¥çœ‹çœ‹ ğŸ‘€ _2018-05-29_ å½“å¤©çš„ç»Ÿè®¡æ•°æ®æƒ…å†µå¦‚ä½•\n\n#### ä»Šæ—¥æµé‡\n\nçºµè½´åˆ†åˆ«æ˜¯ _ä»Šæ—¥ã€æ˜¨æ—¥ã€é¢„è®¡ä»Šæ—¥_ ï¼Œæ¨ªè½´åˆ†åˆ«æ˜¯ _PVã€UVã€IPã€è·³å‡ºç‡ã€å¹³å‡è®¿é—®æ—¶é•¿_ ç­‰ ï¼ˆé¢„è®¡ä»Šæ—¥çš„æ•°æ®ï¼Œä¸æ˜¯å¾ˆé è°±ï¼‰\n\n<img src=\"https://cdn.lishaoy.net/baidustatistics/1.png\" alt=\"ä»Šæ—¥æµé‡\" width=\"100%\" title=\"ä»Šæ—¥æµé‡\" align=\"center\" />\n\n\n#### æ¥æºç½‘ç«™\n\nä¼šåˆ—å‡ºè®¿å®¢ä»å“ªå„¿æ¥åˆ°ä½ çš„**ç«™ç‚¹**ï¼Œä»¥åŠä¼šç»Ÿè®¡è®¿é—®æ—¶é•¿ç­‰\n\n<img src=\"https://cdn.lishaoy.net/baidustatistics/2.png\" alt=\"æ¥æºç½‘ç«™\" width=\"100%\" title=\"æ¥æºç½‘ç«™\" align=\"center\" />\n\n#### å—æ¬¢è¿é¡µé¢\n\nä¼šç»Ÿè®¡æ¯ä¸ªé¡µé¢çš„ _æµè§ˆé‡ã€é€€å‡ºæ¬¡æ•°ã€å¹³å‡åœç•™æ—¶é—´_ ç­‰\n\n<img src=\"https://cdn.lishaoy.net/baidustatistics/3.png\" alt=\"å—æ¬¢è¿é¡µé¢\" width=\"100%\" title=\"å—æ¬¢è¿é¡µé¢\" align=\"center\" />\n\n#### æ–°è€è®¿å®¢\n\nä¼šç»Ÿè®¡æ–°è€è®¿å®¢ _æµè§ˆé‡ã€å¹³å‡è®¿é—®æ—¶é•¿ã€å¹³å‡è®¿é—®é¡µæ•°_ ç­‰\n\n<img src=\"https://cdn.lishaoy.net/baidustatistics/4.png\" alt=\"æ–°è€è®¿å®¢\" width=\"100%\" title=\"æ–°è€è®¿å®¢\" align=\"center\" />\n\n#### åœ°åŸŸåˆ†å¸ƒ\n\nä¼šç»Ÿè®¡è®¿å®¢æ¥è‡ªå“ªä¸ª _å›½å®¶ã€çœä»½ã€åŸå¸‚ã€ç½‘ç»œè¿è¥å•†_ ç­‰\n\n<img src=\"https://cdn.lishaoy.net/baidustatistics/5.png\" alt=\"åœ°åŸŸåˆ†å¸ƒ\" width=\"100%\" title=\"åœ°åŸŸåˆ†å¸ƒ\" align=\"center\" />\n\nè¿™é‡Œæˆ‘åªå±•ç¤ºéƒ¨åˆ†ç»Ÿè®¡åŠŸèƒ½ï¼Œå¦‚æƒ³äº†è§£å…¶å®ƒæ›´å¤šåŠŸèƒ½ï¼Œå¯å» [ç™¾åº¦ç»Ÿè®¡](https://tongji.baidu.com/web/welcome/login) ç½‘ç«™æŸ¥çœ‹ã€‚","tags":["ç»Ÿè®¡"],"categories":["hexo"]},{"title":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","url":"%2FwebOptimize.html","content":"\n{% fi https://cdn.lishaoy.net/webOptimize/Optimize.png, web optimize, web optimize %}\n\nå…³äº **æ€§èƒ½ä¼˜åŒ–** æ˜¯ä¸ªå¤§çš„é¢ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦æ¶‰åŠåˆ° **å‰ç«¯** çš„å‡ ä¸ªç‚¹ï¼Œå¦‚ **å‰ç«¯æ€§èƒ½ä¼˜åŒ–** çš„æµç¨‹ã€å¸¸è§æŠ€æœ¯æ‰‹æ®µã€å·¥å…·ç­‰ã€‚\n\næåŠ **å‰ç«¯æ€§èƒ½ä¼˜åŒ–** ï¼Œå¤§å®¶åº”è¯¥éƒ½ä¼šæƒ³åˆ° **é›…è™å†›è§„**ï¼Œæœ¬æ–‡ä¼šç»“åˆ **é›…è™å†›è§„** èå…¥è‡ªå·±çš„äº†è§£çŸ¥è¯†ï¼Œè¿›è¡Œçš„æ€»ç»“å’Œæ¢³ç† ğŸ˜œ\n\n<!-- more -->\n\né¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ ğŸ‘€ **é›…è™å†›è§„** çš„ **35** æ¡ã€‚\n\n{% note info %} \n1. å°½é‡å‡å°‘ HTTP è¯·æ±‚ä¸ªæ•°â€”â€”é¡»æƒè¡¡\n2. ä½¿ç”¨ **CDN**ï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰\n3. ä¸ºæ–‡ä»¶å¤´æŒ‡å®š Expires æˆ– Cache-Control ï¼Œä½¿å†…å®¹å…·æœ‰ç¼“å­˜æ€§ã€‚\n4. é¿å…ç©ºçš„ src å’Œ href\n5. ä½¿ç”¨ gzip å‹ç¼©å†…å®¹\n6. æŠŠ CSS æ”¾åˆ°é¡¶éƒ¨\n7. æŠŠ JS æ”¾åˆ°åº•éƒ¨\n8. é¿å…ä½¿ç”¨ CSS è¡¨è¾¾å¼\n9. å°† CSS å’Œ JS æ”¾åˆ°å¤–éƒ¨æ–‡ä»¶ä¸­\n10. å‡å°‘ DNS æŸ¥æ‰¾æ¬¡æ•°\n11. ç²¾ç®€ CSS å’Œ JS\n12. é¿å…è·³è½¬\n13. å‰”é™¤é‡å¤çš„ JS å’Œ CSS\n14. é…ç½® ETags\n15. ä½¿ AJAX å¯ç¼“å­˜\n16. å°½æ—©åˆ·æ–°è¾“å‡ºç¼“å†²\n17. ä½¿ç”¨ GET æ¥å®Œæˆ AJAX è¯·æ±‚\n18. å»¶è¿ŸåŠ è½½\n19. é¢„åŠ è½½\n20. å‡å°‘ DOM å…ƒç´ ä¸ªæ•°\n21. æ ¹æ®åŸŸååˆ’åˆ†é¡µé¢å†…å®¹\n22. å°½é‡å‡å°‘ iframe çš„ä¸ªæ•°\n23. é¿å… 404\n24. å‡å°‘ Cookie çš„å¤§å°\n25. ä½¿ç”¨æ—  cookie çš„åŸŸ\n26. å‡å°‘ DOM è®¿é—®\n27. å¼€å‘æ™ºèƒ½äº‹ä»¶å¤„ç†ç¨‹åº\n28. ç”¨ <link> ä»£æ›¿ @import\n29. é¿å…ä½¿ç”¨æ»¤é•œ\n30. ä¼˜åŒ–å›¾åƒ\n31. ä¼˜åŒ– CSS Spirite\n32. ä¸è¦åœ¨ HTML ä¸­ç¼©æ”¾å›¾åƒâ€”â€”é¡»æƒè¡¡\n33. favicon.icoè¦å°è€Œä¸”å¯ç¼“å­˜\n34. ä¿æŒå•ä¸ªå†…å®¹å°äº25K\n35. æ‰“åŒ…ç»„ä»¶æˆå¤åˆæ–‡æœ¬\n{% endnote %}  \n\nå¦‚å¯¹ **é›…è™å†›è§„** çš„å…·ä½“ç»†åˆ™å†…å®¹ä¸æ˜¯å¾ˆäº†è§£ï¼Œå¯è‡ªè¡Œå»å„æœç´¢ ğŸ” å¼•æ“ ï¼Œæœç´¢ **é›…è™å†›è§„** äº†è§£è¯¦æƒ…ã€‚\n\n## å‹ç¼© åˆå¹¶\n\nå¯¹äº **å‰ç«¯æ€§èƒ½ä¼˜åŒ–** è‡ªç„¶è¦å…³æ³¨ **é¦–å±** æ‰“å¼€é€Ÿåº¦ï¼Œè€Œè¿™ä¸ªé€Ÿåº¦ï¼Œå¾ˆå¤§å› ç´ æ˜¯èŠ±è´¹åœ¨ç½‘ç»œè¯·æ±‚ä¸Šï¼Œé‚£ä¹ˆæ€ä¹ˆå‡å°‘ç½‘ç»œè¯·æ±‚çš„æ—¶é—´å‘¢ï¼Ÿ\n\n- å‡å°‘ç½‘ç»œè¯·æ±‚æ¬¡æ•° \n- å‡å°æ–‡ä»¶ä½“ç§¯\n- ä½¿ç”¨ `CDN` åŠ é€Ÿ\n\næ‰€ä»¥ **å‹ç¼©ã€åˆå¹¶** å°±æ˜¯ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå½“ç„¶å¯ä»¥ç”¨ `gulp` ã€ `webpack` ã€ `grunt` ç­‰æ„å»ºå·¥å…· **å‹ç¼©ã€åˆå¹¶**\n\n### `JSã€CSS` å‹ç¼© åˆå¹¶\n\nä¾‹å¦‚ï¼š`gulp jsã€css` å‹ç¼©ã€åˆå¹¶ä»£ç å¦‚ä¸‹ ğŸ‘‡\n\n```javascript javascript https://lishaoy.net/webOptimize.html#JSã€CSS-å‹ç¼©-åˆå¹¶ gulpfile.js\n//å‹ç¼©ã€åˆå¹¶js\ngulp.task('scripts', function () {\n    return gulp.src([\n        './public/lib/fastclick/lib/fastclick.min.js',\n        './public/lib/jquery_lazyload/jquery.lazyload.js',\n        './public/lib/velocity/velocity.min.js',\n        './public/lib/velocity/velocity.ui.min.js',\n        './public/lib/fancybox/source/jquery.fancybox.pack.js',\n        './public/js/src/utils.js',\n        './public/js/src/motion.js',\n        './public/js/src/scrollspy.js',\n        './public/js/src/post-details.js',\n        './public/js/src/bootstrap.js',\n        './public/js/src/push.js',\n        './public/live2dw/js/perTips.js',\n        './public/live2dw/lib/L2Dwidget.min.js',\n        './public/js/src/love.js',\n        './public/js/src/busuanzi.pure.mini.js',\n        './public/js/src/activate-power-mode.js'\n    ]).pipe(concat('all.js')).pipe(minify()).pipe(gulp.dest('./public/dist/'));\n});\n\n// å‹ç¼©ã€åˆå¹¶ CSS \ngulp.task('css', function () {\n    return gulp.src([\n        './public/lib/font-awesome/css/font-awesome.min.css',\n        './public/lib/fancybox/source/jquery.fancybox.css',\n        './public/css/main.css',\n        './public/css/lib.css',\n        './public/live2dw/css/perTips.css'\n    ]).pipe(concat('all.css')).pipe(minify()).pipe(gulp.dest('./public/dist/'));\n});\n```\nç„¶åï¼Œå†æŠŠ **å‹ç¼©ã€åˆå¹¶** çš„ `JSã€CSS` æ”¾å…¥ `CDN` , ğŸ‘€ çœ‹çœ‹æ•ˆæœå¦‚ä½•\n\nå¦‚å›¾ï¼š* **å‹ç¼©ã€åˆå¹¶** ä¸”æ”¾å…¥ `CND` ä¹‹åçš„æ•ˆæœ *\n\n<img src=\"https://cdn.lishaoy.net/webOptimize/concatJs.png\" alt=\"é¦–é¡µè¯·æ±‚é€Ÿåº¦(js)\" width=\"100%\" title=\"é¦–é¡µè¯·æ±‚é€Ÿåº¦(js)\" align=\"center\" />\n\n<img src=\"https://cdn.lishaoy.net/webOptimize/concatCss.png\" alt=\"é¦–é¡µè¯·æ±‚é€Ÿåº¦(css)\" width=\"100%\" title=\"é¦–é¡µè¯·æ±‚é€Ÿåº¦(css)\" align=\"center\" />\n\nä»¥ä¸Šæ˜¯ [lishaoy.net](https://lishaoy.net) æ¸…é™¤ç¼“å­˜åçš„ **é¦–é¡µ** è¯·æ±‚é€Ÿåº¦ã€‚\n\nå¯è§ï¼Œè¯·æ±‚æ—¶é—´æ˜¯ **4.59 s** ï¼Œæ€»è¯·æ±‚ä¸ªæ•° **51** ï¼Œ è€Œ `js` çš„è¯·æ±‚ä¸ªæ•°æ˜¯ **8** ï¼Œ`css` çš„è¯·æ±‚ä¸ªæ•°æ˜¯ **3** _ï¼ˆå…¶å®å°± all.css ä¸€ä¸ªï¼Œå…¶å®ƒ 2 ä¸ªæ˜¯ Googleæµè§ˆå™¨åŠ è½½çš„ï¼‰_ï¼Œ è€Œæ²¡ä½¿ç”¨ **å‹ç¼©ã€åˆå¹¶** æ—¶å€™ï¼Œè¯·æ±‚æ—¶é—´æ˜¯ **10** å¤šç§’ï¼Œæ€»è¯·æ±‚ä¸ªæ•°æœ‰ **70** å¤šä¸ªï¼Œ`js` çš„è¯·æ±‚ä¸ªæ•°æ˜¯ **20** å¤šä¸ª ï¼Œå¯¹æ¯”è¯·æ±‚æ—¶é—´ **æ€§èƒ½** æå‡ **1å€** å¤š\n\nå¦‚å›¾ï¼š*æœ‰ç¼“å­˜ä¸‹çš„é¦–é¡µæ•ˆæœ*\n\n<img src=\"https://cdn.lishaoy.net/webOptimize/concatJs2.png\" alt=\"é¦–é¡µè¯·æ±‚é€Ÿåº¦ï¼ˆç¼“å­˜ï¼‰\" width=\"100%\" title=\"é¦–é¡µè¯·æ±‚é€Ÿåº¦ï¼ˆç¼“å­˜ï¼‰\" align=\"center\" />\n\nåŸºæœ¬éƒ½æ˜¯ç§’å¼€ ğŸ˜\n\n{% note warning %}\n*Tipsï¼šåœ¨ **å‹ç¼©ã€åˆå¹¶** åï¼Œå•ä¸ªæ–‡ä»¶æ§åˆ¶åœ¨ 25 ~ 30 KBå·¦å³ï¼ŒåŒä¸€ä¸ªåŸŸä¸‹ï¼Œæœ€å¥½ä¸è¦å¤šäº5ä¸ªèµ„æº*\n{% endnote %} \n\n### å›¾ç‰‡å‹ç¼©ã€åˆå¹¶ \n\nä¾‹å¦‚ï¼š`gulp` å›¾ç‰‡å‹ç¼©ä»£ç å¦‚ä¸‹ ğŸ‘‡\n\n```javascript javascript https://lishaoy.net/webOptimize.html#å›¾ç‰‡å‹ç¼©ã€åˆå¹¶ gulpfile.js\n//å‹ç¼©image\ngulp.task('imagemin', function () {\n    gulp.src('./public/**/*.{png,jpg,gif,ico,jpeg}')\n        .pipe(imagemin())\n        .pipe(gulp.dest('./public'));\n});\n```\n\nå›¾ç‰‡çš„åˆå¹¶å¯ä»¥é‡‡ç”¨ `CSS Spirite`ï¼Œæ–¹æ³•å°±æ˜¯æŠŠä¸€äº›å°å›¾ç”¨ `PS` åˆæˆä¸€å¼ å›¾ï¼Œç”¨ `css` å®šä½æ˜¾ç¤ºæ¯å¼ å›¾ç‰‡çš„ä½ç½®\n\n```css css\n.top_right .phone {\nÂ Â Â Â background: url(../images/top_right.png) no-repeat 7px -17px;\nÂ Â Â Â padding: 0 38px;\n}\n\n.top_right .help {\nÂ Â Â Â background: url(../images/top_right.png) no-repeat 0 -47px;\nÂ Â Â Â padding: 0 38px;\n}\n```\n\nç„¶åï¼ŒæŠŠ **å‹ç¼©** çš„å›¾ç‰‡æ”¾å…¥ `CDN` , ğŸ‘€ çœ‹çœ‹ï¼Œæ•ˆæœå¦‚ä½•\n\n<img src=\"https://cdn.lishaoy.net/webOptimize/minImages.png\" alt=\"é¦–é¡µè¯·æ±‚é€Ÿåº¦ï¼ˆimagesï¼‰\" width=\"100%\" title=\"é¦–é¡µè¯·æ±‚é€Ÿåº¦ï¼ˆimagesï¼‰\" align=\"center\" />\n\nå¯è§ï¼Œè¯·æ±‚æ—¶é—´æ˜¯ **1.70 s** ,æ€»è¯·æ±‚ä¸ªæ•° **50** ï¼Œ è€Œ `img` çš„è¯·æ±‚ä¸ªæ•°æ˜¯ **15** _ï¼ˆè¿™é‡Œå› ä¸ºé¦–é¡µéƒ½æ˜¯å¤§å›¾ï¼Œå°±æ²¡æœ‰åˆå¹¶ï¼Œåªæ˜¯å‹ç¼©äº†ï¼‰_ ï¼Œä½†æ˜¯ï¼Œæ•ˆæœå¾ˆå¥½ ğŸ˜€ ï¼Œä» **4.59 s** ç¼©çŸ­åˆ° **1.70 s**, æ€§èƒ½åˆæå‡ä¸€å€ã€‚\n\nå†çœ‹çœ‹æœ‰ç¼“å­˜æƒ…å†µå¦‚ä½• ğŸ˜\n\n<img src=\"https://cdn.lishaoy.net/webOptimize/minImages1.png\" alt=\"é¦–é¡µè¯·æ±‚é€Ÿåº¦ï¼ˆimages ç¼“å­˜ï¼‰\" width=\"100%\" title=\"é¦–é¡µè¯·æ±‚é€Ÿåº¦ï¼ˆimages ç¼“å­˜ï¼‰\" align=\"center\" />\n\nè¯·æ±‚æ—¶é—´æ˜¯ **1.05 s** ï¼Œæœ‰ç¼“å­˜å’Œæ— ç¼“å­˜åŸºæœ¬å·®ä¸å¤š\n\n{% note warning %}\n*Tipsï¼šå¤§çš„å›¾ç‰‡åœ¨ä¸åŒç»ˆç«¯ï¼Œåº”è¯¥ä½¿ç”¨ä¸åŒåˆ†è¾¨ç‡ï¼Œè€Œä¸åº”è¯¥ä½¿ç”¨ç¼©æ”¾ï¼ˆç™¾åˆ†æ¯”ï¼‰*\n{% endnote %} \n\næ•´ä¸ª **å‹ç¼©ã€åˆå¹¶** _ï¼ˆjsã€cssã€imgï¼‰_ å†æ”¾å…¥ `CDN` ï¼Œè¯·æ±‚æ—¶é—´ä» **10** å¤šç§’ ï¼Œåˆ°æœ€åçš„ **1.70 s** ï¼Œæ€§èƒ½æå‡ **5** å€å¤šï¼Œå¯è§ï¼Œè¿™ä¸ªæ“ä½œå¿…è¦æ€§ã€‚\n\n---\n\n## ç¼“å­˜\n\nç¼“å­˜ä¼šæ ¹æ®è¯·æ±‚ä¿å­˜è¾“å‡ºå†…å®¹çš„å‰¯æœ¬ï¼Œä¾‹å¦‚ **é¡µé¢ã€å›¾ç‰‡ã€æ–‡ä»¶**ï¼Œå½“ä¸‹ä¸€ä¸ªè¯·æ±‚æ¥åˆ°çš„æ—¶å€™:å¦‚æœæ˜¯ç›¸åŒçš„`URL`ï¼Œç¼“å­˜ç›´æ¥ä½¿ ç”¨æœ¬åœ°çš„å‰¯æœ¬å“åº”è®¿é—®è¯·æ±‚ï¼Œè€Œä¸æ˜¯å‘æºæœåŠ¡å™¨å†æ¬¡å‘é€è¯·æ±‚ã€‚å› æ­¤ï¼Œå¯ä»¥ä»ä»¥ä¸‹ **2** ä¸ªæ–¹é¢æå‡æ€§èƒ½ã€‚\n\n- å‡å°‘ç›¸åº”å»¶è¿Ÿï¼Œæå‡å“åº”æ—¶é—´\n- å‡å°‘ç½‘ç»œå¸¦å®½æ¶ˆè€—ï¼ŒèŠ‚çœæµé‡\n\næˆ‘ä»¬ç”¨ä¸¤å¹…å›¾æ¥äº†è§£ä¸‹æµè§ˆå™¨çš„ **ç¼“å­˜æœºåˆ¶**\n\n**æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚**\n\n![no-shadow](https://cdn.lishaoy.net/webOptimize/webCache3.png \"ç¬¬ä¸€æ¬¡è¯·æ±‚\")\n\n**æµè§ˆå™¨å†æ¬¡è¯·æ±‚**\n\n![no-shadow](https://cdn.lishaoy.net/webOptimize/webCache4.png \"å†æ¬¡è¯·æ±‚\")\n\nä»ä»¥ä¸Šä¸¤å¹…å›¾ä¸­ï¼Œå¯ä»¥æ¸…æ¥šçš„äº†è§£æµè§ˆå™¨ **ç¼“å­˜** çš„è¿‡ç¨‹ã€‚\né¦–æ¬¡è®¿é—®ä¸€ä¸ª `URL` ï¼Œæ²¡æœ‰ **ç¼“å­˜** ï¼Œä½†æ˜¯ï¼ŒæœåŠ¡å™¨ä¼šå“åº”ä¸€äº› `header` ä¿¡æ¯ï¼Œå¦‚ï¼š`expiresã€cache-controlã€last-modifiedã€etag` ç­‰ï¼Œæ¥è®°å½•ä¸‹æ¬¡è¯·æ±‚æ˜¯å¦ç¼“å­˜ã€å¦‚ä½•ç¼“å­˜ã€‚\nå†æ¬¡è®¿é—®è¿™ä¸ª `URL` æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šæ ¹æ®é¦–æ¬¡è®¿é—®è¿”å›çš„ `header` ä¿¡æ¯ï¼Œæ¥å†³ç­–æ˜¯å¦ç¼“å­˜ã€å¦‚ä½•ç¼“å­˜ã€‚\næˆ‘ä»¬é‡ç‚¹æ¥åˆ†æä¸‹ç¬¬äºŒå¹…å›¾ï¼Œå…¶å®æ˜¯åˆ†ä¸¤æ¡çº¿è·¯ï¼Œå¦‚ä¸‹ ğŸ‘‡\n\n- **ç¬¬ä¸€æ¡çº¿è·¯ï¼š** å½“æµè§ˆå™¨å†æ¬¡è®¿é—®æŸä¸ª `URL` æ—¶ï¼Œä¼šå…ˆè·å–èµ„æºçš„ `header` ä¿¡æ¯ï¼Œåˆ¤æ–­æ˜¯å¦å‘½ä¸­å¼ºç¼“å­˜ _ï¼ˆcache-controlå’Œexpiresï¼‰_ ï¼Œå¦‚å‘½ä¸­ï¼Œç›´æ¥ä»ç¼“å­˜è·å–èµ„æºï¼ŒåŒ…æ‹¬å“åº”çš„ `header` ä¿¡æ¯ _ï¼ˆè¯·æ±‚ä¸ä¼šå’ŒæœåŠ¡å™¨é€šä¿¡ï¼‰_ ï¼Œä¹Ÿå°±æ˜¯ **å¼ºç¼“å­˜** ï¼Œå¦‚å›¾\n\n<img src=\"https://cdn.lishaoy.net/webOptimize/webCache2.png\" alt=\"å¼ºç¼“å­˜\" width=\"100%\" title=\"å¼ºç¼“å­˜\" align=\"center\" />\n\n\n- **ç¬¬äºŒæ¡çº¿è·¯ï¼š** å¦‚æ²¡æœ‰å‘½ä¸­ **å¼ºç¼“å­˜** ï¼Œæµè§ˆå™¨ä¼šå‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œè¯·æ±‚ä¼šæºå¸¦ç¬¬ä¸€æ¬¡è¯·æ±‚è¿”å›çš„æœ‰å…³ç¼“å­˜çš„ `header` ä¿¡æ¯ _ï¼ˆLast-Modified/If-Modified-Sinceå’ŒEtag/If-None-Matchï¼‰_ ï¼Œç”±æœåŠ¡å™¨æ ¹æ®è¯·æ±‚ä¸­çš„ç›¸å…³ `header` ä¿¡æ¯æ¥æ¯”å¯¹ç»“æœæ˜¯å¦åå•†ç¼“å­˜å‘½ä¸­ï¼›è‹¥å‘½ä¸­ï¼Œåˆ™æœåŠ¡å™¨è¿”å›æ–°çš„å“åº” `header` ä¿¡æ¯æ›´æ–°ç¼“å­˜ä¸­çš„å¯¹åº” `header` ä¿¡æ¯ï¼Œä½†æ˜¯å¹¶ä¸è¿”å›èµ„æºå†…å®¹ï¼Œå®ƒä¼šå‘ŠçŸ¥æµè§ˆå™¨å¯ä»¥ç›´æ¥ä»ç¼“å­˜è·å–ï¼›å¦åˆ™è¿”å›æœ€æ–°çš„èµ„æºå†…å®¹ï¼Œä¹Ÿå°±æ˜¯ **åå•†ç¼“å­˜**ã€‚\n\nç°åœ¨ï¼Œæˆ‘ä»¬äº†è§£åˆ°æµè§ˆå™¨ç¼“å­˜æœºåˆ¶åˆ†ä¸º **å¼ºç¼“å­˜ã€åå•†ç¼“å­˜**ï¼Œå†æ¥çœ‹çœ‹ä»–ä»¬çš„åŒºåˆ« ğŸ‘‡\n\n|  ç¼“å­˜ç­–ç•¥   |  è·å–èµ„æºå½¢å¼  |  çŠ¶æ€ç                    |  å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨               |\n| :--------: | :----------: | :----------------------: | :--------------------------: |\n|  å¼ºç¼“å­˜     | ä»ç¼“å­˜å–      | 200ï¼ˆfrom memory cacheï¼‰  |  å¦ï¼Œç›´æ¥ä»ç¼“å­˜å–               |\n|  åå•†ç¼“å­˜   | ä»ç¼“å­˜å–      | 304ï¼ˆnot modifiedï¼‰       |  æ˜¯ï¼Œé€šè¿‡æœåŠ¡å™¨æ¥å‘ŠçŸ¥ç¼“å­˜æ˜¯å¦å¯ç”¨  |\n\n### \bå¼ºç¼“å­˜\n\nä¸å¼ºç¼“å­˜ç›¸å…³çš„ `header` å­—æ®µæœ‰ä¸¤ä¸ªï¼š\n\n#### expires\n\n**expiresï¼š** è¿™æ˜¯ `http1.0` æ—¶çš„è§„èŒƒï¼Œå®ƒçš„å€¼ä¸ºä¸€ä¸ªç»å¯¹æ—¶é—´çš„ **GMT** æ ¼å¼çš„æ—¶é—´å­—ç¬¦ä¸²ï¼Œå¦‚ `Mon, 10 Jun 2015 21:31:12 GMT` ï¼Œå¦‚æœå‘é€è¯·æ±‚çš„æ—¶é—´åœ¨ **expires** ä¹‹å‰ï¼Œé‚£ä¹ˆæœ¬åœ°ç¼“å­˜å§‹ç»ˆæœ‰æ•ˆï¼Œå¦åˆ™å°±ä¼šå‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨æ¥è·å–èµ„æº\n\n#### cache-control\n\n**cache-control:** `max-age=number` ï¼Œè¿™æ˜¯ `http1.1` æ—¶å‡ºç°çš„ `header` ä¿¡æ¯ï¼Œä¸»è¦æ˜¯åˆ©ç”¨è¯¥å­—æ®µçš„ `max-age` å€¼æ¥è¿›è¡Œåˆ¤æ–­ï¼Œå®ƒæ˜¯ä¸€ä¸ªç›¸å¯¹å€¼ï¼›èµ„æºç¬¬ä¸€æ¬¡çš„è¯·æ±‚æ—¶é—´å’Œ **Cache-Control** è®¾å®šçš„æœ‰æ•ˆæœŸï¼Œè®¡ç®—å‡ºä¸€ä¸ªèµ„æºè¿‡æœŸæ—¶é—´ï¼Œå†æ‹¿è¿™ä¸ªè¿‡æœŸæ—¶é—´è·Ÿå½“å‰çš„è¯·æ±‚æ—¶é—´æ¯”è¾ƒï¼Œå¦‚æœè¯·æ±‚æ—¶é—´åœ¨è¿‡æœŸæ—¶é—´ä¹‹å‰ï¼Œå°±èƒ½å‘½ä¸­ç¼“å­˜ï¼Œå¦åˆ™æœªå‘½ä¸­ï¼Œ **cache-control** é™¤äº†è¯¥å­—æ®µå¤–ï¼Œè¿˜æœ‰ä¸‹é¢å‡ ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„è®¾ç½®å€¼ï¼š\n\n- **no-cacheï¼š** ä¸ä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€‚éœ€è¦ä½¿ç”¨ç¼“å­˜åå•†ï¼Œå…ˆä¸æœåŠ¡å™¨ç¡®è®¤è¿”å›çš„å“åº”æ˜¯å¦è¢«æ›´æ”¹ï¼Œå¦‚æœä¹‹å‰çš„å“åº”ä¸­å­˜åœ¨ `ETag` ï¼Œé‚£ä¹ˆè¯·æ±‚çš„æ—¶å€™ä¼šä¸æœåŠ¡ç«¯éªŒè¯ï¼Œå¦‚æœèµ„æºæœªè¢«æ›´æ”¹ï¼Œåˆ™å¯ä»¥é¿å…é‡æ–°ä¸‹è½½ã€‚\n- **no-storeï¼š** ç›´æ¥ç¦æ­¢æ¸¸è§ˆå™¨ç¼“å­˜æ•°æ®ï¼Œæ¯æ¬¡ç”¨æˆ·è¯·æ±‚è¯¥èµ„æºï¼Œéƒ½ä¼šå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œæ¯æ¬¡éƒ½ä¼šä¸‹è½½å®Œæ•´çš„èµ„æºã€‚\n- **publicï¼š** å¯ä»¥è¢«æ‰€æœ‰çš„ç”¨æˆ·ç¼“å­˜ï¼ŒåŒ…æ‹¬ç»ˆç«¯ç”¨æˆ·å’Œ `CDN` ç­‰ä¸­é—´ä»£ç†æœåŠ¡å™¨ã€‚\n- **privateï¼š** åªèƒ½è¢«ç»ˆç«¯ç”¨æˆ·çš„æµè§ˆå™¨ç¼“å­˜ï¼Œä¸å…è®¸ `CDN` ç­‰ä¸­ç»§ç¼“å­˜æœåŠ¡å™¨å¯¹å…¶ç¼“å­˜ã€‚\n\n{% note warning %}\n*Tipsï¼šå¦‚æœ cache-control ä¸ expires åŒæ—¶å­˜åœ¨çš„è¯ï¼Œcache-control çš„ä¼˜å…ˆçº§é«˜äº expires*\n{% endnote %} \n\n### \båå•†ç¼“å­˜\n\nåå•†ç¼“å­˜éƒ½æ˜¯ç”±æµè§ˆå™¨å’ŒæœåŠ¡å™¨åå•†ï¼Œæ¥ç¡®å®šæ˜¯å¦ç¼“å­˜ï¼Œåå•†ä¸»è¦é€šè¿‡ä¸‹é¢ä¸¤ç»„ `header` å­—æ®µï¼Œè¿™ä¸¤ç»„å­—æ®µéƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œå³ç¬¬ä¸€æ¬¡è¯·æ±‚çš„å“åº”å¤´å¸¦ä¸ŠæŸä¸ªå­—æ®µ _ï¼ˆ **Last-Modified** æˆ–è€… **Etag** ï¼‰_ ï¼Œåˆ™åç»­è¯·æ±‚ä¼šå¸¦ä¸Šå¯¹åº”çš„è¯·æ±‚å­—æ®µ _ï¼ˆ**If-Modified-Since** æˆ–è€… **If-None-Match** ï¼‰_ ï¼Œè‹¥å“åº”å¤´æ²¡æœ‰ **Last-Modified** æˆ–è€… **Etag** å­—æ®µï¼Œåˆ™è¯·æ±‚å¤´ä¹Ÿä¸ä¼šæœ‰å¯¹åº”çš„å­—æ®µã€‚\n\n#### Last-Modified/If-Modified-Since\n\näºŒè€…çš„å€¼éƒ½æ˜¯ `GMT` æ ¼å¼çš„æ—¶é—´å­—ç¬¦ä¸²ï¼Œå…·ä½“è¿‡ç¨‹ï¼š\n\n- æµè§ˆå™¨ç¬¬ä¸€æ¬¡è·ŸæœåŠ¡å™¨è¯·æ±‚ä¸€ä¸ªèµ„æºï¼ŒæœåŠ¡å™¨åœ¨è¿”å›è¿™ä¸ªèµ„æºçš„åŒæ—¶ï¼Œåœ¨ `respone` çš„ `header` åŠ ä¸Š **Last-Modified** å­—æ®µï¼Œè¿™ä¸ª `header` å­—æ®µè¡¨ç¤ºè¿™ä¸ªèµ„æºåœ¨æœåŠ¡å™¨ä¸Šçš„æœ€åä¿®æ”¹æ—¶é—´\n\n- æµè§ˆå™¨å†æ¬¡è·ŸæœåŠ¡å™¨è¯·æ±‚è¿™ä¸ªèµ„æºæ—¶ï¼Œåœ¨ `request` çš„ `header` ä¸ŠåŠ ä¸Š **If-Modified-Since** å­—æ®µï¼Œè¿™ä¸ª `header` å­—æ®µçš„å€¼å°±æ˜¯ä¸Šä¸€æ¬¡è¯·æ±‚æ—¶è¿”å›çš„ **Last-Modified** çš„å€¼\n\n- æœåŠ¡å™¨å†æ¬¡æ”¶åˆ°èµ„æºè¯·æ±‚æ—¶ï¼Œæ ¹æ®æµè§ˆå™¨ä¼ è¿‡æ¥ **If-Modified-Since** å’Œèµ„æºåœ¨æœåŠ¡å™¨ä¸Šçš„æœ€åä¿®æ”¹æ—¶é—´åˆ¤æ–­èµ„æºæ˜¯å¦æœ‰å˜åŒ–ï¼Œå¦‚æœæ²¡æœ‰å˜åŒ–åˆ™è¿”å› `304 Not Modified` ï¼Œä½†æ˜¯ä¸ä¼šè¿”å›èµ„æºå†…å®¹ï¼›å¦‚æœæœ‰å˜åŒ–ï¼Œå°±æ­£å¸¸è¿”å›èµ„æºå†…å®¹ã€‚å½“æœåŠ¡å™¨è¿”å› `304 Not Modified` çš„å“åº”æ—¶ï¼Œ`response header` ä¸­ä¸ä¼šå†æ·»åŠ  **Last-Modifiedçš„header** ï¼Œå› ä¸ºæ—¢ç„¶èµ„æºæ²¡æœ‰å˜åŒ–ï¼Œé‚£ä¹ˆ **Last-Modified** ä¹Ÿå°±ä¸ä¼šæ”¹å˜ï¼Œè¿™æ˜¯æœåŠ¡å™¨è¿”å› `304` æ—¶çš„ `response header`\n\n- æµè§ˆå™¨æ”¶åˆ° `304` çš„å“åº”åï¼Œå°±ä¼šä»ç¼“å­˜ä¸­åŠ è½½èµ„æº\n\n- å¦‚æœåå•†ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œæµè§ˆå™¨ç›´æ¥ä»æœåŠ¡å™¨åŠ è½½èµ„æºæ—¶ï¼Œ**Last-Modified** çš„ `Header` åœ¨é‡æ–°åŠ è½½çš„æ—¶å€™ä¼šè¢«æ›´æ–°ï¼Œä¸‹æ¬¡è¯·æ±‚æ—¶ï¼Œ**If-Modified-Since** ä¼šå¯ç”¨ä¸Šæ¬¡è¿”å›çš„**Last-Modified** å€¼\n\n#### Etag/If-None-Match\n\nè¿™ä¸¤ä¸ªå€¼æ˜¯ç”±æœåŠ¡å™¨ç”Ÿæˆçš„æ¯ä¸ªèµ„æºçš„å”¯ä¸€æ ‡è¯†å­—ç¬¦ä¸²ï¼Œåªè¦èµ„æºæœ‰å˜åŒ–å°±è¿™ä¸ªå€¼å°±ä¼šæ”¹å˜ï¼›å…¶åˆ¤æ–­è¿‡ç¨‹ä¸ **Last-Modifiedã€If-Modified-Since** ç±»ä¼¼ï¼Œä¸ **Last-Modified** ä¸ä¸€æ ·çš„æ˜¯ï¼Œå½“æœåŠ¡å™¨è¿”å› `304 Not Modified` çš„å“åº”æ—¶ï¼Œç”±äº **ETag** é‡æ–°ç”Ÿæˆè¿‡ï¼Œ`response header` ä¸­è¿˜ä¼šæŠŠè¿™ä¸ª **ETag** è¿”å›ï¼Œå³ä½¿è¿™ä¸ª **ETag** è·Ÿä¹‹å‰çš„æ²¡æœ‰å˜åŒ–ã€‚\n\n\n{% note warning %}\n*Tipsï¼šLast-Modifiedä¸ETagæ˜¯å¯ä»¥ä¸€èµ·ä½¿ç”¨çš„ï¼ŒæœåŠ¡å™¨ä¼šä¼˜å…ˆéªŒè¯ETagï¼Œä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šç»§ç»­æ¯”å¯¹Last-Modifiedï¼Œæœ€åæ‰å†³å®šæ˜¯å¦è¿”å›304ã€‚*\n{% endnote %} \n\n### Service Worker\n\n#### ä»€ä¹ˆæ˜¯ Service Worker\n    \n{% blockquote Service Worker API http://sethgodin.typepad.com/seths_blog/2009/07/welcome-to-island-marketing.html developer.mozilla.org %} \n**Service Worker** æœ¬è´¨ä¸Šå……å½“Webåº”ç”¨ç¨‹åºä¸æµè§ˆå™¨ä¹‹é—´çš„ä»£ç†æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥åœ¨ç½‘ç»œå¯ç”¨æ—¶ä½œä¸ºæµè§ˆå™¨å’Œç½‘ç»œé—´çš„ä»£ç†ã€‚å®ƒä»¬æ—¨åœ¨ï¼ˆé™¤å…¶ä»–ä¹‹å¤–ï¼‰ä½¿å¾—èƒ½å¤Ÿåˆ›å»ºæœ‰æ•ˆçš„ç¦»çº¿ä½“éªŒï¼Œæ‹¦æˆªç½‘ç»œè¯·æ±‚å¹¶åŸºäºç½‘ç»œæ˜¯å¦å¯ç”¨ä»¥åŠæ›´æ–°çš„èµ„æºæ˜¯å¦é©»ç•™åœ¨æœåŠ¡å™¨ä¸Šæ¥é‡‡å–é€‚å½“çš„åŠ¨ä½œã€‚ä»–ä»¬è¿˜å…è®¸è®¿é—®æ¨é€é€šçŸ¥å’Œåå°åŒæ­¥APIã€‚\n{% endblockquote %}\n</br>\n**Service worker** å¯ä»¥è§£å†³ç›®å‰ç¦»çº¿åº”ç”¨çš„é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥åšæ›´å¤šçš„äº‹ã€‚ **Service Worker** å¯ä»¥ä½¿ä½ çš„åº”ç”¨å…ˆè®¿é—®æœ¬åœ°ç¼“å­˜èµ„æºï¼Œæ‰€ä»¥åœ¨ç¦»çº¿çŠ¶æ€æ—¶ï¼Œåœ¨æ²¡æœ‰é€šè¿‡ç½‘ç»œæ¥æ”¶åˆ°æ›´å¤šçš„æ•°æ®å‰ï¼Œä»å¯ä»¥æä¾›åŸºæœ¬çš„åŠŸèƒ½ï¼ˆä¸€èˆ¬ç§°ä¹‹ä¸º Offline Firstï¼‰ã€‚è¿™æ˜¯åŸç”ŸAPP æœ¬æ¥å°±æ”¯æŒçš„åŠŸèƒ½ï¼Œè¿™ä¹Ÿæ˜¯ç›¸æ¯”äº `web app` ï¼ŒåŸç”Ÿ `app` æ›´å—é’ççš„ä¸»è¦åŸå› \n\nå†æ¥çœ‹çœ‹ ğŸ‘€ **service worker** èƒ½åšäº›ä»€ä¹ˆ\n\n- åå°æ¶ˆæ¯ä¼ é€’\n- ç½‘ç»œä»£ç†ï¼Œè½¬å‘è¯·æ±‚ï¼Œä¼ªé€ å“åº”\n- ç¦»çº¿ç¼“å­˜\n- æ¶ˆæ¯æ¨é€\n- ...\n\n{% note success %} \n***æœ¬æ–‡ä¸»è¦ä»¥ï¼ˆ[lishaoy.net](https://lishaoy.net)ï¼‰èµ„æºç¼“å­˜ä¸ºä¾‹,é˜è¿°ä¸‹ service workerå¦‚ä½•å·¥ä½œ***\n{% endnote %}  \n\n#### ç”Ÿå‘½å‘¨æœŸ\n**service worker** åˆæ¬¡å®‰è£…çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¦‚å›¾ ğŸŒ \n\n![no-shadow](https://cdn.lishaoy.net/webOptimize/serviceWorker.png \"swç”Ÿå‘½å‘¨æœŸ\")\n\nä»ä¸Š ğŸ‘† å›¾å¯çŸ¥ï¼Œ**service worker** å·¥ä½œçš„æµç¨‹ï¼š\n1. **å®‰è£…ï¼š**  `service worker URL` é€šè¿‡ `serviceWorkerContainer.register()` æ¥è·å–å’Œæ³¨å†Œã€‚\n2. **æ¿€æ´»ï¼š** å½“ `service worker` å®‰è£…å®Œæˆåï¼Œä¼šæ¥æ”¶åˆ°ä¸€ä¸ªæ¿€æ´»äº‹ä»¶(activate event)ã€‚ `onactivate` ä¸»è¦ç”¨é€”æ˜¯æ¸…ç†å…ˆå‰ç‰ˆæœ¬çš„ `service worker` è„šæœ¬ä¸­ä½¿ç”¨çš„èµ„æºã€‚\n3. **ç›‘å¬ï¼š** ä¸¤ç§çŠ¶æ€\n    - ç»ˆæ­¢ä»¥èŠ‚çœå†…å­˜ï¼›\n    - ç›‘å¬è·å– `fetch` å’Œæ¶ˆæ¯ `message` äº‹ä»¶ã€‚\n4. **é”€æ¯ï¼š** æ˜¯å¦é”€æ¯ç”±æµè§ˆå™¨å†³å®šï¼Œå¦‚æœä¸€ä¸ª `service worker` é•¿æœŸä¸ä½¿ç”¨æˆ–è€…æœºå™¨å†…å­˜æœ‰é™ï¼Œåˆ™å¯èƒ½ä¼šé”€æ¯è¿™ä¸ª `worker` ã€‚\n\n{% note warning %}\n*Tipsï¼šæ¿€æ´»æˆåŠŸä¹‹åï¼Œåœ¨ Chrome æµè§ˆå™¨é‡Œï¼Œå¯ä»¥è®¿é—® chrome://inspect/#service-workerså’Œ chrome://serviceworker-internals/ å¯ä»¥æŸ¥çœ‹åˆ°å½“å‰è¿è¡Œçš„service worker ï¼Œå¦‚å›¾ ğŸ‘‡ã€‚*\n{% endnote %} \n<img src=\"https://cdn.lishaoy.net/webOptimize/serviceWorker1.png\" alt=\"service worker\" width=\"100%\" title=\"service worker\" align=\"center\" />\n\n**ç°åœ¨ï¼Œæˆ‘ä»¬æ¥å†™ä¸ªç®€å•çš„ä¾‹å­ ğŸŒ° **\n\n#### æ³¨å†Œ service worker\n\nè¦å®‰è£… `service worker` ï¼Œä½ éœ€è¦åœ¨ä½ çš„é¡µé¢ä¸Šæ³¨å†Œå®ƒã€‚è¿™ä¸ªæ­¥éª¤å‘Šè¯‰æµè§ˆå™¨ä½ çš„ `service worker` è„šæœ¬åœ¨å“ªé‡Œã€‚\n\n```javascript javascript https://lishaoy.net/webOptimize.html#æ³¨å†Œ-service-worker app.js\nif ('serviceWorker' in navigator) {\n  navigator.serviceWorker.register('/sw.js').then(function(registration) {\n    // Registration was successful\n    console.log('ServiceWorker registration successful with scope: ',    registration.scope);\n  }).catch(function(err) {\n    // registration failed :(\n    console.log('ServiceWorker registration failed: ', err);\n  });\n}\n```\n\nä¸Šé¢çš„ä»£ç æ£€æŸ¥ `service worker API` æ˜¯å¦å¯ç”¨ï¼Œå¦‚æœå¯ç”¨ï¼Œ`service worker /sw.js` è¢«æ³¨å†Œã€‚å¦‚æœè¿™ä¸ª `service worker` å·²ç»è¢«æ³¨å†Œè¿‡ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å¿½ç•¥ä¸Šé¢çš„ä»£ç ã€‚\n\n#### æ¿€æ´» service worker\n\nåœ¨ä½ çš„ `service worker` æ³¨å†Œä¹‹åï¼Œæµè§ˆå™¨ä¼šå°è¯•ä¸ºä½ çš„é¡µé¢æˆ–ç«™ç‚¹å®‰è£…å¹¶æ¿€æ´»å®ƒã€‚ \n`install` äº‹ä»¶ä¼šåœ¨å®‰è£…å®Œæˆä¹‹åè§¦å‘ã€‚`install` äº‹ä»¶ä¸€èˆ¬æ˜¯è¢«ç”¨æ¥å¡«å……ä½ çš„æµè§ˆå™¨çš„ç¦»çº¿ç¼“å­˜èƒ½åŠ›ã€‚ä½ éœ€è¦ä¸º `install` äº‹ä»¶å®šä¹‰ä¸€ä¸ª `callback` ï¼Œå¹¶å†³å®šå“ªäº›æ–‡ä»¶ä½ æƒ³è¦ç¼“å­˜.\n\n```javascript javascript https://lishaoy.net/webOptimize.html#æ¿€æ´»-service-worker sw.js\n// The files we want to cache\nvar CACHE_NAME = 'my-site-cache-v1';\nvar urlsToCache = [\n  '/',\n  '/css/main.css',\n  '/js/main.js'\n];\n\nself.addEventListener('install', function(event) {\n  // Perform install steps\n  event.waitUntil(\n    caches.open(CACHE_NAME)\n      .then(function(cache) {\n        console.log('Opened cache');\n        return cache.addAll(urlsToCache);\n      })\n  );\n});\n```\n\nåœ¨æˆ‘ä»¬çš„ `install callback` ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š\n- å¼€å¯ä¸€ä¸ªç¼“å­˜\n- ç¼“å­˜æˆ‘ä»¬çš„æ–‡ä»¶\n- å†³å®šæ˜¯å¦æ‰€æœ‰çš„èµ„æºæ˜¯å¦è¦è¢«ç¼“å­˜\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ `caches.open` æ‰“å¼€æˆ‘ä»¬æŒ‡å®šçš„ `cache` æ–‡ä»¶åï¼Œç„¶åæˆ‘ä»¬è°ƒç”¨ `cache.addAll` å¹¶ä¼ å…¥æˆ‘ä»¬çš„æ–‡ä»¶æ•°ç»„ã€‚è¿™æ˜¯é€šè¿‡ä¸€è¿ä¸² `promise` _ï¼ˆcaches.open å’Œ cache.addAllï¼‰_ å®Œæˆçš„ã€‚`event.waitUntil` æ‹¿åˆ°ä¸€ä¸ª `promise` å¹¶ä½¿ç”¨å®ƒæ¥è·å¾—å®‰è£…è€—è´¹çš„æ—¶é—´ä»¥åŠæ˜¯å¦å®‰è£…æˆåŠŸã€‚\n\n#### ç›‘å¬ service worker\n\nç°åœ¨æˆ‘ä»¬å·²ç»å°†ä½ çš„ç«™ç‚¹èµ„æºç¼“å­˜äº†ï¼Œä½ éœ€è¦å‘Šè¯‰ `service worker` è®©å®ƒç”¨è¿™äº›ç¼“å­˜å†…å®¹æ¥åšç‚¹ä»€ä¹ˆã€‚æœ‰äº† `fetch` äº‹ä»¶ï¼Œè¿™æ˜¯å¾ˆå®¹æ˜“åšåˆ°çš„ã€‚\n\næ¯æ¬¡ä»»ä½•è¢« `service worker` æ§åˆ¶çš„èµ„æºè¢«è¯·æ±‚åˆ°æ—¶ï¼Œéƒ½ä¼šè§¦å‘ `fetch` äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ `service worker` æ·»åŠ ä¸€ä¸ª `fetch` çš„äº‹ä»¶ç›‘å¬å™¨ï¼Œæ¥ç€è°ƒç”¨ `event` ä¸Šçš„ `respondWith()` æ–¹æ³•æ¥åŠ«æŒæˆ‘ä»¬çš„ **HTTP** å“åº”ï¼Œç„¶åä½ ç”¨å¯ä»¥ç”¨è‡ªå·±çš„æ–¹æ³•æ¥æ›´æ–°ä»–ä»¬ã€‚\n\n```javascript javascript https://lishaoy.net/webOptimize.html#ç›‘å¬-service-worker sw.js\nself.addEventListener('fetch', function(event) {\n  event.respondWith(\n    caches.match(event.request);\n  );\n});\n```\n\n`caches.match(event.request)` å…è®¸æˆ‘ä»¬å¯¹ç½‘ç»œè¯·æ±‚çš„èµ„æºå’Œ `cache` é‡Œå¯è·å–çš„èµ„æºè¿›è¡ŒåŒ¹é…ï¼ŒæŸ¥çœ‹æ˜¯å¦ç¼“å­˜ä¸­æœ‰ç›¸åº”çš„èµ„æºã€‚è¿™ä¸ªåŒ¹é…é€šè¿‡ `url` å’Œ `vary header` è¿›è¡Œï¼Œå°±åƒæ­£å¸¸çš„ **HTTP** è¯·æ±‚ä¸€æ ·ã€‚\n\né‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•è¿”å› `request` å‘¢ï¼Œä¸‹é¢ ğŸ‘‡ å°±æ˜¯ä¸€ä¸ªä¾‹å­ ğŸŒ°\n\n```javascript javascript https://lishaoy.net/webOptimize.html#ç›‘å¬-service-worker sw.js\nself.addEventListener('fetch', function(event) {\n  event.respondWith(\n    caches.match(event.request)\n      .then(function(response) {\n        // Cache hit - return response\n        if (response) {\n          return response;\n        }\n\n        return fetch(event.request);\n      }\n    )\n  );\n});\n```\nä¸Šé¢çš„ä»£ç é‡Œæˆ‘ä»¬å®šä¹‰äº† `fetch` äº‹ä»¶ï¼Œåœ¨ `event.respondWith` é‡Œï¼Œæˆ‘ä»¬ä¼ å…¥äº†ä¸€ä¸ªç”± `caches.match` äº§ç”Ÿçš„ `promise.caches.match` æŸ¥æ‰¾ `request` ä¸­è¢« `service worker` ç¼“å­˜å‘½ä¸­çš„ `response` ã€‚\nå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå‘½ä¸­çš„ `response` ï¼Œæˆ‘ä»¬è¿”å›è¢«ç¼“å­˜çš„å€¼ï¼Œå¦åˆ™æˆ‘ä»¬è¿”å›ä¸€ä¸ªå®æ—¶ä»ç½‘ç»œè¯·æ±‚ `fetch` çš„ç»“æœã€‚\n\n#### sw-toolbox\n\n{% note success %}\n*å½“ç„¶ï¼Œæˆ‘ä¹Ÿå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œä¾‹å¦‚ï¼š[lishaoy.net](https://lishaoy.net) ä½¿ç”¨äº† **sw-toolbox**ã€‚*\n{% endnote  %}\n\n**sw-toolbox** ä½¿ç”¨éå¸¸ç®€å•ï¼Œä¸‹é¢ ğŸ‘‡ å°±æ˜¯ [lishaoy.net](https://lishaoy.net) çš„ä¸€ä¸ªä¾‹å­ ğŸŒ°\n\n```javascript javascript https://lishaoy.net/webOptimize.html#sw-toolbox persilee.js\n  \"serviceWorker\" in navigator ? navigator.serviceWorker.register('/sw.js').then(function () {\n    navigator.serviceWorker.controller ? console.log(\"Assets cached by the controlling service worker.\") : console.log(\"Please reload this page to allow the service worker to handle network operations.\")\n  }).catch(function (e) {\n    console.log(\"ERROR: \" + e)\n  }) : console.log(\"Service workers are not supported in the current browser.\")\n```\n\nä»¥ä¸Šæ˜¯ **æ³¨å†Œ** ä¸€ä¸ª `service woker`\n\n```javascript javascript https://lishaoy.net/webOptimize.html#sw-toolbox sw.js\n\"use strict\";\n(function () {\n    var cacheVersion = \"20180527\";\n    var staticImageCacheName = \"image\" + cacheVersion;\n    var staticAssetsCacheName = \"assets\" + cacheVersion;\n    var contentCacheName = \"content\" + cacheVersion;\n    var vendorCacheName = \"vendor\" + cacheVersion;\n    var maxEntries = 100;\n    self.importScripts(\"/lib/sw-toolbox/sw-toolbox.js\");\n    self.toolbox.options.debug = false;\n    self.toolbox.options.networkTimeoutSeconds = 3;\n\n    self.toolbox.router.get(\"/images/(.*)\", self.toolbox.cacheFirst, {\n        cache: {\n            name: staticImageCacheName,\n            maxEntries: maxEntries\n        }\n    });\n\n    self.toolbox.router.get('/js/(.*)', self.toolbox.cacheFirst, {\n        cache: {\n            name: staticAssetsCacheName,\n            maxEntries: maxEntries\n        }\n    });\n    self.toolbox.router.get('/css/(.*)', self.toolbox.cacheFirst, {\n        cache: {\n            name: staticAssetsCacheName,\n            maxEntries: maxEntries\n        }\n    \n    ......\n\n    self.addEventListener(\"install\", function (event) {\n        return event.waitUntil(self.skipWaiting())\n    });\n    self.addEventListener(\"activate\", function (event) {\n        return event.waitUntil(self.clients.claim())\n    })\n})();\n```\nå°±è¿™æ ·æå®šäº† ğŸ‰ _(å…·ä½“çš„ç”¨æ³•å¯ä»¥å» [sw-toolbox](https://googlechromelabs.github.io/sw-toolbox/api.html#main) æŸ¥çœ‹)_\n\næœ‰çš„åŒå­¦å°±é—®ï¼Œ`service worker` è¿™ä¹ˆå¥½ç”¨ï¼Œè¿™ä¸ªç¼“å­˜ç©ºé—´åˆ°åº•æ˜¯å¤šå¤§ï¼Ÿå…¶å®ï¼Œåœ¨  **Chrome** å¯ä»¥çœ‹åˆ°ï¼Œå¦‚å›¾\n\n<img src=\"https://cdn.lishaoy.net/webOptimize/storageQuota.png\" alt=\"fstorage quota\" width=\"100%\" title=\"storage quota\" align=\"center\" />\n\nå¯ä»¥çœ‹åˆ°ï¼Œå¤§æ¦‚æœ‰ **30G** ï¼Œæˆ‘çš„ç«™ç‚¹åªç”¨äº† **183MB** ï¼Œå®Œå…¨å¤Ÿç”¨äº† ğŸ“\n\næœ€åï¼Œæ¥ä¸¤å¼ å›¾ \n\n<img src=\"https://cdn.lishaoy.net/webOptimize/serviceWorker2.png\" alt=\"from ServiceWorker\" width=\"100%\" title=\"from ServiceWorker\" align=\"center\" />\n\n<img src=\"https://cdn.lishaoy.net/webOptimize/serviceWorker3.png\" alt=\"Cache Storage\" width=\"100%\" title=\"Cache Storage\" align=\"center\" />\n\n<img class=\"hidden\" src=\"https://cdn.lishaoy.net/webOptimize/Optimize.png\" alt=\"web optimize\" width=\"100%\" title=\"web optimize\" align=\"center\">\n\n## æœªå®Œï¼Œå¾…ç»­ã€‚ã€‚ã€‚ ğŸ˜œ\n\n","tags":["web"],"categories":["æ€§èƒ½"]},{"title":"Promiseè¯ç”Ÿè®°","url":"%2FcreatePromise.html","content":"\n{% fi https://cdn.lishaoy.net/createPromise/promise.png, Promise, Promise %}\n\nå‰ç«¯è¿‘å¹´çš„å…´èµ·ï¼Œæœ‰å¤§éƒ¨åˆ†æ˜¯å› ä¸º `NodeJS` çš„è¯ç”Ÿï¼Œè€Œ `NodeJS` æ˜¯ä¸ªé€‚ç”¨äº **å¼‚æ­¥IO** å¯†é›†å‹çš„è¯­è¨€ï¼Œä¸€äº›åŸºäº `NodeJS` çš„æ¡†æ¶ï¼Œæ¯”å–» *KOA2ã€Adonis* å°±æœ‰å¤§é‡çš„ `async` å’Œ `await` è¯­æ³•ï¼Œ`async`çš„å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯ `Promise` å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ `async` å’Œ `await` è¯­æ³•ï¼Œå†™å‡ºä¼˜é›…çš„å¼‚æ­¥ä»£ç ï¼Œæ¥æ›¿æ¢éš¾çœ‹ä¸”éš¾ç»´æŠ¤çš„å›è°ƒå‡½æ•°ã€‚\n\nè¿™é‡Œæˆ‘ä»¬ä¼šæ¸è¿›å¼çš„æ¥åˆ›å»ºä¸€ä¸ª `Promise` çš„å®ç°ï¼Œå¦‚æœï¼Œä½ è¿˜ä¸äº†è§£ `Promise` ï¼Œèµ¶å¿«ç§»æ­¥ [Promise](http://es6.ruanyifeng.com/#docs/promise) äº†è§£å­¦ä¹ ï¼Œå½“ç„¶è¿™ä¸ªå®ç°ä¼šç¬¦åˆ [Promise/A+](https://promisesaplus.com) è§„èŒƒï¼Œ`JavaScript` ä¸­æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹çš„ `Promise` åº“ï¼Œ[bluebird](http://bluebirdjs.com/docs/getting-started.html) å°±æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ `Promise` ç±»åº“ï¼Œç›¸æ¯”å…¶å®ƒç¬¬ä¸‰æ–¹ç±»åº“æˆ–æ ‡å‡†å¯¹è±¡æ¥è¯´ï¼Œå…¶æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼šåŠŸèƒ½æ›´é½å…¨è€Œä¸è‡ƒè‚¿ã€æµè§ˆå™¨å…¼å®¹æ€§æ›´å¥½,å¤§å®¶å¯ä»¥äº†è§£ä¸‹ã€‚\n\n---\n\n<!-- more -->\n\nåºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥å¼€å¹²ã€‚ã€‚ã€‚ ğŸ˜ \n\n## å®šä¹‰ Promise ç±»å‹\n\nä¸€ä¸ªç®€å• `Promise` è¯­æ³•ï¼Œå¦‚ä¸‹\n\n```javascript\nconst promise = new Promise(function(resolve, reject) {\n  // ... doSomething\n\n  if (/* å¼‚æ­¥æ“ä½œæˆåŠŸ */){\n    resolve(value);\n  } else {\n    reject(error);\n  }\n});\n\npromise.then(function(value) {\n  // success\n}, function(error) {\n  // failure\n});\n```\n\n### å®ç° resolve å’Œ then\n\né¦–å…ˆæˆ‘ä»¬ä»¥ä¸Š ğŸ‘† çš„è¯­æ³•ï¼Œè‡ªå·±å®šä¹‰ä¸€ä¸ª `Promise` å®ä¾‹\n\n```javascript\nfunction Promise(fn) {\n  var callback = null;\n  //å®ç° then æ–¹æ³• , å…ˆä¸€æ­¥ä¸€æ­¥æ¥ï¼Œå®ç°ä¼ ä¸€ä¸ªå‚æ•° -- resolve\n  this.then = function(cb) {\n    callback = cb;\n  };\n\n  //å®ç° resolve , value:å¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå€¼\n  function resolve(value) {\n    callback(value);\n  }\n  //æ‰§è¡Œ function å‚æ•°\n  fn(resolve);\n}\n```\n\nä¸€ä¸ªç®€å•çš„å®ä¾‹å†™å¥½äº†ï¼Œç„¶åï¼Œæ¥ç”¨ä¸€ä¸‹,çœ‹çœ‹ ğŸ‘€ ç»“æœå¦‚ä½•\n\n```javascript\nconst p = new Promise(function(resolve){\n  resolve(66);\n});\n\np.then(function(value){\n  console.log(value);\n});\n```\n\n\n{% note info %}\n\næ‰§è¡Œç»“æœæ˜¯ï¼š`callback is not a function`\n\n{% endnote %}\n\n### ä¿®æ”¹ callback ä¸ºå¼‚æ­¥\n\n**è¿™é‡Œå°±é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š **  \n\n** å‘ç° `resolve()` åœ¨ `then()` ä¹‹å‰è°ƒç”¨ï¼Œåœ¨ `resolve()` è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œ `callback` è¿˜æ˜¯ `null` ï¼Œæˆ‘ä»¬çš„ä»£ç æ˜¯åŒæ­¥çš„ï¼Œè€Œä¸æ˜¯å¼‚æ­¥çš„ã€‚</br> å¦‚æ˜¯ï¼Œæƒ³åŠæ³•è§£å†³æ‰è¿™ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åˆ©ç”¨ `setTimeout` , æŠŠ `callback` åŠ å…¥å¼‚æ­¥é˜Ÿåˆ—** \n\nä»£ç å¦‚ä¸‹ ğŸ‘‡\n\n```javascript\nfunction Promise(fn) {\n  var callback = null;\n  //å®ç° then æ–¹æ³• , å…ˆä¸€æ­¥ä¸€æ­¥æ¥ï¼Œå®ç°ä¼ ä¸€ä¸ªå‚æ•° -- resolve\n  this.then = function(cb) {\n    callback = cb;\n  };\n\n  //å®ç° resolve , value:å¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå€¼\n  function resolve(value) {\n    // ç”¨ setTimeout æŠŠ callback åŠ å…¥åˆ°å¼‚æ­¥é˜Ÿåˆ—ï¼Œè¿™æ ·å°±ä¼šï¼Œå…ˆæ‰§è¡Œ then() æ–¹æ³•\n    setTimeout(function(){\n      callback(value);\n    },1)\n  }\n  //æ‰§è¡Œ function å‚æ•°\n  fn(resolve);\n}\n```\n\nç„¶åï¼Œå†æ¥ç”¨ä¸€ä¸‹,çœ‹çœ‹ ğŸ‘€ ç»“æœå¦‚ä½•\n\n```javascript\nconst p = new Promise(function(resolve){\n  resolve(66);\n});\n\np.then(function(value){\n  console.log(value);\n});\n```\n\n{% note info %}\n\næ‰§è¡Œç»“æœæ˜¯ï¼š`66`\n\n{% endnote %}\n\n## æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚\n","tags":["Promise"],"categories":["JS"]},{"title":"CSSModules","url":"%2FCSSModules.html","content":"\n{% fi https://cdn.lishaoy.net/CSSModules/cssModules.png, CSS Modules, CSS Modules %}\n\nè¿™ç¯‡æ–‡ç« æ¥ä¸€èµ·äº†è§£ `css` æ¨¡å—åŒ–çš„ç”¨æ³•å’ŒåŸç† ï¼Œ**dome** åœ°å€ï¼š[css modules](https://github.com/persilee/webpack_test) ğŸ˜®\n\n---\n\n<!-- more -->\n\n#### å±€éƒ¨ä½œç”¨åŸŸ\n\nä¸€èˆ¬æˆ‘ä»¬å¼•å…¥é¡µé¢çš„ `CSS` çš„ä½œç”¨åŸŸéƒ½æ˜¯å…¨å±€çš„ï¼Œéƒ½æ˜¯å¯¹è¿™ä¸ªé¡µé¢èµ·ä½œç”¨ï¼Œäº§ç”Ÿå±€éƒ¨çš„ä½œç”¨åŸŸï¼Œå°±æ˜¯ä½¿ç”¨ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ `class` çš„åç§°ï¼Œä¸ä¼šå’Œå…¶å®ƒé€‰æ‹©å™¨é‡åçš„ï¼Œ **`CSS Modules`** å°±æ˜¯è¿™ä¸ªåŸç†ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€æ®µä»£ç \n\n```javascript\nimport $ from 'jquery';\nimport styles from './main.css';\nimport test from './test.html';\n\n$('body').append($('<div><h1>æˆ‘ä¼šå˜ç»¿</h1></div>'));\n$('div h1').addClass(styles.testGreen);\n$('body').append(test).find('h2').addClass(styles.testBlue);\n```\n\nä¸Šé¢çš„ä»£ç æˆ‘æŠŠ `main.css` è¾“å…¥åˆ° `style` å¯¹è±¡ï¼Œç„¶åä¸‹é¢ç”¨äº† `styles.testGreen` å¯¹è±¡çš„å±æ€§å½¢å¼è°ƒç”¨ï¼Œå°±ä¼šåº”ç”¨ `main.css` é‡Œçš„æ ·å¼\n\n```css\n.testGreen {\n  color: green;\n}\n```\n\næ„å»ºå·¥å…·ï¼ˆ `webpack` ï¼‰ç¼–è¯‘æˆä¸€ä¸ªå“ˆå¸Œå­—ç¬¦ä¸²\n\n```vbscript-html\n<div>\n    <h1 class=\"_305zeUSoiGREv3GqPa9H8F\">æˆ‘ä¼šå˜ç»¿</h1>\n</div>\n```\n\n`main.css` ä¹Ÿä¼šåŒæ—¶ç¼–è¯‘\n\n```css\n._305zeUSoiGREv3GqPa9H8F {\n  color: #aaf200;\n}\n```\n\nè¿™æ ·ä¸€æ¥ï¼Œè¿™ä¸ªç±»åå°±æ˜¯ç‹¬ä¸€æ— äºŒçš„äº†ï¼Œåªå¯¹åº”ç”¨çš„ç»„ä»¶æœ‰æ•ˆã€‚\n**`CSS Modules`** æ”¯æŒä¸åŒçš„æ„å»ºå·¥å…·ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ `webpack` ,ä¸‹æ–‡éƒ½æ˜¯ä»¥ `webpack` ä¸ºä¾‹ã€‚\n\nä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹ **`webpack.config.js`**\n\n```javascript\nmodule.exports = {\n  context: __dirname + '/src',\n  devtool: 'eval-source-map', //é…ç½®ç”ŸæˆSource Mapsï¼Œé€‰æ‹©åˆé€‚çš„é€‰é¡¹\n  entry: {\n    app: ['./app.js', './test.js'],\n  },\n  output: {\n    path: __dirname + '/dist',\n    filename: 'bundle.js',\n    publicPath: '/assets',\n  },\n  module: {\n    loaders: [\n      {test: /\\.json$/,loader: 'json-loader'},\n      {test: /\\.js$/,exclude: /node_modules/,loader: 'babel-loader'},\n      {test: /\\.css$/,loader: ExtractTextPlugin.extract({\n          fallbackLoader: \"style-loader\",\n          loader: {\n            loader: \"css-loader\",\n            query: {\n              modules: true\n            }\n          }\n        })\n      },\n      {test: /\\.html$/,loader: 'html-loader'},\n    ]\n  },\n  plugins: [\n    new ExtractTextPlugin('style.css')\n  ]\n};\n```\n\nä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œ`query:{modules:true}` ä»£è¡¨å¼€å¯ **`CSS Modules`** æ¨¡å—ï¼Œè¿™é‡Œè¿˜é…ç½®äº†æŠŠæ‰€ä»¥å¾— `css` åˆå¹¶ä¸€ä¸ªæ–‡ä»¶ï¼Œå…·ä½“çš„å¯ä»¥äº†è§£ `webpack` çš„ `extract-text-webpack-plugin`æ’ä»¶ã€‚\n\n#### å…¨å±€ä½œç”¨åŸŸ\n\n**`CSS Modules`** å…è®¸ç”¨ `:global(.className)` çš„è¯­æ³•å£°æ˜ä¸€ä¸ªå…¨å±€çš„ä½œç”¨åŸŸã€‚åŠ äº† `:global` çš„ä¸ä¼šè¢«ç¼–è¯‘æˆå“ˆå¸Œå€¼ã€‚\n\n```css\n:global(.title) {\n  color: black;\n}\n\n.title {\n  color: red;\n}\n```\n\n`test.js` ä½¿ç”¨æ™®é€šçš„å†™æ³•ï¼Œå°±ä¼šå¼•ç”¨å…¨å±€çš„ `.title` çš„æ ·å¼\n\n```javascript\nimport $ from 'jquery';\nimport styles from './main.css';\nimport test from './test.html';\n\n$('body').append($('<div><h1>æˆ‘æ˜¯title</h1></div>'));\n$('div h1').addClass('title');\n```\n\nç»“æœ `h1` çš„titleæ˜¾ç¤ºé»‘è‰²ã€‚\n\n#### Classçš„ç»„åˆ\n\nåœ¨ **`CSS Modules`** é‡Œï¼Œä¸€ä¸ªé€‰æ‹©å™¨å¯ä»¥ç»§æ‰¿å¦ä¸€ä¸ªé€‰æ‹©å™¨ã€‚\n\nåœ¨ `mian.css` é‡Œï¼Œæˆ‘è®© `.testBlue` ç»§æ‰¿ `.testBg` ç±»\n\n```css\n.testBg {\n  background-color: red;\n}\n\n.testBlue {\n  color: blue;\n  composes: testBg;\n}\n\n```\nä¸ç”¨ä¿®æ”¹ `test.js` ,åº”ç”¨äº† `.testBlue` å°±ä¼šæœ‰ä¸€ä¸ªçº¢è‰²çš„èƒŒæ™¯ã€‚\n\nç¼–è¯‘ç»“æœï¼š\n\n```css\n.eh33VC37uFHXkCZ8LfKYd {\n  background-color: #ff0000;\n}\n\n.xrmZso54fTBX29J9G65Ai {\n  color: #0c77f8;\n}\n```\n\nç›¸åº”çš„ `html` ä»£ç ï¼š\n\n```html\n<h3 class=\"xrmZso54fTBX29J9G65Ai eh33VC37uFHXkCZ8LfKYd _2gsuNWm9029FHPYJP62C-t\">\n    æˆ‘ä¼šå˜è“\n</h3>\n```\n\n#### è¾“å…¥å˜é‡\n\n**`CSS Modules`** æ”¯æŒä½¿ç”¨å˜é‡ï¼Œä¸è¿‡è¦å®‰è£… **PsotCSS** å’Œ **postcss-modules-values**ã€‚\n\n```vim\n$ npm install --save postcss-loader postcss-modules-values\n```\n\næŠŠ `postcss-loader` åŠ å…¥ `webpack.config.js` .\n\n```javascript\n{\n    test: /\\.css$/,\n    loader: 'style-loader!css-loader?modules!postcss-loader'\n},\n```\n\nç„¶åæˆ‘åœ¨ `colors.css` é‡Œå®šä¹‰äº†ä¸€äº›å˜é‡ã€‚\n\n```css\n@value blue: #0c77f8;\n@value red: #ff0000;\n@value green: #aaf200;\n```\n\nåœ¨ `main.css` é‡Œå¯ä»¥è¿™æ ·å¼•ç”¨å˜é‡\n\n```css\n@value colors: \"./color.css\";\n@value blue, red, green from colors;\n\n.title {\n  color: red;\n}\n\n.testBg {\n  background-color: red;\n}\n\n.testGreen {\n  color: green;\n}\n\n.testBlue {\n  color: blue;\n  composes: testBg;\n  composes: div;\n}\n```\n\nè¿™æ ·å°±å¯ä»¥æŠŠ `colors.css` çš„å˜é‡æ‹¿è¿‡æ¥ç”¨äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆç¥å¥‡ã€‚","tags":["modules"],"categories":["CSS"]},{"title":"å¦‚ä½•ä½¿ç”¨ markdown è¯­æ³•å†™åšå®¢","url":"%2FmarkdownGrammar.html","content":"\n{% fi https://cdn.lishaoy.net/markdownGrammar/markdown.png, markdown, markdown %}\n\nå¹³æ—¶æˆ‘å†™æ—¥è®°ã€æ–‡æ¡£å’Œåšå®¢éƒ½ä¼šç”¨åˆ° `markdown` è¯­æ³•ï¼Œæˆ‘ç”¨çš„æ˜¯ `é©¬å…‹é£è±¡` å…ˆåœ¨æœ¬åœ°å†™å¥½ï¼Œè€Œä¸”å¯ä»¥å’Œ `å°è±¡ç¬”è®°` åŒæ­¥ï¼Œå¦‚æœçŸ¥è¯†ç§¯ç´¯çš„å¤šäº†ï¼Œä¹Ÿä¼šæ€»ç»“ä¸‹ï¼Œåˆ†äº«åˆ°ç¤¾åŒºï¼Œç›´æ¥ <kbd>âŒ˜ -  C</kbd>  ç„¶å <kbd>âŒ˜ -  V</kbd>  å°±å¯ä»¥äº†ï¼Œç‰¹åˆ«æ–¹ä¾¿ã€‚ ğŸ™‚\n\n---\n\n<!-- more -->\n\n### ä»€ä¹ˆæ˜¯Markdownè¯­æ³•\n`Markdown` æ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œç›®æ ‡æ˜¯å®ç°ã€Œæ˜“è¯»æ˜“å†™ã€ã€‚\n\n> Markdown æ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œå®ƒå…è®¸äººä»¬ä½¿ç”¨æ˜“è¯»æ˜“å†™çš„çº¯æ–‡æœ¬æ ¼å¼ç¼–å†™æ–‡æ¡£ï¼Œç„¶åè½¬æ¢æˆæ ¼å¼ä¸°å¯Œçš„HTMLé¡µé¢ã€‚    â€”â€” [ç»´åŸºç™¾ç§‘](https://zh.wikipedia.org/wiki/Markdown)\n\n---\n\n### æ ‡é¢˜\n**åœ¨ `Markdown` ä¸­ï¼Œä½ åªéœ€è¦åœ¨æ–‡æœ¬å‰é¢åŠ ä¸Š `#` å³å¯ï¼ŒåŒç†ã€ä½ è¿˜å¯ä»¥å¢åŠ äºŒçº§æ ‡é¢˜ã€ä¸‰çº§æ ‡é¢˜ã€å››çº§æ ‡é¢˜ã€äº”çº§æ ‡é¢˜å’Œå…­çº§æ ‡é¢˜ï¼Œæ€»å…±å…­çº§ï¼Œåªéœ€è¦å¢åŠ  `#` å³å¯ï¼Œæ ‡é¢˜å­—å·ç›¸åº”é™ä½ã€‚ä¾‹å¦‚ï¼š**\n\n```\n# ä¸€çº§æ ‡é¢˜\n## äºŒçº§æ ‡é¢˜\n### ä¸‰çº§æ ‡é¢˜\n#### å››çº§æ ‡é¢˜\n##### äº”çº§æ ‡é¢˜\n###### å…­çº§æ ‡é¢˜\n```\n\næ•ˆæœå¦‚ä¸‹ ï¼š\n\n# ä¸€çº§æ ‡é¢˜\n## äºŒçº§æ ‡é¢˜\n### ä¸‰çº§æ ‡é¢˜\n#### å››çº§æ ‡é¢˜\n##### äº”çº§æ ‡é¢˜\n###### å…­çº§æ ‡é¢˜\n\n---\n### å¼•ç”¨\n**`Markdown` æ ‡è®°åŒºå—å¼•ç”¨æ˜¯ä½¿ç”¨ç±»ä¼¼ email ä¸­ç”¨çš„å¼•ç”¨æ–¹å¼ï¼Œåªéœ€è¦åœ¨æ•´ä¸ªæ®µè½çš„ç¬¬ä¸€è¡Œæœ€å‰é¢åŠ ä¸Š > ã€‚**\nä¾‹å¦‚ï¼š\n```\n>è¿™æ˜¯ä¸€ä¸ªå¼•ç”¨ç¤ºä¾‹\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n\n>è¿™æ˜¯ä¸€ä¸ªå¼•ç”¨ç¤ºä¾‹\n\n**åŒºå—å¼•ç”¨å¯ä»¥åµŒå¥—ï¼Œåªè¦æ ¹æ®å±‚æ¬¡åŠ ä¸Šä¸åŒæ•°é‡çš„ > ï¼š**\n\n```vim\n> è¿™æ˜¯ç¬¬ä¸€çº§å¼•ç”¨ã€‚\n>\n> > è¿™æ˜¯ç¬¬äºŒçº§å¼•ç”¨ã€‚\n>\n> ç°åœ¨å›åˆ°ç¬¬ä¸€çº§å¼•ç”¨ã€‚\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n> è¿™æ˜¯ç¬¬ä¸€çº§å¼•ç”¨ã€‚\n>\n> > è¿™æ˜¯ç¬¬äºŒçº§å¼•ç”¨ã€‚\n>\n> ç°åœ¨å›åˆ°ç¬¬ä¸€çº§å¼•ç”¨ã€‚\n\n---\n### åˆ—è¡¨\n**Markdown æ”¯æŒæœ‰åºåˆ—è¡¨å’Œæ— åºåˆ—è¡¨ã€‚**\n\n1. æ— åºåˆ—è¡¨ä½¿ç”¨æ˜Ÿå·ã€åŠ å·æˆ–æ˜¯å‡å·ä½œä¸ºåˆ—è¡¨æ ‡è®°ï¼š\n\n```vim\n*   Red\n*   Green\n*   Blue\n```\nç­‰åŒäº\n```vim\n+   Red\n+   Green\n+   Blue\n```\nä¹Ÿç­‰åŒäº\n```vim\n-   Red\n-   Green\n-   Blue\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n-   Red\n-   Green\n-   Blue\n\n----\n\n2. æœ‰åºåˆ—è¡¨åˆ™ä½¿ç”¨æ•°å­—æ¥ç€ä¸€ä¸ªè‹±æ–‡å¥ç‚¹ï¼š\n\n```vim\n1.  Bird\n2.  McHale\n3.  Parish\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n1.  Bird\n2.  McHale\n3.  Parish\n\nå¦‚æœä½ çš„åˆ—è¡¨æ ‡è®°å†™æˆï¼š\n```vim\n1.  Bird\n1.  McHale\n1.  Parish\n```\næ•ˆæœæ˜¯ï¼š\n1.  Bird\n1.  McHale\n1.  Parish\n\nç”šè‡³æ˜¯ï¼š\n```vim\n3. Bird\n1. McHale\n8. Parish\n```\næ•ˆæœæ˜¯ï¼š\n3. Bird\n1. McHale\n8. Parish\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ•°å­—è¿˜æ˜¯æ­£å¸¸çš„ï¼Œæ‰€ä»¥ï¼Œä½ å¯ä»¥è®© `Markdown` æ–‡ä»¶çš„åˆ—è¡¨æ•°å­—å’Œè¾“å‡ºçš„ç»“æœç›¸åŒï¼Œæˆ–æ˜¯ä½ æ‡’ä¸€ç‚¹ï¼Œä½ å¯ä»¥å®Œå…¨ä¸ç”¨åœ¨æ„æ•°å­—çš„æ­£ç¡®æ€§ã€‚\n\nå¦‚æœè¦åœ¨åˆ—è¡¨é¡¹ç›®å†…æ”¾è¿›å¼•ç”¨ï¼Œé‚£ > å°±éœ€è¦ç¼©è¿›ï¼š\n```vim\n*   A list item with a blockquote:\n\n    > This is a blockquote\n    > inside a list item.\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n*   A list item with a blockquote:\n\n    > This is a blockquote\n    > inside a list item.\n\n---\n\n### ä»£ç åŒºå—\n\nåªè¦æŠŠä½ çš„ä»£ç å—åŒ…è£¹åœ¨  <code>\\`\\`\\`</code>  ä¹‹é—´ï¼Œä½ å°±ä¸éœ€è¦é€šè¿‡æ— ä¼‘æ­¢çš„ç¼©è¿›æ¥æ ‡è®°ä»£ç å—äº†ã€‚ åœ¨å›´æ å¼ä»£ç å—ä¸­ï¼Œä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªå¯é€‰çš„è¯­è¨€æ ‡è¯†ç¬¦ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥ä¸ºå®ƒå¯ç”¨è¯­æ³•ç€è‰²äº†ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œè¿™æ ·å¯ä»¥ä¸ºä¸€æ®µ `Ruby` ä»£ç ç€è‰²ï¼š\n\n<code>\n\\`\\`\\`ruby </br>\nrequire 'redcarpet' </br>\nmarkdown = Redcarpet.new(\"Hello World!\") </br>\nputs markdown.to_html </br>\n\\`\\`\\`\n</code>\n\næ•ˆæœå¦‚ä¸‹ï¼š\n\n```ruby\n    require 'redcarpet'\n    markdown = Redcarpet.new(\"Hello World!\")\n    puts markdown.to_html\n```\n\n---\n\n### å¼ºè°ƒ\nåœ¨ `Markdown` ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ \\* å’Œ \\_ æ¥è¡¨ç¤ºæ–œä½“å’ŒåŠ ç²—ã€‚\n\næ–œä½“ï¼š\n\n```vim\n*Codingï¼Œè®©å¼€å‘æ›´ç®€å•*\n_Codingï¼Œè®©å¼€å‘æ›´ç®€å•_\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n\n*Codingï¼Œè®©å¼€å‘æ›´ç®€å•* </br>\n_Codingï¼Œè®©å¼€å‘æ›´ç®€å•_\n\nåŠ ç²—ï¼š\n\n```vim\n**Codingï¼Œè®©å¼€å‘æ›´ç®€å•**\n__Codingï¼Œè®©å¼€å‘æ›´ç®€å•__\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n\n**Codingï¼Œè®©å¼€å‘æ›´ç®€å•** </br>\n__Codingï¼Œè®©å¼€å‘æ›´ç®€å•__\n\n---\n\n### ä»£ç \nå¦‚æœè¦æ ‡è®°ä¸€å°æ®µè¡Œå†…ä»£ç ï¼Œä½ å¯ä»¥ç”¨åå¼•å·æŠŠå®ƒåŒ…èµ·æ¥ <code>\\`\\`\\`</code> ï¼Œä¾‹å¦‚ï¼š\n\n```vim\nUse the `printf()` function.\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n\nUse the `printf()` function.\n\n---\n\n### è‡ªåŠ¨é“¾æ¥\n`Markdown` æ”¯æŒä»¥æ¯”è¾ƒç®€çŸ­çš„è‡ªåŠ¨é“¾æ¥å½¢å¼æ¥å¤„ç†ç½‘å€å’Œç”µå­é‚®ä»¶ä¿¡ç®±ï¼Œåªè¦æ˜¯ç”¨å°–æ‹¬å·åŒ…èµ·æ¥ï¼Œ`Markdown` å°±ä¼šè‡ªåŠ¨æŠŠå®ƒè½¬æˆé“¾æ¥ã€‚ä¸€èˆ¬ç½‘å€çš„é“¾æ¥æ–‡å­—å°±å’Œé“¾æ¥åœ°å€ä¸€æ ·ï¼Œä¾‹å¦‚ï¼š\n```css\n<http://example.com/>\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n\n<http://example.com/>\n\n### é“¾æ¥\n`Markdown` æ”¯æŒä¸¤ç§å½¢å¼çš„é“¾æ¥è¯­æ³•ï¼š *è¡Œå†…å¼* å’Œ *å‚è€ƒå¼* ä¸¤ç§å½¢å¼ã€‚æˆ‘ä¸ªäººæ¯”è¾ƒå–œæ¬¢ç”¨ *å‚è€ƒå¼* ã€‚\n\nä¸ç®¡æ˜¯å“ªä¸€ç§ï¼Œé“¾æ¥æ–‡å­—éƒ½æ˜¯ç”¨ [æ–¹æ‹¬å·] æ¥æ ‡è®°ã€‚\n\n1. *è¡Œå†…å¼* çš„é“¾æ¥ï¼Œåªè¦åœ¨æ–¹å—æ‹¬å·åé¢ç´§æ¥ç€åœ†æ‹¬å·å¹¶æ’å…¥ç½‘å€é“¾æ¥å³å¯ï¼Œå¦‚æœä½ è¿˜æƒ³è¦åŠ ä¸Šé“¾æ¥çš„ `title` æ–‡å­—ï¼Œåªè¦åœ¨ç½‘å€åé¢ï¼Œç”¨åŒå¼•å·æŠŠ `title` æ–‡å­—åŒ…èµ·æ¥å³å¯ï¼Œä¾‹å¦‚ï¼š\n\n```\nThis is [an example](http://example.com/ \"Title\") inline link.\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n\nThis is [an example](http://example.com/ \"Title\") inline link.\n\n---\n\n### å›¾ç‰‡\n`Markdown` ä½¿ç”¨ä¸€ç§å’Œé“¾æ¥å¾ˆç›¸ä¼¼çš„è¯­æ³•æ¥æ ‡è®°å›¾ç‰‡ï¼ŒåŒæ ·ä¹Ÿå…è®¸ä¸¤ç§æ ·å¼ï¼š *è¡Œå†…å¼* å’Œ *å‚è€ƒå¼* ã€‚\n\n1. è¡Œå†…å¼çš„å›¾ç‰‡è¯­æ³•çœ‹èµ·æ¥åƒæ˜¯ï¼š\n\n```\n![Alt text](/path/to/img.jpg)\n\n![Alt text](/path/to/img.jpg \"Optional title\")\n```\nè¯¦ç»†å™è¿°å¦‚ä¸‹ï¼š\n\n- ä¸€ä¸ªæƒŠå¹å· `!`\n- æ¥ç€ä¸€ä¸ªæ–¹æ‹¬å·ï¼Œé‡Œé¢æ”¾ä¸Šå›¾ç‰‡çš„æ›¿ä»£æ–‡å­—\n- æ¥ç€ä¸€ä¸ªæ™®é€šæ‹¬å·ï¼Œé‡Œé¢æ”¾ä¸Šå›¾ç‰‡çš„ç½‘å€ï¼Œæœ€åè¿˜å¯ä»¥ç”¨å¼•å·åŒ…ä½å¹¶åŠ ä¸Š é€‰æ‹©æ€§çš„ `title` æ–‡å­—ã€‚\n\n---\n\n2. å‚è€ƒå¼çš„å›¾ç‰‡è¯­æ³•åˆ™é•¿å¾—åƒè¿™æ ·ï¼š\n\n```lasso\n![Alt text][id]\n```\n`id` æ˜¯å›¾ç‰‡å‚è€ƒçš„åç§°ï¼Œå›¾ç‰‡å‚è€ƒçš„å®šä¹‰æ–¹å¼åˆ™å’Œè¿ç»“å‚è€ƒä¸€æ ·ï¼š\n```lasso\n[id]: url/to/image  \"Optional title attribute\"\n```\n`Markdown` è¿˜æ²¡æœ‰åŠæ³•æŒ‡å®šå›¾ç‰‡çš„å®½é«˜ï¼Œå¦‚æœä½ éœ€è¦çš„è¯ï¼Œä½ å¯ä»¥ä½¿ç”¨æ™®é€šçš„ `<img>`  æ ‡ç­¾ã€‚\n\n---\n\n### LaTeX å…¬å¼\n\nå¯ä»¥åˆ›å»ºè¡Œå†…å…¬å¼ï¼Œä¾‹å¦‚ :\n```\n$\\Gamma(n) = (n-1)!\\quad\\forall n\\in\\mathbb N$\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n\n$\\Gamma(n) = (n-1)!\\quad\\forall n\\in\\mathbb N$\n\næˆ–è€…å—çº§å…¬å¼ï¼š\n```\n$$\tx = \\dfrac{-b \\pm \\sqrt{b^2 - 4ac}}{2a} $$\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n\n$$ x = \\dfrac{-b \\pm \\sqrt{b^2 - 4ac}}{2a} $$\n\n---\n\n### è¡¨æ ¼\n\n```lasso\n| Item      |    Value | Qty  |\n| :-------- | --------:| :--: |\n| Computer  | 1600 USD |  5   |\n| Phone     |   12 USD |  12  |\n| Pipe      |    1 USD | 234  |\n```\n\næ•ˆæœå¦‚ä¸‹ï¼š\n\n| Item      |    Value | Qty  |\n| :-------- | --------:| :--: |\n| Computer  | 1600 USD |  5   |\n| Phone     |   12 USD |  12  |\n| Pipe      |    1 USD | 234  |\n\n\n---\n\n### æµç¨‹å›¾\n\n<code>\n\\`\\`\\`flow </br>\nst=>start: Start </br>\ne=>end </br>\nop=>operation: My Operation </br>\ncond=>condition: Yes or No? </br>       \nst->op->cond </br>\ncond(yes)->e </br>\ncond(no)->op </br>\n\\`\\`\\`\n</code>\n\næ•ˆæœå¦‚ä¸‹ï¼š\n\n```flow\nst=>start: Start\ne=>end\nop=>operation: My Operation\ncond=>condition: Yes or No?\n\nst->op->cond\ncond(yes)->e\ncond(no)->op\n```\n\nä»¥åŠæ—¶åºå›¾:\n\n<code>\n\\`\\`\\`sequence </br>\nAlice->Bob: Hello Bob, how are you? </br>\nNote right of Bob: Bob thinks </br>\nBob-->Alice: I am good thanks! </br>\n\\`\\`\\`\n</code>\n\næ•ˆæœå¦‚ä¸‹ï¼š\n\n```sequence\nAlice->Bob: Hello Bob, how are you?\nNote right of Bob: Bob thinks\nBob-->Alice: I am good thanks!\n```\n\n### å¤é€‰æ¡†\n\nä½¿ç”¨ `- [ ]` å’Œ `- [x]` è¯­æ³•å¯ä»¥åˆ›å»ºå¤é€‰æ¡†ï¼Œå®ç° todo-list ç­‰åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼š\n\n```lasso\n- [x] å·²å®Œæˆäº‹é¡¹\n- [ ] å¾…åŠäº‹é¡¹1\n- [ ] å¾…åŠäº‹é¡¹2\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n- [x] å·²å®Œæˆäº‹é¡¹\n- [ ] å¾…åŠäº‹é¡¹1\n- [ ] å¾…åŠäº‹é¡¹2\n\n---\n\n### åˆ†å‰²çº¿\nåœ¨ `Markdown` ä¸­ï¼Œå¯ä»¥åˆ¶ä½œåˆ†å‰²çº¿ï¼Œä¾‹å¦‚ï¼š\n\n```lasso\n    ---\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n\n--- \n\n### åæ–œæ \n\n`Markdown` å¯ä»¥åˆ©ç”¨åæ–œæ æ¥æ’å…¥ä¸€äº›åœ¨è¯­æ³•ä¸­æœ‰å…¶å®ƒæ„ä¹‰çš„ç¬¦å·ï¼Œä¾‹å¦‚ï¼šå¦‚æœä½ æƒ³è¦ç”¨æ˜Ÿå·åŠ åœ¨æ–‡å­—æ—è¾¹çš„æ–¹å¼æ¥åšå‡ºå¼ºè°ƒæ•ˆæœï¼ˆä½†ä¸ç”¨ `<em>` æ ‡ç­¾ï¼‰ï¼Œä½ å¯ä»¥åœ¨æ˜Ÿå·çš„å‰é¢åŠ ä¸Šåæ–œæ ï¼š\n```\n\\*literal asterisks\\*\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n\n\\*literal asterisks\\*\n\n`Markdown` æ”¯æŒä»¥ä¸‹è¿™äº›ç¬¦å·å‰é¢åŠ ä¸Šåæ–œæ æ¥å¸®åŠ©æ’å…¥æ™®é€šçš„ç¬¦å·ï¼š\n\n\n```\n  \\   åæ–œçº¿\n  `   åå¼•å·\n  *   æ˜Ÿå·\n  _   åº•çº¿\n  {}  èŠ±æ‹¬å·\n  []  æ–¹æ‹¬å·\n  ()  æ‹¬å¼§\n  #   äº•å­—å·\n  +   åŠ å·\n  -   å‡å·\n  .   è‹±æ–‡å¥ç‚¹\n  !   æƒŠå¹å·\n```\n","tags":["markdown"],"categories":["å·¥å…·"]},{"title":"è¢«é—å¿˜çš„CSS","url":"%2FupsetCssSummary.html","content":"\n{% fi https://cdn.lishaoy.net/upsetCssSummary/css.png, css, css %}\n\nå¹³æ—¶åœ¨å·¥ä½œä¸­é‡åˆ°ä¸€äº›æ¯”è¾ƒåé—¨çš„ `css` ï¼Œç”¨è¿‡ä¸€ä¸¤æ¬¡ï¼Œä½†æ˜¯è€æ˜¯è®°ä¸ä½ï¼Œäºæ˜¯åˆéœ€è¦å» **baiduã€ google** ï¼Œæ‰€ä»¥éƒ½ç§¯ç´¯èµ·æ¥ï¼Œæ–¹ä¾¿ä»¥åæŸ¥çœ‹ï¼ˆæŒç»­æ›´æ–°...ï¼‰ ğŸ˜€\n\n---\n\n<!-- more -->\n\n#### `outline`  **å½“inputé€‰ä¸­çš„æ—¶å€™ä¼šå‡ºç°ä¸€ä¸ªè¾¹æ¡†**\n\n```css\n/*ä¸€èˆ¬è®¾ç½®æˆ none*/\ntextarea:focus, input:focus{\n    outline: none;\n}\n```\n#### `contenteditable` **è§„å®šå…ƒç´ å†…å®¹æ˜¯å¦å¯ç¼–è¾‘**\n\n```vbscript-html\n<div id=\"example-one\" contenteditable=\"true\">\n```\n\n```css\n#example-one { \n    margin-bottom: 10px; \n}\n[contenteditable=\"true\"] { \n    padding: 10px; outline: 2px dashed #CCC; \n}\n[contenteditable=\"true\"]:hover { \n    outline: 2px dashed #0090D2; \n}\n```\n#### `webkit-playsinline` **video éƒ½å¯ä»¥åœ¨é¡µé¢ä¸­æ’­æ”¾ï¼Œè€Œä¸æ˜¯å…¨å±æ’­æ”¾**\n\n```vbscript-html\n<video id=\"myvideo\" src=\"test.mp4\" webkit-playsinline=\"true\"></video>\n```\n\n#### `clearfix` **æ¸…é™¤æµ®åŠ¨**\n\n```css\n.clearfix {\n    zoom: 1;\n}\n.clearfix:after {\n     visibility: hidden;\n     display: block;\n     font-size: 0;\n     content: \" \";\n     clear: both;\n     height: 0;\n }\n```\n#### `user-select ` **ç¦æ­¢é€‰ä¸­æ–‡æœ¬**\n\n```css\np {\n    -webkit-user-select: none; /* Chrome, Opera, Safari */\n    -moz-user-select: none; /* Firefox 2+ */\n    -ms-user-select: none; /* IE 10+ */\n    user-select: none; /* Standard syntax */\n}\n```\n#### `webkit-scrollbar` **è‡ªå®šä¹‰æµè§ˆå™¨æ»šåŠ¨æ¡**\n\n```css\n/*å®šä¹‰æ»šåŠ¨æ¡å®½é«˜åŠèƒŒæ™¯ï¼Œå®½é«˜åˆ†åˆ«å¯¹åº”æ¨ªç«–æ»šåŠ¨æ¡çš„å°ºå¯¸*/\n\ndiv::-webkit-scrollbar {\n    width: 5px;\n    height: 5px;\n    background-color: rgba(245, 245, 245, 0.47);\n}\n\n/*å®šä¹‰æ»šåŠ¨æ¡çš„è½¨é“ï¼Œå†…é˜´å½±åŠåœ†è§’*/\n\ndiv::-webkit-scrollbar-track {\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, .3);\n    border-radius: 10px;\n    background-color: #f5f5f5;\n}\n\n/*å®šä¹‰æ»‘å—ï¼Œå†…é˜´å½±åŠåœ†è§’*/\n\ndiv::-webkit-scrollbar-thumb {\n    /*width: 10px;*/\n    height: 20px;\n    border-radius: 10px;\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, .3);\n    background-color: rgba(85, 85, 85, 0.25);\n}\n```\n\n#### `webkit-appearance` **å»é™¤é»˜è®¤æ ·å¼**\n\n```css\ninput, button, textarea, select {\n    *font-size: 100%;\n    -webkit-appearance:none;\n}\n```\n#### **ä½¿ç”¨CSS transforms æˆ–è€… animationsæ—¶å¯èƒ½ä¼šæœ‰é¡µé¢é—ªçƒçš„bug**\n\n```css\nelements {\n     -webkit-backface-visibility: hidden; \n}\n```\n#### `transform-style: preserve-3d` **è®©å…ƒç´ æ”¯æŒ3D**\n\n```css\nelements {\n    -webkit-transform: rotateY(60deg); /* Chrome, Safari, Opera */\n    -webkit-transform-style: preserve-3d; /* Chrome, Safari, Opera */\n    transform: rotateY(60deg);\n    transform-style: preserve-3d;\n}\n```\n#### `perspective` **è¿™ä¸ªå±æ€§å®šä¹‰å­å…ƒç´ ä¼šè·å¾—é€è§†æ•ˆæœï¼Œè€Œä¸æ˜¯å…ƒç´ æœ¬èº«**\n\n```vbscript-html\n<div class=\"cube pers250\">\n    <div class=\"face front\">1</div>\n    <div class=\"face back\">2</div>\n    <div class=\"face right\">3</div>\n    <div class=\"face left\">4</div>\n    <div class=\"face top\">5</div>\n    <div class=\"face bottom\">6</div>\n</div>\n```\n```css\n.cube {\n  width: 100%;\n  height: 100%;\n  backface-visibility: visible;\n  perspective-origin: 150% 150%;\n  transform-style: preserve-3d;\n  -webkit-backface-visibility: visible;\n  -webkit-perspective-origin: 150% 150%;\n  -webkit-transform-style: preserve-3d;\n}\n.pers250 {\n  perspective: 250px;\n  -webkit-perspective: 250px;\n}\n.face {\n  display: block;\n  position: absolute;\n  width: 100px;\n  height: 100px;\n   border: none;\n  line-height: 100px;\n  font-family: sans-serif;\n  font-size: 60px;\n  color: white;\n  text-align: center;\n}\n```\n#### **csså®ç°ä¸æ¢è¡Œã€è‡ªåŠ¨æ¢è¡Œã€å¼ºåˆ¶æ¢è¡Œ**\n\n```css\n/*ä¸æ¢è¡Œ*/\nwhite-space:nowrap;\n\n/*è‡ªåŠ¨æ¢è¡Œ*/\nword-wrap: break-word; \nword-break: normal; \n\n/*å¼ºåˆ¶æ¢è¡Œ*/\nword-break:break-all;\n```\n\n#### `font-smoothing` **è®¾ç½®å­—ä½“å¹³æ»‘ï¼Œä¼šè®©å­—ä½“çœ‹èµ·æ¥æ¯”è¾ƒèˆ’æœ**\n\n```css\nh1, .h1, h2, .h2, h3, .h3, h4, .h4, h5, .h5, h6, .h6, p, .navbar, .brand, a, .td-name, td {\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-font-smoothing: antialiased;\n    font-family: \"Microsoft YaHei\", \"å¾®è½¯é›…é»‘\", 'Muli', \"Helvetica\", Arial, sans-serif;\n}\n```\n#### `::selection` **ä¿®æ”¹é€‰ä¸­æ–‡æœ¬é¢œè‰²**\n\n```css\n::selection {\n\tcolor: white;\n\tbackground-color: rgba(0, 0, 0, 0.8);\n}\n::-webkit-selection {\n\tcolor: white;\n\tbackground-color: rgba(0, 0, 0, 0.8);\n}\n::-moz-selection {\n\tcolor: white;\n\tbackground-color: rgba(0, 0, 0, 0.8);\n}\n```\n\n#### è®©èƒŒæ™¯å›¾ç‰‡å¤§å°è‡ªé€‚åº”ä¸”å±…ä¸­\n\n```css\n    background-size: contain;\n    background-repeat: no-repeat;\n    background-position: 50% 50%;\n```","tags":["css"],"categories":["CSS"]},{"title":"PHP ThinkPHP åˆè¯†","url":"%2FphpThinkPHPBasis.html","content":"\n{% fi https://cdn.lishaoy.net/phpThinkPHPBasis/php.png, php && thinkPHP åŸºç¡€, php && thinkPHP åŸºç¡€ %}\n\nè¿™ç¯‡æ–‡ç« ä¸»è¦å¸¦å¤§å®¶è®¤è¯†ä¸€ä¸‹ `PHP` ã€ `thinkPHP` ï¼Œéƒ½æ˜¯ä¸€ä¸‹åŸºç¡€ï¼Œå…¶ä¸­åŒ…æ‹¬ **PHPè¯­æ³•ï¼ˆå˜é‡ã€å­—ç¬¦ä¸²ã€æ•°ç»„ã€è¡¨å•ã€æ•°æ®åº“ï¼‰** ã€**é¢å‘å¯¹è±¡ï¼ˆClassåˆ›å»ºã€å±æ€§ã€ç»§æ‰¿ã€è®¿é—®æ§åˆ¶ã€æŠ½è±¡ã€æ¥å£ç­‰ï¼‰** ã€ **thinkPHPï¼ˆæ§åˆ¶å™¨ã€è§†å›¾ã€æ¨¡å‹ç­‰ï¼‰** ğŸ˜\n\n---\n\n<!-- more -->\n\n## PHPåŸºç¡€çŸ¥è¯†\nä»¥ä¸‹çŸ¥è¯†ç‚¹æ‰€æœ‰å†…å®¹éƒ½æ˜¯æ¥è‡ªå®˜æ–¹æä¾›çš„ **PHP** æ–‡æ¡£ã€Š[PHPæ‰‹å†Œ][1]ã€‹ï¼Œæ›´å¤šç»†èŠ‚åŠçŸ¥è¯†ç‚¹å¯ä»¥æŸ¥çœ‹ã€Š[PHPæ‰‹å†Œ][2]ã€‹ã€‚\n\nå¦‚æœä½ å¹³æ—¶ç”¨ **Windows** ç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨ [WAMP][3] æ¥æ­å»ºä¸€ä¸ªæœ¬åœ°çš„å¼€å‘ç¯å¢ƒã€‚å¦‚æœä½ æ˜¯ **OSX** ï¼Œå¯ä»¥ä½¿ç”¨ [MAMP][4] æ¥æ­å»ºä¸€ä¸ªå¼€å‘ç¯å¢ƒã€‚\n### PHPè¯­æ³•\n#### è®¤è¯†PHP\nPHP ä»£ç è¢«åŒ…å«åœ¨ç‰¹æ®Šçš„èµ·å§‹ç¬¦å’Œç»“æŸç¬¦ `<?php` å’Œ `?>` ä¸­ï¼Œä½¿å¾—å¯ä»¥è¿›å‡ºâ€œPHP æ¨¡å¼â€ã€‚å¦‚æœæ–‡ä»¶éƒ½æ˜¯ **PHP** ä»£ç ï¼Œå¯ä»¥çœç•¥ç»“æŸæ ‡è®°ï¼Œä½†æ˜¯å¿…é¡»ä»¥ `;` ç»“æŸã€‚\n\n```html\n<body>\n  <h1>php</h1>\n  <?php\n    echo \"lishaoying\";\n    $name = 'æå°‘é¢–';\n    echo \"hello: \" . $name ;\n  ?>\n</body>\n```\nç»“æœä¼šè¾“å‡ºï¼š`lishaoyinghello: æå°‘é¢–`, **PHP** è§£æå™¨ä¼šè§£æå¼€å§‹`<?php` å’Œç»“æŸæ ‡è®° `?>` ä¹‹é—´çš„å†…å®¹ã€‚\n\n---\n#### å˜é‡\n**PHP** ä¸­çš„å˜é‡ç”¨ä¸€ä¸ªç¾å…ƒç¬¦å·åé¢è·Ÿå˜é‡åæ¥è¡¨ç¤ºã€‚å˜é‡åæ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚\n```php\n<?php\n\n$name = 'lishaoy.net';\necho \"hello $name \\r\\n\";\n```\nç»“æœä¼šè¾“å‡ºï¼š`hello lishaoy.net `ã€‚\n\n---\n#### å­—ç¬¦ä¸²\nåœ¨ **PHP** é‡Œé¢å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨å•å¼•å·`' '`æˆ–è€…åŒå¼•å·`\" \"`ã€‚\n```php\n<?php\n\n$email = \"persilee@foxmail.com<br />\";\n```\nç¬¬ä¸‰ç§è¡¨è¾¾å­—ç¬¦ä¸²çš„æ–¹æ³•æ˜¯ç”¨ **heredoc** å¥æ³•ç»“æ„ï¼š`<<<`ã€‚\n\n```php\n$word = <<< WORD\nè¿™æ˜¯ä¸€ä¸ªæµ‹è¯• - $name ã€‚ . <br />\nä»Šå¤©ï¼Œå¤©æ°”ä¸é”™ï¼Œæˆ‘ä»¬å‡ºå»ç©å§ï¼ . <br />\nWORD;\n\necho $word;\n```\nç»“æœä¼šè¾“å‡ºï¼š `è¿™æ˜¯ä¸€ä¸ªæµ‹è¯• - lishaoy.net ã€‚`\n\n---\n#### æ•°ç»„\nå¯ä»¥ç”¨ `array()` è¯­è¨€ç»“æ„æ¥æ–°å»ºä¸€ä¸ªæ•°ç»„ã€‚å®ƒæ¥å—ä»»æ„æ•°é‡ç”¨é€—å·åˆ†éš”çš„ é”®ï¼ˆ**key**ï¼‰ `=>` å€¼ï¼ˆ**value**ï¼‰å¯¹ã€‚\n\n```php\n<?php\n$tracks = array(\n  0 => 'é•¿åŸ',\n);\n\necho var_dump(\n  $tracks[0]\n);\n```\nç»“æœä¼šè¾“å‡ºï¼š `string(6) \"é•¿åŸ\"`ã€‚\n\n---\n#### è¡¨å•\n`$_GET`ï¼Œè¿˜æœ‰ `$_POST`ï¼Œè¿™ä¸¤ä¸ªä¸œè¥¿é‡Œé¢ä¼šå­˜å‚¨ä½¿ç”¨ä¸åŒçš„æ–¹æ³•æäº¤çš„è¡¨å•çš„å†…å®¹ï¼Œ`$_GET` é‡Œé¢å­˜å‚¨çš„æ˜¯ç”¨ **GET** æ–¹æ³•æäº¤çš„è¡¨å•å†…å®¹ã€‚\n\n```html\n<body>\n  <form class=\"\" action=\"process.php\" method=\"get\">\n    <input type=\"text\" name=\"user_name\" value=\"\" placeholder=\"ç”¨æˆ·å\">\n    <input type=\"email\" name=\"email\" value=\"\" placeholder=\"Email\">\n    <button type=\"submit\">æ äº¤</button>\n  </form>\n</body>\n```\n**process.php**æ–‡ä»¶å†…å®¹ï¼š\n\n```php\n<?php\necho '<pre>';\n  var_dump(\n    $_GET['user_name']\n  );\necho '</pre>';\n```\nç‚¹æäº¤ä¹‹åä¼šæŠŠæ–‡æœ¬æ¡†çš„å†…å®¹ä¼ é€’åˆ°**process.php**æ–‡ä»¶å¤„ç†ï¼Œè¿™é‡Œä¼šè¾“å‡ºæ–‡æœ¬æ¡†çš„è¾“å…¥å†…å®¹ã€‚\n\n---\n#### æ•°æ®åº“\n**PDO** ç±»ï¼Œä»£è¡¨ **PHP** å’Œæ•°æ®åº“æœåŠ¡ä¹‹é—´çš„ä¸€ä¸ªè¿æ¥ã€‚\n\n```php\n$db_handle = new PDO('mysql:host=127.0.0.1;dbname=msg;port=8889;charset=utf8','msg_test','123');\n```\nè¿™æ ·å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªå’Œæ•°æ®åº“çš„è¿æ¥ã€‚\n```php\n<?php\n\ntry {\n  $db_handle = new PDO('mysql:host=127.0.0.1;dbname=msg;port=8889;charset=utf8','msg_test','123');\n\n$statement = $db_handle->prepare(\n  'insert into posts(title, content) values (:title, :content)'\n);\n\n$title = 'Wall-e';\n$content = 'wall-eå·²ç»åœ¨åœ°çƒä¸Šå­¤ç‹¬ç”Ÿæ´»äº†å‡ ç™¾å¹´ï¼Œä»–çˆ±ä¸Šäº†ã€‚ã€‚ã€‚';\n\n$statement->bindParam(':title', $title);\n$statement->bindParam(':content', $content);\n\n$statement->execute();\n\n} catch (Exception $e) {\n  echo $e->getMessage();\n}\n```\nå¯ä»¥å‘æ•°æ®åº“çš„**posts**è¡¨æ’å…¥ä¸€æ¡æ•°æ®ã€‚\n\n---\n### é¢å‘å¯¹è±¡\n#### åˆ›å»ºClass\næ¯ä¸ªç±»çš„å®šä¹‰éƒ½ä»¥å…³é”®å­— `class` å¼€å¤´ï¼Œåé¢è·Ÿç€ç±»åï¼Œåé¢è·Ÿç€ä¸€å¯¹èŠ±æ‹¬å·ï¼Œé‡Œé¢åŒ…å«æœ‰ç±»çš„å±æ€§ä¸æ–¹æ³•çš„å®šä¹‰ã€‚\n```php\nclass Track\n{\n    \n}\n```\n\n---\n#### å¢åŠ å±æ€§\nç±»çš„å˜é‡æˆå‘˜å«åšâ€œ**å±æ€§**â€ï¼Œæˆ–è€…å«â€œ**å­—æ®µ**â€ã€â€œ**ç‰¹å¾**â€ï¼Œåœ¨æœ¬æ–‡æ¡£ç»Ÿä¸€ç§°ä¸ºâ€œ**å±æ€§**â€ã€‚\n```php\nclass Track\n{\n    public $track_name;\n    public $track_artist;\n}\n```\n\n---\n#### ç»§æ‰¿\n**ç»§æ‰¿** å°†ä¼šå½±å“åˆ°ç±»ä¸ç±»ï¼Œå¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€‚\n\næ¯”å¦‚ï¼Œå½“æ‰©å±•ä¸€ä¸ªç±»ï¼Œå­ç±»å°±ä¼š**ç»§æ‰¿**çˆ¶ç±»æ‰€æœ‰å…¬æœ‰çš„å’Œå—ä¿æŠ¤çš„æ–¹æ³•ã€‚é™¤éå­ç±»è¦†ç›–äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œè¢«**ç»§æ‰¿**çš„æ–¹æ³•éƒ½ä¼šä¿ç•™å…¶åŸæœ‰åŠŸèƒ½ã€‚\n```php\n<?php\n\nclass Player extends Track\n{\n\n}\n```\n\n---\n#### è®¿é—®æ§åˆ¶\nå¯¹å±æ€§æˆ–æ–¹æ³•çš„è®¿é—®æ§åˆ¶ï¼Œæ˜¯é€šè¿‡åœ¨å‰é¢æ·»åŠ å…³é”®å­— `public`ï¼ˆå…¬æœ‰ï¼‰ï¼Œ`protected`ï¼ˆå—ä¿æŠ¤ï¼‰æˆ– `private`ï¼ˆç§æœ‰ï¼‰æ¥å®ç°çš„ã€‚è¢«å®šä¹‰ä¸ºå…¬æœ‰çš„ç±»æˆå‘˜å¯ä»¥ **åœ¨ä»»ä½•åœ°æ–¹è¢«è®¿é—®**ã€‚è¢«å®šä¹‰ä¸ºå—ä¿æŠ¤çš„ç±»æˆå‘˜åˆ™å¯ä»¥ **è¢«å…¶è‡ªèº«ä»¥åŠå…¶å­ç±»å’Œçˆ¶ç±»è®¿é—®**ã€‚è¢«å®šä¹‰ä¸ºç§æœ‰çš„ç±»æˆå‘˜åˆ™ **åªèƒ½è¢«å…¶å®šä¹‰æ‰€åœ¨çš„ç±»è®¿é—®**ã€‚\n\n---\n#### é™æ€å±æ€§ä¸æ–¹æ³•\nå£°æ˜ç±»å±æ€§æˆ–æ–¹æ³•ä¸º**é™æ€**( `static` )ï¼Œå°±å¯ä»¥ä¸å®ä¾‹åŒ–ç±»è€Œç›´æ¥è®¿é—®ã€‚é™æ€å±æ€§ä¸èƒ½é€šè¿‡ä¸€ä¸ªç±»å·²å®ä¾‹åŒ–çš„å¯¹è±¡æ¥è®¿é—®ï¼ˆä½†é™æ€æ–¹æ³•å¯ä»¥ï¼‰ã€‚\n```php\nclass Track\n{\n    public static $track_name = 'Magic';\n    public $track_artist;\n    \n    public static function track_playing() {\n        return 'æ­£åœ¨æ’­æ”¾' . self::$track_name;\n    }\n}\n```\n\n---\n#### æ„é€ å‡½æ•°\nå…·æœ‰**æ„é€ å‡½æ•°**( `__construct` )çš„ç±»ä¼šåœ¨æ¯æ¬¡åˆ›å»ºæ–°å¯¹è±¡æ—¶å…ˆè°ƒç”¨æ­¤æ–¹æ³•ï¼Œæ‰€ä»¥éå¸¸é€‚åˆåœ¨ä½¿ç”¨å¯¹è±¡ä¹‹å‰åšä¸€äº›åˆå§‹åŒ–å·¥ä½œã€‚\n```php\n<?php\n\nclass Track\n{\n    public $track_name;\n    public $track_artist;\n    \n    public function __construct() {\n        echo 'åˆå§‹åŒ–æ•°æ®...';\n    }\n    \n    public function track_playing() {\n        return 'æ­£åœ¨æ’­æ”¾' . $this->$track_name;\n    }\n}\n```\n\n---\n#### æ„é€ å™¨ä¸è·å–å™¨\nåœ¨ç»™ä¸å¯è®¿é—®å±æ€§èµ‹å€¼æ—¶ï¼Œ`__set()` ä¼šè¢«è°ƒç”¨ã€‚\nè¯»å–ä¸å¯è®¿é—®å±æ€§çš„å€¼æ—¶ï¼Œ`__get()` ä¼šè¢«è°ƒç”¨ã€‚\n```php\n<?php\n\nclass Track\n{      \n    private $track_name;\n    private $track_artist;\n\n    public function __set($name, $value) {\n        if (property_exists($this, $name)) {\n            $this->$name = $value;\n        }\n    }\n    \n    public function __get($name) {\n        return $this->$name;\n    }\n\n    public function track_playing() {\n        return 'æ­£åœ¨æ’­æ”¾' . $this->$track_name;\n    }\n}\n```\n\n---\n#### æŠ½è±¡ç±»\n**å®šä¹‰ä¸ºæŠ½è±¡çš„ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–**( `abstract` )ã€‚ä»»ä½•ä¸€ä¸ªç±»ï¼Œå¦‚æœå®ƒé‡Œé¢è‡³å°‘æœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯è¢«å£°æ˜ä¸ºæŠ½è±¡çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å°±å¿…é¡»è¢«å£°æ˜ä¸ºæŠ½è±¡çš„ã€‚è¢«å®šä¹‰ä¸ºæŠ½è±¡çš„æ–¹æ³•åªæ˜¯å£°æ˜äº†å…¶è°ƒç”¨æ–¹å¼ï¼ˆå‚æ•°ï¼‰ï¼Œä¸èƒ½å®šä¹‰å…¶å…·ä½“çš„åŠŸèƒ½å®ç°ã€‚\n```php\n<?php\n\nabstract class Entity\n{\n    protected $entity_type;\n    public function get_entity_type() {\n        return $this->entity_type;\n    }\n    \n    abstract public function save();\n}\n\nclass User extends Entity\n{\n    protected $entity_type = 'user';\n    \n    public function save() {\n        return $this->entity_type . 'ï¼šä¿å­˜æˆåŠŸï¼';\n    }\n}\n```\n\n---\n#### æ¥å£\nä½¿ç”¨ **æ¥å£**ï¼ˆ `interface `ï¼‰ï¼Œå¯ä»¥æŒ‡å®šæŸä¸ªç±»å¿…é¡»å®ç°å“ªäº›æ–¹æ³•ï¼Œä½†ä¸éœ€è¦å®šä¹‰è¿™äº›æ–¹æ³•çš„å…·ä½“å†…å®¹ã€‚\n\n**æ¥å£** æ˜¯é€šè¿‡ `interface` å…³é”®å­—æ¥å®šä¹‰çš„ï¼Œå°±åƒå®šä¹‰ä¸€ä¸ªæ ‡å‡†çš„ç±»ä¸€æ ·ï¼Œä½†å…¶ä¸­å®šä¹‰æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯ç©ºçš„ã€‚\n\n**æ¥å£** ä¸­å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•éƒ½å¿…é¡»æ˜¯å…¬æœ‰ï¼Œè¿™æ˜¯æ¥å£çš„ç‰¹æ€§ã€‚\n```php\n<?php\n\ninterface DataInterface \n{\n    public function get_data();\n}\n\ninterface EntityInterface\n{\n    public function get_entity_type();\n}\n\nclass Entity implements DataInterface, EntityInterface\n{\n    public function get_data() {\n        return 'æ•°æ®...';\n    }\n    \n    public function get_entity_type() {\n        return 'ç±»å‹...';\n    }\n}\n```\n\n---\n## ThinkPHP\nä»¥ä¸‹å†…å®¹åŸºæœ¬éƒ½æ˜¯æ¥è‡ª**ThinkPHP**[å®˜æ–¹æ–‡æ¡£][5]ï¼Œæ›´å¤šç»†èŠ‚åŠçŸ¥è¯†ç‚¹å¯æŸ¥çœ‹ [å®˜æ–¹æ–‡æ¡£][5]ã€‚\n### åŸºç¡€\n#### ç¯å¢ƒè¦æ±‚\n**PHPç‰ˆæœ¬è¦æ±‚**\n- PHP5.3ä»¥ä¸Šç‰ˆæœ¬\n\n**æ”¯æŒçš„æœåŠ¡å™¨å’Œæ•°æ®åº“ç¯å¢ƒ**\n- æ”¯æŒWindows/UnixæœåŠ¡å™¨ç¯å¢ƒ\n- å¯è¿è¡ŒäºåŒ…æ‹¬Apacheã€IISå’Œnginxåœ¨å†…çš„å¤šç§WEBæœåŠ¡å™¨å’Œæ¨¡å¼\n- æ”¯æŒMysqlã€MsSQLã€PgSQLã€Sqliteã€Oracleã€Ibaseã€Mongoä»¥åŠPDOç­‰å¤šç§æ•°æ®åº“å’Œè¿æ¥\n\nå¦‚æœä½ å¹³æ—¶ç”¨ **Windows** ç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨ [WAMP][6] æ¥æ­å»ºä¸€ä¸ªæœ¬åœ°çš„å¼€å‘ç¯å¢ƒã€‚å¦‚æœä½ æ˜¯ **OSX** ï¼Œå¯ä»¥ä½¿ç”¨ [MAMP][7] æ¥æ­å»ºä¸€ä¸ªå¼€å‘ç¯å¢ƒã€‚\n\n---\n#### ç›®å½•ç»“æ„\nåˆå§‹çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š\n```vim\nwww  WEBéƒ¨ç½²ç›®å½•ï¼ˆæˆ–è€…å­ç›®å½•ï¼‰\nâ”œâ”€index.php       å…¥å£æ–‡ä»¶\nâ”œâ”€README.md       READMEæ–‡ä»¶\nâ”œâ”€Application     åº”ç”¨ç›®å½•\nâ”œâ”€Public          èµ„æºæ–‡ä»¶ç›®å½•\nâ””â”€ThinkPHP        æ¡†æ¶ç›®å½•\n```\nå…¶ä¸­æ¡†æ¶ç›®å½•**ThinkPHP**çš„ç»“æ„å¦‚ä¸‹ï¼š\n```vim\nâ”œâ”€ThinkPHP æ¡†æ¶ç³»ç»Ÿç›®å½•ï¼ˆå¯ä»¥éƒ¨ç½²åœ¨éwebç›®å½•ä¸‹é¢ï¼‰\nâ”‚  â”œâ”€Common       æ ¸å¿ƒå…¬å…±å‡½æ•°ç›®å½•\nâ”‚  â”œâ”€Conf         æ ¸å¿ƒé…ç½®ç›®å½• \nâ”‚  â”œâ”€Lang         æ ¸å¿ƒè¯­è¨€åŒ…ç›®å½•\nâ”‚  â”œâ”€Library      æ¡†æ¶ç±»åº“ç›®å½•\nâ”‚  â”‚  â”œâ”€Think     æ ¸å¿ƒThinkç±»åº“åŒ…ç›®å½•\nâ”‚  â”‚  â”œâ”€Behavior  è¡Œä¸ºç±»åº“ç›®å½•\nâ”‚  â”‚  â”œâ”€Org       Orgç±»åº“åŒ…ç›®å½•\nâ”‚  â”‚  â”œâ”€Vendor    ç¬¬ä¸‰æ–¹ç±»åº“ç›®å½•\nâ”‚  â”‚  â”œâ”€ ...      æ›´å¤šç±»åº“ç›®å½•\nâ”‚  â”œâ”€Mode         æ¡†æ¶åº”ç”¨æ¨¡å¼ç›®å½•\nâ”‚  â”œâ”€Tpl          ç³»ç»Ÿæ¨¡æ¿ç›®å½•\nâ”‚  â”œâ”€LICENSE.txt  æ¡†æ¶æˆæƒåè®®æ–‡ä»¶\nâ”‚  â”œâ”€logo.png     æ¡†æ¶LOGOæ–‡ä»¶\nâ”‚  â”œâ”€README.txt   æ¡†æ¶READMEæ–‡ä»¶\nâ”‚  â””â”€ThinkPHP.php    æ¡†æ¶å…¥å£æ–‡ä»¶\n```\n\n---\n#### å…¥å£æ–‡ä»¶\n**ThinkPHP**é‡‡ç”¨å•ä¸€å…¥å£æ¨¡å¼è¿›è¡Œé¡¹ç›®éƒ¨ç½²å’Œè®¿é—®ï¼Œæ— è®ºå®Œæˆä»€ä¹ˆåŠŸèƒ½ï¼Œä¸€ä¸ªåº”ç”¨éƒ½æœ‰ä¸€ä¸ªç»Ÿä¸€ï¼ˆä½†ä¸ä¸€å®šæ˜¯å”¯ä¸€ï¼‰çš„å…¥å£ã€‚\n\n**å…¥å£æ–‡ä»¶ä¸»è¦å®Œæˆï¼š**\n- å®šä¹‰æ¡†æ¶è·¯å¾„ã€é¡¹ç›®è·¯å¾„ï¼ˆå¯é€‰ï¼‰\n- å®šä¹‰è°ƒè¯•æ¨¡å¼å’Œåº”ç”¨æ¨¡å¼ï¼ˆå¯é€‰ï¼‰\n- å®šä¹‰ç³»ç»Ÿç›¸å…³å¸¸é‡ï¼ˆå¯é€‰ï¼‰\n- è½½å…¥æ¡†æ¶å…¥å£æ–‡ä»¶ï¼ˆ**å¿…é¡»**ï¼‰\n\n```php\n// å¼€å¯è°ƒè¯•æ¨¡å¼ å»ºè®®å¼€å‘é˜¶æ®µå¼€å¯ éƒ¨ç½²é˜¶æ®µæ³¨é‡Šæˆ–è€…è®¾ä¸ºfalse\ndefine('APP_DEBUG',true);\n\n// å®šä¹‰åº”ç”¨ç›®å½•\ndefine( 'APP_PATH', dirname(__FILE__).'/Application/' );\n\n//ç”Ÿæˆåå°æ¨¡å—\ndefine('BIND_MODULE','Admin');\n\n// å¼•å…¥ThinkPHPå…¥å£æ–‡ä»¶\nrequire dirname( __FILE__).'/ThinkPHP/ThinkPHP.php';\n```\n\n---\n#### URL\nå…¥å£æ–‡ä»¶æ˜¯åº”ç”¨çš„å•ä¸€å…¥å£ï¼Œå¯¹åº”ç”¨çš„æ‰€æœ‰è¯·æ±‚éƒ½å®šå‘åˆ°åº”ç”¨å…¥å£æ–‡ä»¶ï¼Œç³»ç»Ÿä¼šä»URLå‚æ•°ä¸­è§£æå½“å‰è¯·æ±‚çš„æ¨¡å—ã€æ§åˆ¶å™¨å’Œæ“ä½œï¼š\n\n```vim\nhttp://serverName/index.php/æ¨¡å—/æ§åˆ¶å™¨/æ“ä½œ\n```\n\n---\n### æ§åˆ¶å™¨\n#### æ§åˆ¶å™¨å®šä¹‰\nä¸€èˆ¬æ¥è¯´ï¼ŒThinkPHPçš„æ§åˆ¶å™¨æ˜¯ä¸€ä¸ªç±»ï¼Œè€Œæ“ä½œåˆ™æ˜¯æ§åˆ¶å™¨ç±»çš„ä¸€ä¸ªå…¬å…±æ–¹æ³•ã€‚\nä¸‹é¢å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„æ§åˆ¶å™¨ç±»çš„å®šä¹‰ï¼š\n```php\nnamespace Admin\\Controller;\nuse Think\\Controller;\n\nclass LoginController extends Controller {\n    public function hello(){\n        echo 'hello,thinkphp!';\n    }\n}\n```\nåœ¨æµè§ˆå™¨é‡Œè®¿é—®ï¼š`http://msg:8899/index.php/Login/hello`ï¼Œä¼šæ˜¾ç¤ºï¼š`hello,thinkphp!`ã€‚\n\n---\n#### AJAXè¿”å›\n**ThinkPHP** å¯ä»¥å¾ˆå¥½çš„æ”¯æŒAJAXè¯·æ±‚ï¼Œç³»ç»Ÿçš„\\Think\\Controllerç±»æä¾›äº†ajaxReturnæ–¹æ³•ç”¨äºAJAXè°ƒç”¨åè¿”å›æ•°æ®ç»™å®¢æˆ·ç«¯ã€‚\n```php\n<?php\n\nnamespace Admin\\Controller;\nuse Think\\Controller;\n\nclass LoginController extends Controller {\n    public function login()\n    {\n      $data['status']  = 1;\n      $data['content'] = 'content';\n      $this->ajaxReturn($data);\n    }\n}\n```\n\n---\n#### è·³è½¬å’Œé‡å®šå‘\n\n**é¡µé¢è·³è½¬**\n\nåœ¨åº”ç”¨å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸€äº›å¸¦æœ‰æç¤ºä¿¡æ¯çš„è·³è½¬é¡µé¢ï¼Œä¾‹å¦‚æ“ä½œæˆåŠŸæˆ–è€…æ“ä½œé”™è¯¯é¡µé¢ï¼Œå¹¶ä¸”è‡ªåŠ¨è·³è½¬åˆ°å¦å¤–ä¸€ä¸ªç›®æ ‡é¡µé¢ã€‚ç³»ç»Ÿçš„`\\Think\\Controller`ç±»å†…ç½®äº†ä¸¤ä¸ªè·³è½¬æ–¹æ³•`success`å’Œ`error`ï¼Œç”¨äºé¡µé¢è·³è½¬æç¤ºï¼Œè€Œä¸”å¯ä»¥æ”¯æŒajaxæäº¤ã€‚\n\n```php\n    public function jump()\n    {\n      $posts = D('posts'); //å®ä¾‹åŒ–Userå¯¹è±¡\n      $data['title'] = 'cat';\n      $data['content'] = 'çŒ«ï¼Œå±äºçŒ«ç§‘åŠ¨ç‰©ï¼Œåˆ†å®¶çŒ«ã€é‡çŒ«ï¼Œæ˜¯å…¨ä¸–ç•Œå®¶åº­ä¸­è¾ƒä¸ºå¹¿æ³›çš„å® ç‰©ã€‚';\n      $result = $posts->add($data);\n      if($result){\n          //è®¾ç½®æˆåŠŸåè·³è½¬é¡µé¢çš„åœ°å€ï¼Œé»˜è®¤çš„è¿”å›é¡µé¢æ˜¯$_SERVER['HTTP_REFERER']\n          $this->success('æ–°å¢æˆåŠŸ','Login/login');\n      } else {\n          //é”™è¯¯é¡µé¢çš„é»˜è®¤è·³è½¬é¡µé¢æ˜¯è¿”å›å‰ä¸€é¡µï¼Œé€šå¸¸ä¸éœ€è¦è®¾ç½®\n          $this->error('æ–°å¢å¤±è´¥');\n      }\n    }\n```\n\n**é‡å®šå‘**\n\n`Controller`ç±»çš„`redirect`æ–¹æ³•å¯ä»¥å®ç°é¡µé¢çš„é‡å®šå‘åŠŸèƒ½ã€‚\n\n```php\n//é‡å®šå‘åˆ°Newæ¨¡å—çš„Categoryæ“ä½œ\n$this->redirect('New/category', array('cate_id' => 2), 5, 'é¡µé¢è·³è½¬ä¸­...');\n```\nä¸Šé¢çš„ç”¨æ³•æ˜¯åœç•™5ç§’åè·³è½¬åˆ°`New`æ¨¡å—çš„`category`æ“ä½œï¼Œå¹¶ä¸”æ˜¾ç¤ºé¡µé¢è·³è½¬ä¸­å­—æ ·ï¼Œé‡å®šå‘åä¼šæ”¹å˜å½“å‰çš„**URL**åœ°å€ã€‚\n\n---\n\n#### è¾“å…¥å˜é‡\n\n**è·å–å˜é‡**\n\n`I`æ–¹æ³•æ˜¯**ThinkPHP**ç”¨äºæ›´åŠ æ–¹ä¾¿å’Œå®‰å…¨çš„è·å–ç³»ç»Ÿè¾“å…¥å˜é‡ï¼Œå¯ä»¥ç”¨äºä»»ä½•åœ°æ–¹ï¼Œç”¨æ³•æ ¼å¼å¦‚ä¸‹ï¼š\n```php\nI('å˜é‡ç±»å‹.å˜é‡å/ä¿®é¥°ç¬¦',['é»˜è®¤å€¼'],['è¿‡æ»¤æ–¹æ³•'],['é¢å¤–æ•°æ®æº'])\n```\n\nå˜é‡ç±»å‹æ˜¯æŒ‡è¯·æ±‚æ–¹å¼æˆ–è€…è¾“å…¥ç±»å‹ï¼ŒåŒ…æ‹¬ï¼š\n\n|  å˜é‡ç±»å‹   |   å«ä¹‰    |\n| :-------- | :--------| \n| get    |   è·å–GETå‚æ•° | \n| post    |   è·å–POSTå‚æ•° | \n| param    |   è‡ªåŠ¨åˆ¤æ–­è¯·æ±‚ç±»å‹è·å–GETã€POSTæˆ–è€…PUTå‚æ•° | \n| request    |   è·å–REQUEST å‚æ•° | \n| put    |   è·å–PUT å‚æ•° | \n| session    |   è·å– $_SESSION å‚æ•° | \n| cookie    |   è·å– $_COOKIE å‚æ•° | \n| server    |   è·å– $_SERVER å‚æ•° | \n| globals    |   è·å– $GLOBALSå‚æ•° |\n| path    |   è·å– PATHINFOæ¨¡å¼çš„URLå‚æ•°ï¼ˆ3.2.2æ–°å¢ï¼‰ |\n| data    |   è·å– å…¶ä»–ç±»å‹çš„å‚æ•°ï¼Œéœ€è¦é…åˆé¢å¤–æ•°æ®æºå‚æ•°ï¼ˆ3.2.2æ–°å¢ï¼‰ |\n\næˆ‘ä»¬ä»¥`GET`å˜é‡ç±»å‹ä¸ºä¾‹ï¼Œè¯´æ˜ä¸‹ `I` æ–¹æ³•çš„ä½¿ç”¨ï¼š\n\n```php\npublic function variable()\n{\n    $data['title'] = I('get.title');\n    $data['content'] = I('get.content');\n    dump($data);\n    $this->display();\n}\n```\nè¾“å‡ºç»“æœï¼š\n```vim\narray(2) {\n  [\"title\"] => string(6) \"å•Šå•Š\"\n  [\"content\"] => string(6) \"å•Šå•Š\"\n}\n```\n\n---\n### è§†å›¾\n#### æ¨¡æ¿å®šä¹‰\n\næ¯ä¸ªæ¨¡å—çš„æ¨¡æ¿æ–‡ä»¶æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ºäº†å¯¹æ¨¡æ¿æ–‡ä»¶æ›´åŠ æœ‰æ•ˆçš„ç®¡ç†ï¼Œ**ThinkPHP**å¯¹æ¨¡æ¿æ–‡ä»¶è¿›è¡Œç›®å½•åˆ’åˆ†ï¼Œé»˜è®¤çš„æ¨¡æ¿æ–‡ä»¶å®šä¹‰è§„åˆ™æ˜¯ï¼š\n```php\nè§†å›¾ç›®å½•/[æ¨¡æ¿ä¸»é¢˜]/æ§åˆ¶å™¨å/æ“ä½œå+æ¨¡æ¿åç¼€\n```\né»˜è®¤çš„è§†å›¾ç›®å½•æ˜¯æ¨¡å—çš„ **View** ç›®å½•ï¼ˆæ¨¡å—å¯ä»¥æœ‰å¤šä¸ªè§†å›¾æ–‡ä»¶ç›®å½•ï¼Œè¿™å–å†³äºä½ çš„åº”ç”¨éœ€è¦ï¼‰ï¼Œæ¡†æ¶çš„é»˜è®¤è§†å›¾æ–‡ä»¶åç¼€æ˜¯`.html`ã€‚ æ–°ç‰ˆæ¨¡æ¿ä¸»é¢˜é»˜è®¤æ˜¯ç©ºï¼ˆè¡¨ç¤ºä¸å¯ç”¨æ¨¡æ¿ä¸»é¢˜åŠŸèƒ½ï¼‰ã€‚\n\nåœ¨æ¯ä¸ªæ¨¡æ¿ä¸»é¢˜ä¸‹é¢ï¼Œæ˜¯ä»¥æ¨¡å—ä¸‹é¢çš„æ§åˆ¶å™¨åä¸ºç›®å½•ï¼Œç„¶åæ˜¯æ¯ä¸ªæ§åˆ¶å™¨çš„å…·ä½“æ“ä½œæ¨¡æ¿æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š\n\nä¾‹å¦‚**Login**ä¸‹çš„**variable**ï¼Œå¯¹åº”çš„æ¨¡æ¿æ–‡ä»¶ï¼š`Admin/View/Login/variable.html`\n\n---\n#### æ¨¡æ¿èµ‹å€¼\n\nå¦‚æœè¦åœ¨æ¨¡æ¿ä¸­è¾“å‡ºå˜é‡ï¼Œå¿…é¡»åœ¨åœ¨æ§åˆ¶å™¨ä¸­æŠŠå˜é‡ä¼ é€’ç»™æ¨¡æ¿ï¼Œç³»ç»Ÿæä¾›äº†assignæ–¹æ³•å¯¹æ¨¡æ¿å˜é‡èµ‹å€¼ï¼Œæ— è®ºä½•ç§å˜é‡ç±»å‹éƒ½ç»Ÿä¸€ä½¿ç”¨assignèµ‹å€¼ã€‚\n```php\npublic function variable()\n    {\n      $data['title'] = I('get.title');\n      $data['content'] = I('get.content');\n      $this->assign($data);\n      $this->display();\n    }\n```\n`assign`æ–¹æ³•å¿…é¡»åœ¨`display`å’Œ`show`æ–¹æ³•ä¹‹å‰è°ƒç”¨ï¼Œå¹¶ä¸”ç³»ç»Ÿåªä¼šè¾“å‡ºè®¾å®šçš„å˜é‡ï¼Œå…¶å®ƒå˜é‡ä¸ä¼šè¾“å‡ºï¼ˆç³»ç»Ÿå˜é‡ä¾‹å¤–ï¼‰ï¼Œä¸€å®šç¨‹åº¦ä¸Šä¿è¯äº†å˜é‡çš„å®‰å…¨æ€§ã€‚\n\nèµ‹å€¼åï¼Œå°±å¯ä»¥åœ¨æ¨¡æ¿æ–‡ä»¶ä¸­è¾“å‡ºå˜é‡äº†ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯å†…ç½®æ¨¡æ¿çš„è¯ï¼Œå°±å¯ä»¥è¿™æ ·è¾“å‡ºï¼š `{$title}`ã€‚\n\n---\n#### æ¸²æŸ“æ¨¡æ¿\næ¸²æŸ“æ¨¡æ¿è¾“å‡ºæœ€å¸¸ç”¨çš„æ˜¯ä½¿ç”¨`display`æ–¹æ³•ï¼Œè°ƒç”¨æ ¼å¼ï¼š\n```vim\ndisplay('[æ¨¡æ¿æ–‡ä»¶]'[,'å­—ç¬¦ç¼–ç '][,'è¾“å‡ºç±»å‹'])\n```\nå¦‚æœæ²¡æœ‰æŒ‰ç…§æ¨¡æ¿å®šä¹‰è§„åˆ™æ¥å®šä¹‰æ¨¡æ¿æ–‡ä»¶ï¼ˆæˆ–è€…éœ€è¦è°ƒç”¨å…¶ä»–æ§åˆ¶å™¨ä¸‹é¢çš„æŸä¸ªæ¨¡æ¿ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ï¼š\n```php\n// æŒ‡å®šæ¨¡æ¿è¾“å‡º\n$this->display('edit'); \n```\nè¡¨ç¤ºè°ƒç”¨å½“å‰æ¨¡å—ä¸‹é¢çš„`edit`æ¨¡æ¿\n```php\n$this->display('Member:read');\n```\nè¡¨ç¤ºè°ƒç”¨`Member`æ¨¡å—ä¸‹é¢çš„`read`æ¨¡æ¿ã€‚\n\n---\n### æ¨¡å‹\n\n#### æ¨¡å‹å®šä¹‰\n> æ¨¡å‹ç±»å¹¶éå¿…é¡»å®šä¹‰ï¼Œåªæœ‰å½“å­˜åœ¨ç‹¬ç«‹çš„ä¸šåŠ¡é€»è¾‘æˆ–è€…å±æ€§çš„æ—¶å€™æ‰éœ€è¦å®šä¹‰ã€‚\n\næ¨¡å‹ç±»é€šå¸¸éœ€è¦ç»§æ‰¿ç³»ç»Ÿçš„\\Think\\Modelç±»æˆ–å…¶å­ç±»ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªHome\\Model\\UserModelç±»çš„å®šä¹‰ï¼š\n```php\n<?php\nnamespace Admin\\Model;\nuse Think\\Model;\n\nclass PostsModel extends Model{\n \n}\n```\næ¨¡å‹ç±»çš„ä½œç”¨å¤§å¤šæ•°æƒ…å†µæ˜¯æ“ä½œæ•°æ®è¡¨çš„ï¼Œå¦‚æœæŒ‰ç…§ç³»ç»Ÿçš„è§„èŒƒæ¥å‘½åæ¨¡å‹ç±»çš„è¯ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å¯ä»¥è‡ªåŠ¨å¯¹åº”æ•°æ®è¡¨ã€‚\n\n#### æ¨¡å‹å®ä¾‹åŒ–\nåœ¨ThinkPHPä¸­ï¼Œå¯ä»¥æ— éœ€è¿›è¡Œä»»ä½•æ¨¡å‹å®šä¹‰ã€‚\n\næ ¹æ®ä¸åŒçš„æ¨¡å‹å®šä¹‰ï¼Œæˆ‘ä»¬æœ‰å‡ ç§å®ä¾‹åŒ–æ¨¡å‹çš„æ–¹æ³•ï¼Œæ ¹æ®éœ€è¦é‡‡ç”¨ä¸åŒçš„æ–¹å¼ï¼š\n**ç›´æ¥å®ä¾‹åŒ–**\nå¯ä»¥å’Œå®ä¾‹åŒ–å…¶ä»–ç±»åº“ä¸€æ ·å®ä¾‹åŒ–æ¨¡å‹ç±»ï¼Œä¾‹å¦‚ï¼š\n```php\n$User = new \\Home\\Model\\UserModel();\n$Info = new \\Admin\\Model\\InfoModel();\n// å¸¦å‚æ•°å®ä¾‹åŒ–\n$New  = new \\Home\\Model\\NewModel('blog','think_',$connection);\n```\n**Dæ–¹æ³•å®ä¾‹åŒ–**\nä¸Šé¢å®ä¾‹åŒ–çš„æ—¶å€™æˆ‘ä»¬éœ€è¦ä¼ å…¥å®Œæ•´çš„ç±»åï¼Œç³»ç»Ÿæä¾›äº†ä¸€ä¸ªå¿«æ·æ–¹æ³• **D** ç”¨äºæ•°æ®æ¨¡å‹çš„å®ä¾‹åŒ–æ“ä½œã€‚\n```php\n<?php\npublic function jump()\n    {\n      $posts = D('posts'); //å®ä¾‹åŒ–postså¯¹è±¡\n    }\n```\n\n**Mæ–¹æ³•å®ä¾‹åŒ–æ¨¡å‹**\n**D** æ–¹æ³•å®ä¾‹åŒ–æ¨¡å‹ç±»çš„æ—¶å€™é€šå¸¸æ˜¯å®ä¾‹åŒ–æŸä¸ªå…·ä½“çš„æ¨¡å‹ç±»ï¼Œå¦‚æœä½ ä»…ä»…æ˜¯å¯¹æ•°æ®è¡¨è¿›è¡ŒåŸºæœ¬çš„  **CURD** æ“ä½œçš„è¯ï¼Œä½¿ç”¨ **M** æ–¹æ³•å®ä¾‹åŒ–çš„è¯ï¼Œç”±äºä¸éœ€è¦åŠ è½½å…·ä½“çš„æ¨¡å‹ç±»ï¼Œæ‰€ä»¥æ€§èƒ½ä¼šæ›´é«˜ã€‚\n\n```php\n// ä½¿ç”¨Mæ–¹æ³•å®ä¾‹åŒ–\n$User = M('User');\n// å’Œç”¨æ³• $User = new \\Think\\Model('User'); ç­‰æ•ˆ\n// æ‰§è¡Œå…¶ä»–çš„æ•°æ®æ“ä½œ\n$User->select();\n```\n#### CURDæ“ä½œ\n**ThinkPHP**æä¾›äº†çµæ´»å’Œæ–¹ä¾¿çš„æ•°æ®æ“ä½œæ–¹æ³•ï¼Œå¯¹æ•°æ®åº“æ“ä½œçš„å››ä¸ªåŸºæœ¬æ“ä½œï¼ˆCURDï¼‰ï¼šåˆ›å»ºã€æ›´æ–°ã€è¯»å–å’Œåˆ é™¤çš„å®ç°æ˜¯æœ€åŸºæœ¬çš„ï¼Œä¹Ÿæ˜¯å¿…é¡»æŒæ¡çš„ï¼Œåœ¨è¿™åŸºç¡€ä¹‹ä¸Šæ‰èƒ½ç†Ÿæ‚‰æ›´å¤šå®ç”¨çš„æ•°æ®æ“ä½œæ–¹æ³•ã€‚\n\n**CURD** æ“ä½œé€šå¸¸æ˜¯å¯ä»¥å’Œè¿è´¯æ“ä½œé…åˆå®Œæˆçš„ã€‚\n\n**åˆ›å»ºæ•°æ®å¯¹è±¡**\n\n**ThinkPHP**å¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿåœ°åˆ›å»ºæ•°æ®å¯¹è±¡ï¼Œæœ€å…¸å‹çš„åº”ç”¨å°±æ˜¯è‡ªåŠ¨æ ¹æ®è¡¨å•æ•°æ®åˆ›å»ºæ•°æ®å¯¹è±¡ï¼Œè¿™ä¸ªä¼˜åŠ¿åœ¨ä¸€ä¸ªæ•°æ®è¡¨çš„å­—æ®µéå¸¸ä¹‹å¤šçš„æƒ…å†µä¸‹å°¤å…¶æ˜æ˜¾ã€‚\n\n```php\n// å®ä¾‹åŒ–Useræ¨¡å‹\n$User = M('User');\n// æ ¹æ®è¡¨å•æäº¤çš„POSTæ•°æ®åˆ›å»ºæ•°æ®å¯¹è±¡\n$User->create();\n```\n\n**æ•°æ®å†™å…¥**\n\n**ThinkPHP**çš„æ•°æ®å†™å…¥æ“ä½œä½¿ç”¨`add`æ–¹æ³•ï¼Œä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š\n```php\n    public function jump()\n    {\n      $posts = D('posts'); //å®ä¾‹åŒ–Userå¯¹è±¡\n      $data['title'] = 'cat';\n      $data['content'] = 'çŒ«ï¼Œå±äºçŒ«ç§‘åŠ¨ç‰©ï¼Œåˆ†å®¶çŒ«ã€é‡çŒ«ï¼Œæ˜¯å…¨ä¸–ç•Œå®¶åº­ä¸­è¾ƒä¸ºå¹¿æ³›çš„å® ç‰©ã€‚';\n      $result = $posts->add($data);\n```\n\n**è¯»å–æ•°æ®**\n\nè¯»å–æ•°æ®æ˜¯æŒ‡è¯»å–æ•°æ®è¡¨ä¸­çš„ä¸€è¡Œæ•°æ®ï¼ˆæˆ–è€…å…³è”æ•°æ®ï¼‰ï¼Œä¸»è¦é€šè¿‡`find`æ–¹æ³•å®Œæˆï¼Œä¾‹å¦‚ï¼š\n```php\npublic function getPosts(){\n      $posts = D('posts'); //å®ä¾‹åŒ–postså¯¹è±¡\n\n      $posts->where('id=1')->find();\n\n      dump($posts);\n    }\n```\n`find`æ–¹æ³•æŸ¥è¯¢æ•°æ®çš„æ—¶å€™å¯ä»¥é…åˆç›¸å…³çš„è¿è´¯æ“ä½œæ–¹æ³•ï¼Œå…¶ä¸­æœ€å…³é”®çš„åˆ™æ˜¯whereæ–¹æ³•ã€‚\n\n**æ›´æ–°æ•°æ®**\n\næ›´æ–°æ•°æ®ä½¿ç”¨`save`æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š\n```php\npublic function savePosts(){\n      $posts = D('posts'); //å®ä¾‹åŒ–postså¯¹è±¡\n      $data['title'] = 'dog';\n      $data['content'] = 'ç‹—ï¼Œï¼ˆæ‹‰ä¸æ–‡:Canis lupus familiaris,è‹±æ–‡åç§°dogï¼‰ä¸­æ–‡äº¦ç§°â€œçŠ¬â€ï¼Œç‹—å±äºé£Ÿè‚‰ç›®ï¼Œåˆ†å¸ƒäºä¸–ç•Œå„åœ°ã€‚ç‹—ä¸é©¬ã€ç‰›ã€ç¾Šã€çŒªã€é¸¡å¹¶ç§°â€œå…­ç•œâ€ã€‚æœ‰ç§‘å­¦å®¶è®¤ä¸ºç‹—æ˜¯ç”±æ—©æœŸäººç±»ä»ç°ç‹¼...';\n      $posts->where('id=1')->save($data);\n    }\n```\n\n**æ•°æ®åˆ é™¤**\n\n**ThinkPHP**åˆ é™¤æ•°æ®ä½¿ç”¨`delete`æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š\n```php\npublic function deletePosts(){\n      $posts = D('posts'); //å®ä¾‹åŒ–postså¯¹è±¡\n\n      $posts->delete(4);\n    }\n```\nè¡¨ç¤ºåˆ é™¤ä¸»é”®ä¸º**4**çš„æ•°æ®\n\n#### è¿è´¯æ“ä½œ\n**ThinkPHP**æ¨¡å‹åŸºç¡€ç±»æä¾›çš„è¿è´¯æ“ä½œæ–¹æ³•ï¼ˆä¹Ÿæœ‰äº›æ¡†æ¶ç§°ä¹‹ä¸ºé“¾å¼æ“ä½œï¼‰ï¼Œå¯ä»¥æœ‰æ•ˆçš„æé«˜æ•°æ®å­˜å–çš„ä»£ç æ¸…æ™°åº¦å’Œå¼€å‘æ•ˆç‡ï¼Œå¹¶ä¸”æ”¯æŒæ‰€æœ‰çš„**CURD**æ“ä½œã€‚\n\nä½¿ç”¨ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œ å‡å¦‚æˆ‘ä»¬ç°åœ¨è¦æŸ¥è¯¢ä¸€ä¸ª**User**è¡¨çš„æ»¡è¶³çŠ¶æ€ä¸º**1**çš„å‰**10**æ¡è®°å½•ï¼Œå¹¶å¸Œæœ›æŒ‰ç…§ç”¨æˆ·çš„åˆ›å»ºæ—¶é—´æ’åº ï¼Œä»£ç å¦‚ä¸‹ï¼š\n```php\n$User->where('status=1')->order('create_time')->limit(10)->select();\n```\nè¿™é‡Œçš„`where`ã€`order`å’Œ`limit`æ–¹æ³•å°±è¢«ç§°ä¹‹ä¸ºè¿è´¯æ“ä½œæ–¹æ³•ï¼Œé™¤äº†`select`æ–¹æ³•å¿…é¡»æ”¾åˆ°æœ€åä¸€ä¸ªå¤–ï¼ˆå› ä¸ºselectæ–¹æ³•å¹¶ä¸æ˜¯è¿è´¯æ“ä½œæ–¹æ³•ï¼‰ï¼Œè¿è´¯æ“ä½œçš„æ–¹æ³•è°ƒç”¨é¡ºåºæ²¡æœ‰å…ˆåã€‚\n\n  [1]: http://php.net/manual/zh/index.php\n  [2]: http://php.net/manual/zh/index.php\n  [3]: http://wampserver.com\n  [4]: https://www.mamp.info/en/\n  [5]: http://document.thinkphp.cn/manual_3_2.html#preface\n  [6]: http://wampserver.com\n  [7]: https://www.mamp.info/en/","tags":["thinkPHP"],"categories":["PHP"]},{"title":"æµ…è°ˆJavaScriptä½œç”¨åŸŸ","url":"%2FjavascriptScope.html","content":"\n{% fi https://cdn.lishaoy.net/javascriptScope/javascriptScope01.png , javascript Scope, javascript Scope %}\n\næˆ‘ä»¬åœ¨é¢è¯•æ—¶ï¼Œæ€»ä¼šç¢°åˆ°ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„å…³äº **ä½œç”¨åŸŸ** çš„é¢è¯•é¢˜ï¼Œå…¶å®å¼„æ¸…æ¥šåŸç†ï¼Œä¸‡å˜ä¸ç¦»å…¶å®—ï¼Œå¤§éƒ¨åˆ†çš„é¢è¯•é¢˜éƒ½å¯ä»¥å¾— 'å§'ã€‚ \n\næ‰€ä»¥ï¼Œä»Šå¤©æˆ‘ä»¬æ¥è°ˆè°ˆ `JavaScript` çš„ **ä½œç”¨åŸŸ(javascript scope)** ï¼Œè¿™æ˜¯è€ç”Ÿå¸¸è°ˆçš„è¯é¢˜ï¼Œè¿™é‡Œæˆ‘ä»¬ä¼šä» **ä½œç”¨åŸŸ** å¼€å§‹ï¼Œä¼šå»¶ä¼¸åˆ° **é¢„è§£æè§„åˆ™ï¼ˆé¢„ç¼–è¯‘ï¼‰ ã€ å˜é‡æå‡ ã€å‡½æ•°æå‡ ã€è¡¨è¾¾å¼ ã€è¯­å¥ ã€IIFE ã€ åŒ¿åå‡½æ•°è¡¨è¾¾å¼ ã€ å…·åå‡½æ•°è¡¨è¾¾å¼** ç­‰ï¼Œå½»åº•ææ˜ç™½ä½œç”¨åŸŸè¿™äº›äº‹ ğŸ¤“\n\n---\n\n<!-- more -->\n\n### å˜é‡æå‡å’Œå‡½æ•°æå‡\n\nåœ¨å¼€å§‹é˜è¿°ä¹‹å‰ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€æ®µä»£ç ï¼Œçœ‹çœ‹ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ\n\n```javascript\nalert(a);\nfunction a(){ alter(2); }\nalert(a);\nvar a = 1\nalert(a);\nvar a = 3;\nalert(a);\nfunction a(){ alter(4); }\nalert(a);\na();\n```\n\nè¿™é‡Œå…ˆæ­æ™“ç­”æ¡ˆï¼š\n{% note success %} \n- ç¬¬ä¸€ä¸ª `alert(a)`  å¼¹å‡º `function a(){ alter(4); }` å‡½æ•°ä½“\n- ç¬¬äºŒä¸ª `alter(a)`  å¼¹å‡º `function a(){ alter(4); }` å‡½æ•°ä½“\n- ç¬¬ä¸‰ä¸ª `alter(a)`  å¼¹å‡º **1**\n- ç¬¬å››ä¸ª `alter(a)`  å¼¹å‡º **3**\n- ç¬¬äº”ä¸ª `alter(a)`  å¼¹å‡º **3**\n- æœ€åä¸€è¡ŒæŠ¥é”™ `a is not a function`\n{% endnote %}  \n\nä¸‹é¢æ¥åˆ†æä¸€ä¸‹è¿™æ®µä»£ç ï¼š\nå…¶å®åœ¨ `javascript` å¼€å§‹æ‰§è¡Œä»£ç ä¹‹å‰ï¼Œæœ‰ä¸€ä¸ª **é¢„è§£æï¼ˆé¢„ç¼–è¯‘ï¼‰** çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šäº§ç”Ÿ **å˜é‡æå‡** å’Œ **å‡½æ•°æå‡** ï¼Œå…¶å®æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œæ–¹ä¾¿ç†è§£ï¼š\n\n1. **é¢„è§£æ**\nè¿™ä¸ªè¿‡ç¨‹ï¼Œä¼šæŠŠ å…³é”®å­— `var` ã€ `function` ã€ **å‚æ•°** æå–å‡ºæ¥\n\nä¸Šé¢è¿™æ®µä»£ç  **é¢„è§£æ** çš„è¿‡ç¨‹æ˜¯ï¼š\n\n```javascript\n// ç¬¬1è¡Œï¼Œæ²¡æœ‰å…³é”®å­— ï¼Œ ä¸è§£æ\n// ç¬¬2è¡Œï¼Œé‡åˆ° function å…³é”®å­—ï¼Œè§£æåˆ°å…¨å±€çš„å¤´éƒ¨\na = function a(){ alter(2); }\n// ç¬¬3è¡Œï¼Œæ²¡æœ‰å…³é”®å­— ï¼Œ ä¸è§£æ\n// ç¬¬4è¡Œï¼Œé‡åˆ°å…³é”®å­— var ï¼Œ è§£æåˆ°å…¨å±€çš„å¤´éƒ¨\na = undefined\n// ç¬¬5è¡Œï¼Œæ²¡æœ‰å…³é”®å­— ï¼Œ ä¸è§£æ\n// ç¬¬6è¡Œï¼Œé‡åˆ°å…³é”®å­— var ï¼Œ è§£æåˆ°å…¨å±€çš„å¤´éƒ¨\na = undefined\n// ç¬¬8è¡Œï¼Œé‡åˆ° function å…³é”®å­—ï¼Œè§£æåˆ°å…¨å±€çš„å¤´éƒ¨\na = function a(){ alter(4); }\n// ç¬¬9è¡Œï¼Œæ²¡æœ‰å…³é”®å­— ï¼Œ ä¸è§£æ\n// ç¬¬10è¡Œï¼Œa() å‡½æ•°è°ƒç”¨\n```\n\næ­¤æ—¶è¿™é‡Œæœ‰4ä¸ªåŒåå˜é‡ a ï¼Œä¾å¾ªè§„åˆ™æ˜¯ï¼š`function` ä¼˜å…ˆä¸ `var`, åŒåçš„åé¢è¦†ç›–å‰é¢çš„\nå› æ­¤ï¼Œ`a = function a(){ alter(2); }` æ›¿æ¢æ‰ä¸‹é¢çš„2ä¸ª ~~`a = undefined`~~ ï¼Œ`a = function a(){ alter(4); }` åˆæ›¿æ¢æ‰ ~~`a = function a(){ alter(2); }`~~ ,æœ€ç»ˆåªå‰©ä¸‹ `a = function a(){ alter(4); }`\n\n**é¢„è§£æï¼ˆé¢„ç¼–è¯‘ï¼‰** åçš„ä»£ç æ ·å­æ˜¯è¿™æ ·çš„\n\n```javascript\nvar a = function a(){ alter(4); }\nalert(a);\nalert(a);\na = 1\nalert(a);\na = 3;\nalert(a);\nalert(a);\na();\n```\n\n2. æ‰§è¡Œä»£ç ï¼Œå°±æ˜¯æ‰§è¡Œçš„è¿™æ®µä»£ç ï¼Œä¾æ¬¡ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œï¼Œæœ€åçš„ `a()` å‡½æ•°è°ƒç”¨ï¼Œè¿™æ—¶çš„ `a` å·²è¢« **è¡¨è¾¾å¼** èµ‹å€¼æˆ **3** ï¼Œè€ŒæŠ¥é”™ `a is not a function`\n\n----\n\n### å…¨å±€ä½œç”¨åŸŸå’Œå±€éƒ¨ä½œç”¨åŸŸ\n\nå†çœ‹è¿™æ®µä»£ç \n\n```javascript\nvar a = 1;\nfunction fn1(){\n    alert(a);\n    var a = 2;\n}\nfn1();\nalert(a);\n```\n\nè¿™é‡Œå…ˆæ­æ™“ç­”æ¡ˆï¼š\n{% note success %}\n- ç¬¬ä¸€ä¸ª `alert(a)` å¼¹å‡º `undefined`\n- ç¬¬äºŒä¸ª `alert(a)` å¼¹å‡º **1**\n{% endnote %}\n\n`JavaScript` çš„ä½œç”¨åŸŸåªç”¨ä¸¤ç§ï¼Œä¸€ä¸ªæ˜¯å…¨å±€çš„ï¼Œä¸€ä¸ªæ˜¯å‡½æ•°çš„ï¼Œä¹Ÿç§°ä¸º **å…¨å±€ä½œç”¨åŸŸ** å’Œ **å±€éƒ¨ä½œç”¨åŸŸ** ï¼›**å±€éƒ¨ä½œç”¨åŸŸ** å¯ä»¥è®¿é—® **å…¨å±€ä½œç”¨åŸŸ** ã€‚ä½†æ˜¯ **å…¨å±€ä½œç”¨åŸŸ** ä¸èƒ½è®¿é—® **å±€éƒ¨ä½œç”¨åŸŸ** \n\nåŒæ ·ç”¨ **é¢„è§£æï¼ˆé¢„ç¼–è¯‘ï¼‰** çš„æ–¹æ³•æ¥åˆ†æè¿™æ®µä»£ç \n1. **é¢„è§£æï¼ˆé¢„ç¼–è¯‘ï¼‰** å…¨å±€ä½œç”¨åŸŸ\n\n```javascript\n// ç¬¬1è¡Œï¼Œé‡åˆ° var å…³é”®å­—ï¼Œè§£æåˆ°å…¨å±€çš„å¤´éƒ¨\na = undefined\n// ç¬¬2è¡Œï¼Œé‡åˆ° function å…³é”®å­—ï¼Œè§£æåˆ°å…¨å±€çš„å¤´éƒ¨\nfn1 = function fn1(){\n    alert(a);\n    var a = 2;\n}\n// ç¬¬3è¡Œï¼Œæ²¡æœ‰é‡åˆ°å…³é”®å­—ï¼Œä¸è§£æ\n// ç¬¬4è¡Œï¼Œæ²¡æœ‰é‡åˆ°å…³é”®å­—ï¼Œä¸è§£æ\n```\n\n2. å¼€å§‹æ‰§è¡Œä»£ç \n\nç¬¬1è¡Œï¼Œé‡åˆ°è¡¨è¾¾å¼ `a = 1`, **a** è¢«èµ‹å€¼æˆ **1** </br>\nç¬¬6è¡Œï¼Œé‡åˆ°å‡½æ•°è°ƒç”¨ `fn1()` ,å¼€å§‹ **é¢„è§£æï¼ˆé¢„ç¼–è¯‘ï¼‰** å±€éƒ¨\n\n3. **é¢„è§£æï¼ˆé¢„ç¼–è¯‘ï¼‰** å±€éƒ¨ä½œç”¨åŸŸ\n\n```javascript\n// ç¬¬3è¡Œï¼Œæ²¡æœ‰é‡åˆ°å…³é”®å­—ï¼Œä¸è§£æ\n// ç¬¬4è¡Œï¼Œé‡åˆ° var å…³é”®å­—ï¼Œè§£æåˆ°å±€éƒ¨\na = undefined\n```\n4. å¼€å§‹æ‰§è¡Œ **å±€éƒ¨** ä»£ç \n\nç¬¬3è¡Œï¼Œå¼¹å‡º `undefined` \nç¬¬4è¡Œï¼Œé‡åˆ°è¡¨è¾¾å¼ï¼ŒæŠŠå±€éƒ¨ **a** æ”¹æˆ **2**\n\n5. å±€éƒ¨æ‰§è¡Œå®Œæˆï¼Œç»§ç»­æ‰§è¡Œå…¨å±€\n\nç¬¬7è¡Œï¼Œå¼¹å‡º **1** ï¼Œå› ä¸ºå…¨å±€å’Œå±€éƒ¨æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸ\n\n----\n\n### ä½œç”¨åŸŸé“¾\n\nå¦‚æœï¼ŒæŠŠä¸Šé¢ğŸ‘†ä»£ç ï¼Œç¨ä½œä¿®æ”¹\n\n```javascript\nvar a = 1;\nfunction fn1(){\n    alert(a);\n    a = 2;\n}\nfn1();\nalert(a);\n```\n\nå»æ‰äº† `function` é‡Œçš„ `var` ï¼Œç»“æœå°±ä¼šä¸ä¸€æ ·\nè¿™æ¬¡ï¼Œè¾“å‡ºçš„æ˜¯ï¼š\n- ç¬¬ä¸€ä¸ª `alert` å¼¹å‡º **1**\n- ç¬¬äºŒä¸ª `alert` å¼¹å‡º **2**\nå› ä¸ºåœ¨è§£æå±€éƒ¨æ˜¯æ²¡æœ‰å‘ç° `var a` ï¼Œå¦‚æ˜¯åœ¨æ‰§è¡Œæ—¶ï¼Œå°±ä¼šå»å…¨å±€æŸ¥æ‰¾ï¼Œæ‰¾åˆ°äº†å…¨å±€çš„ `a = 1` ï¼Œæ‰€ä»¥ ç¬¬ä¸€ä¸ª `alert` å¼¹å‡º **1** ï¼Œè€Œä¸æ˜¯ `undefined` ,è¿™ä¸ªå°±æ˜¯ **ä½œç”¨åŸŸè¿**\n\n----\n\n### è¡¨è¾¾å¼ã€è¯­å¥ å’Œ IIFE\n\nåœ¨çœ‹ä¸‹ä»¥ä¸‹ ğŸ‘‡ çš„ä»£ç \n\n```javascript\nvar b = 10;\nconsole.log(b);\n(function b() {\n    console.log(b);\n    b = 20;\n    console.log(b);\n  }\n)();\nconsole.log(b);\nfunction b() {\n    b = 30;\n    console.log(b);\n}\n```\n\nå…ˆæ­æ™“ç­”æ¡ˆï¼š\n{% note success %}\n- ç¬¬1ä¸ª `console.log(b)` è¾“å‡ºçš„æ˜¯ **10**\n- ç¬¬2ä¸ª `console.log(b)` è¾“å‡ºå‡½æ•°ä½“ `b() {console.log(b); b = 20; console.log(b);}`\n- ç¬¬3ä¸ª `console.log(b)` è¾“å‡ºå‡½æ•°ä½“ `b() {console.log(b); b = 20; console.log(b);}`\n- ç¬¬4ä¸ª `console.log(b)` è¾“å‡ºçš„æ˜¯ **10**\n- ç¬¬5ä¸ª æ²¡æœ‰ä»»ä½•è¾“å‡º\n{% endnote %}\n\nåœ¨åˆ†æè¿™æ®µä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æŒæ¡ä¸€ç‚¹çŸ¥è¯†ï¼Œä»€ä¹ˆæ˜¯ **è¯­å¥** ï¼Œä»€ä¹ˆæ˜¯ **è¡¨è¾¾å¼** ä»¥åŠ **IIFE**\n#### è¡¨è¾¾å¼ã€è¯­å¥\n\n`JavaScript` ç¨‹åºçš„æ‰§è¡Œå•ä½ä¸ºè¡Œ `ï¼ˆlineï¼‰` ï¼Œä¹Ÿå°±æ˜¯ä¸€è¡Œä¸€è¡Œåœ°æ‰§è¡Œã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ¯ä¸€è¡Œå°±æ˜¯ä¸€ä¸ªè¯­å¥ã€‚\n\nè¯­å¥ `ï¼ˆstatementï¼‰` æ˜¯ä¸ºäº†å®ŒæˆæŸç§ä»»åŠ¡è€Œè¿›è¡Œçš„æ“ä½œï¼Œæ¯”å¦‚ä¸‹é¢å°±æ˜¯ä¸€è¡Œèµ‹å€¼è¯­å¥ã€‚\n\n```javascript\nvar a = 1 + 3;\n```\n\n`1 + 3` å«åšè¡¨è¾¾å¼ `ï¼ˆexpressionï¼‰` ï¼ŒæŒ‡ä¸€ä¸ªä¸ºäº†å¾—åˆ°è¿”å›å€¼çš„è®¡ç®—å¼ã€‚è¯­å¥å’Œè¡¨è¾¾å¼çš„åŒºåˆ«åœ¨äºï¼Œå‰è€…ä¸»è¦ä¸ºäº†è¿›è¡ŒæŸç§æ“ä½œï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦è¿”å›å€¼ï¼›åè€…åˆ™æ˜¯ä¸ºäº†å¾—åˆ°è¿”å›å€¼ï¼Œä¸€å®šä¼šè¿”å›ä¸€ä¸ªå€¼ã€‚å‡¡æ˜¯ JavaScript è¯­è¨€ä¸­é¢„æœŸä¸ºå€¼çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼ã€‚æ¯”å¦‚ï¼Œèµ‹å€¼è¯­å¥çš„ç­‰å·å³è¾¹ï¼Œé¢„æœŸæ˜¯ä¸€ä¸ªå€¼ï¼Œå› æ­¤å¯ä»¥æ”¾ç½®å„ç§è¡¨è¾¾å¼ã€‚\n\n#### ç«‹å³æ‰§è¡Œå‡½æ•° -- IIFE *ï¼ˆImmediately-Invoked Function Expressionï¼‰*\n\nåœ¨ `Javascript` ä¸­ï¼Œåœ†æ‹¬å· `()` æ˜¯ä¸€ç§è¿ç®—ç¬¦ï¼Œè·Ÿåœ¨ **å‡½æ•°å** ä¹‹åï¼Œè¡¨ç¤ºè°ƒç”¨è¯¥å‡½æ•°ã€‚ä¾‹å¦‚ï¼š `a()`\n\næœ‰æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å®šä¹‰å‡½æ•°ä¹‹åï¼Œç«‹å³è°ƒç”¨è¯¥å‡½æ•°ã€‚è¿™æ—¶ï¼Œä½ ä¸èƒ½åœ¨å‡½æ•°çš„å®šä¹‰ä¹‹ååŠ ä¸Šåœ†æ‹¬å·ï¼Œè¿™ä¼šäº§ç”Ÿè¯­æ³•é”™è¯¯ã€‚\n\n```javascript\nfunction(){ /* code */ }();\n// SyntaxError: Unexpected token (\n```\n\näº§ç”Ÿè¿™ä¸ªé”™è¯¯çš„åŸå› æ˜¯ï¼Œ`function` è¿™ä¸ªå…³é”®å­—å³å¯ä»¥å½“ä½œè¯­å¥ï¼Œä¹Ÿå¯ä»¥å½“ä½œè¡¨è¾¾å¼ã€‚\n\n```javascript\n// è¯­å¥\nfunction f() {}\n\n// è¡¨è¾¾å¼\nvar f = function f() {}\n```\n\nä¸ºäº†é¿å…è§£æä¸Šçš„æ­§ä¹‰ï¼Œ`JavaScript` å¼•æ“è§„å®šï¼Œå¦‚æœ `function` å…³é”®å­—å‡ºç°åœ¨è¡Œé¦–ï¼Œä¸€å¾‹è§£é‡Šæˆè¯­å¥ã€‚å› æ­¤ï¼Œ`JavaScript` å¼•æ“çœ‹åˆ°è¡Œé¦–æ˜¯ `function` å…³é”®å­—ä¹‹åï¼Œè®¤ä¸ºè¿™ä¸€æ®µéƒ½æ˜¯å‡½æ•°çš„å®šä¹‰ï¼Œä¸åº”è¯¥ä»¥åœ†æ‹¬å·ç»“å°¾ï¼Œæ‰€ä»¥å°±æŠ¥é”™äº†ã€‚\n\nè§£å†³æ–¹æ³•å°±æ˜¯ä¸è¦è®© `function` å‡ºç°åœ¨è¡Œé¦–ï¼Œè®©å¼•æ“å°†å…¶ç†è§£æˆä¸€ä¸ªè¡¨è¾¾å¼ã€‚æœ€ç®€å•çš„å¤„ç†ï¼Œå°±æ˜¯å°†å…¶æ”¾åœ¨ä¸€ä¸ªåœ†æ‹¬å·é‡Œé¢ã€‚\n\n```javascript\n(function(){ /* code */ }());\n// æˆ–è€…\n(function(){ /* code */ })();\n```\n\nä¸Šé¢ä¸¤ç§å†™æ³•éƒ½æ˜¯ä»¥åœ†æ‹¬å·å¼€å¤´ï¼Œå¼•æ“å°±ä¼šè®¤ä¸ºåé¢è·Ÿçš„æ˜¯ä¸€ä¸ªè¡¨ç¤ºå¼ï¼Œè€Œä¸æ˜¯å‡½æ•°å®šä¹‰è¯­å¥ï¼Œæ‰€ä»¥å°±é¿å…äº†é”™è¯¯ã€‚è¿™å°±å«åšâ€œç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼â€ *ï¼ˆImmediately-Invoked Function Expressionï¼‰* ï¼Œç®€ç§° **IIFE**ã€‚\n\näº†è§£è¿™äº›çŸ¥è¯†ä¹‹åï¼Œå†æ¥åˆ†æä¸Šé¢ ğŸ‘† æåˆ°çš„è¿™æ®µä»£ç \n\nå…ˆæ‹†å¼€æ¥åˆ†æä¸‹ä»£ç ï¼ŒæŠŠè¿™æ®µå•ç‹¬æ‹¿å‡ºæ¥ï¼Œçœ‹çœ‹ ğŸ‘€\n\n```javascript\n(function b() {\n    console.log(b);\n    b = 20;\n    console.log(b);\n  }\n)();\n```\n\nå…¶å®è¿™æ®µæ˜¯å¯ä»¥å•ç‹¬è¿è¡Œçš„ï¼Œç»“æœæ˜¯\n\n{% note success %}\n- ç¬¬1ä¸ª `console.log(b)` è¾“å‡ºå‡½æ•°ä½“ `b() {console.log(b); b = 20; console.log(b);}`\n- ç¬¬2ä¸ª `console.log(b)` è¾“å‡ºå‡½æ•°ä½“ `b() {console.log(b); b = 20; console.log(b);}`\n{% endnote %}\n\nå†æ¥åˆ†æä¸‹åŸå› ï¼Œå¾ˆæ˜æ˜¾è¿™ä¸ªå°±æ˜¯ä¸€ä¸ª **IIFE** , ç”±ä¸€ä¸ª **å‡½æ•°è¡¨è¾¾å¼** å’Œ åœ†æ‹¬å· `()` è¿ç®—ç¬¦ç»„æˆï¼Œä¸Šé¢ ğŸ‘† è¿™æ®µä»£ç å’Œä¸‹é¢ ğŸ‘‡ æ˜¯ç­‰ä»·çš„\n\n```javascript\nvar b = function b() {\n    console.log(b);\n    b = 20;\n    console.log(b);\n}();\n```\n\nå†æ¥åˆ†æï¼Œå°±æ¯”è¾ƒå®¹æ˜“ç†è§£äº†\n\n- **é¦–å…ˆå¼€å§‹è§£æ**\n\n```javascript\nb = undefined; //ç¬¬ä¸€è¡Œ é‡åˆ° var å…³é”®å­—ï¼Œå˜é‡æå‡\n```\nè§£æå®Œä¹‹åçš„æ ·å­\n\n```javascript\nvar b;\nb = function b() {\n    console.log(b);\n    b = 20;\n    console.log(b);\n};\nb();\n```\n\n- **æ‰§è¡Œä»£ç **\n\nç¬¬2è¡Œï¼Œé‡åˆ° **è¡¨è¾¾å¼è¯­å¥** å°† `b(){console.log(b); b = 20; console.log(b);}` èµ‹å€¼ç»™ `b`  \nç¬¬7è¡Œï¼Œè°ƒç”¨å‡½æ•°ï¼Œå¼€å§‹å±€éƒ¨è§£æ\n\nå±€éƒ¨è§£ææ²¡æœ‰å‘ç°å…³é”®å­— `var` å’Œ `function` ï¼Œæ²¡æœ‰ä»»ä½•åŠ¨ä½œ\n\nç»§ç»­æ‰§è¡Œ **å±€éƒ¨** ä»£ç \n\nç¬¬3è¡Œï¼Œ `console.log(b)` è¾“å‡ºå¤–éƒ¨çš„ `b = b(){console.log(b); b = 20; console.log(b);}` </br>\nç¬¬4è¡Œï¼Œ ç”±ç¬¬3è¡Œå¯çŸ¥ï¼Œæ­¤æ—¶ï¼Œ `b` æ˜¯ä¸ªå†…éƒ¨å‡½æ•°ä½“ï¼Œè€Œä¸æ˜¯å¤–éƒ¨å˜é‡ `b` ï¼Œè§£æå™¨åªä¼šæŠŠ `b = 20;` å½“æˆæ™®é€š **è¡¨è¾¾å¼** ï¼Œè€Œä¸æ˜¯ **è¡¨è¾¾å¼è¯­å¥** ï¼Œä¸ä¼šè¿›è¡Œèµ‹å€¼æ“ä½œ </br>\nç¬¬5è¡Œï¼Œ `b` çš„å€¼æ²¡æœ‰ä»»ä½•æ”¹å˜ï¼Œä¾ç„¶è¾“å‡ºå‡½æ•°ä½“ `b = b(){console.log(b); b = 20; console.log(b);}` </br>\n\næœ€ç»ˆï¼Œå›åˆ°æœ€å¼€å§‹ä»£ç æœ¬èº«\n\n```javascript\nvar b = 10;\nconsole.log(b);\n(function b() {\n    console.log(b);\n    b = 20;\n    console.log(b);\n  }\n)();\nconsole.log(b);\nfunction b() {\n    b = 30;\n    console.log(b);\n}\n```\n**é¢„è§£æï¼š**\n\n```javascript\nb = undefined; //å˜é‡æå‡\nb = function b() { //å‡½æ•°æå‡\n    b = 30;\n    console.log(b);\n}\n```\n\néµå¾ªï¼Œå‡½æ•° `ä¸€ç­‰å…¬æ°‘` åŸåˆ™ï¼Œå‡½æ•°ä¼˜å…ˆçº§é«˜äºå˜é‡ï¼Œ ~~`b = undefined;`~~ è¢«å¹²æ‰\n\né¢„è§£æä¹‹åï¼Œåº”è¯¥æ˜¯è¿™ä¸ªæ ·å­\n\n```javascript\nvar b = function b() {\n    b = 30;\n    console.log(b);\n}\nb = 10;\nconsole.log(b);\n(function b() {\n    console.log(b);\n    b = 20;\n    console.log(b);\n})();\nconsole.log(b);\n```\nå†æ¥çœ‹ä¸‹ç­”æ¡ˆï¼Œå°±å¾ˆæ¸…æ¥šäº†\n\n{% note success %}\n- ç¬¬1ä¸ª `console.log(b)` è¾“å‡ºçš„æ˜¯ **10**\n- ç¬¬2ä¸ª `console.log(b)` è¾“å‡ºå‡½æ•°ä½“ `b() {console.log(b); b = 20; console.log(b);}`\n- ç¬¬3ä¸ª `console.log(b)` è¾“å‡ºå‡½æ•°ä½“ `b() {console.log(b); b = 20; console.log(b);}`\n- ç¬¬4ä¸ª `console.log(b)` è¾“å‡ºçš„æ˜¯ **10**\n- ç¬¬5ä¸ª æ²¡æœ‰ä»»ä½•è¾“å‡ºï¼Œç”±äºå‡½æ•°æå‡ï¼Œæœ€ç»ˆ è¢« `b = 10` è¦†ç›–\n{% endnote %}\n\nè¿™é‡Œï¼Œå¯ä»¥æŠŠä¸Šé¢ ğŸ‘† ä»£ç ç¨ä½œæ”¹åŠ¨ï¼Œç»“æœä¼šä¸ä¸€æ ·ï¼Œå¦‚ï¼š\n\n```javascript\nvar b = 10;\nconsole.log(b);\n(function b() {\n    console.log(b);\n    var b = 20;  // ++++ åŠ äº† var\n    console.log(b);\n  }\n)();\nconsole.log(b);\nfunction b() {\n    b = 30;\n    console.log(b);\n}\n```\n\nè¿™é‡Œå°±ä¸æ­æ™“ç­”æ¡ˆäº†ï¼Œæ„Ÿå…´è¶£çš„ï¼Œå¯è‡ªè¡Œæ€è€ƒ ğŸ¤” ï¼Œçœ‹çœ‹ ğŸ‘€ æœ€ç»ˆç­”æ¡ˆå¦‚ä½•ã€‚ã€‚ã€‚\n\n----\n### åŒ¿åå‡½æ•°è¡¨è¾¾å¼ã€å…·åå‡½æ•°è¡¨è¾¾å¼\n\nåœ¨æ¥çœ‹çœ‹è¿™æ®µä»£ç ğŸ‘‡\n\n```javascript\nvar a = 3;\nfunction fn() {\n    foo();\n    function foo() {\n        console.log(1);\n    }\n    foo();\n    var foo = function() {\n        console.log(2);\n    };\n    foo();\n    var bar = function foo() {\n        if(a > 3) return;\n        console.log(++a);\n        foo();\n    };\n    foo();\n    bar();\n}\nfn();\n```\nå…ˆæ­æ™“ç­”æ¡ˆï¼š\n{% note success %}\n- ç¬¬1ä¸ª `foo()` è¾“å‡ºçš„æ˜¯ **1**\n- ç¬¬2ä¸ª `foo()` è¾“å‡ºçš„æ˜¯ **1**\n- ç¬¬3ä¸ª `foo()` è¾“å‡ºçš„æ˜¯ **2**\n- ç¬¬4ä¸ª `foo()` è¾“å‡ºçš„æ˜¯ **2**\n- æœ€åçš„ `bar()` è¾“å‡ºçš„æ˜¯ **4**\n{% endnote %}\n\nä»¥ä¸Šä»£ç åŒ…å«äº† **å‡½æ•°å£°æ˜** ã€ **åŒ¿åå‡½æ•°è¡¨è¾¾å¼** ã€ **å…·åå‡½æ•°è¡¨è¾¾å¼** ï¼Œ**åŒ¿åå‡½æ•°è¡¨è¾¾å¼** ã€ **å…·åå‡½æ•°è¡¨è¾¾å¼** æ˜¯æŠŠå‡½æ•°ä½“èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œå› æ­¤æ‹¥æœ‰å’Œå˜é‡ç›¸åŒçš„ç‰¹æ€§ **å˜é‡æå‡** ï¼Œè€Œ **å…·åå‡½æ•°è¡¨è¾¾å¼** çš„å‡½æ•°ååªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ã€‚\n\näº†è§£äº†è¿™äº›ï¼Œå†æ¥åˆ†ææ®µä»£ç \n\n- **å…¨å±€é¢„è§£æ**\n\n```javascript\na = undefined\nfn = function fn(){\n    ...\n}\n```\n- **æ‰§è¡Œä»£ç **\nç¬¬1è¡Œï¼Œé‡åˆ°è¡¨è¾¾å¼,æŠŠ **a** çš„å€¼æ”¹å˜æˆ3 </br>\næœ€åè¡Œï¼Œé‡åˆ°å‡½æ•°è°ƒç”¨ï¼Œé‡æ–° **é¢„è§£æ** å±€éƒ¨\n\n- **å±€éƒ¨é¢„è§£æ**\n\n```javascript\n// ç¬¬4è¡Œï¼Œé‡åˆ° function å…³é”®å­—ï¼Œè§£æåˆ°å±€éƒ¨çš„å¤´éƒ¨\nfoo = function(){\n    console.log(1);\n}\n// ç¬¬8è¡Œï¼Œé‡åˆ° var å…³é”®å­—ï¼Œè§£æåˆ°å±€éƒ¨çš„å¤´éƒ¨\nfoo = undefined\n// ç¬¬12è¡Œï¼Œé‡åˆ° var å…³é”®å­—ï¼Œè§£æåˆ°å±€éƒ¨çš„å¤´éƒ¨\nbar = undefined\n```\n\nç”±äºæœ‰ä¸¤ä¸ªåŒåå˜é‡ `foo` ï¼Œéµå¾ª `function` ä¼˜å…ˆ `var` å› æ­¤ï¼Œ ~~`foo = undefined`~~ è¢«å¹²æ‰\n\n**å±€éƒ¨é¢„è§£æ** å®Œä¹‹åçš„ä»£ç åº”è¯¥æ˜¯è¿™ä¸ªæ ·å­ğŸ‘‡\n\n```javascript\nvar a = 3\nfunction fn() {\n    var foo = function foo() {\n        console.log(1);\n    }\n    var bar;\n    foo();\n    foo();\n    foo = function foo() {\n        console.log(2);\n    };\n    foo();\n    bar = function foo() {\n        if(a > 3) return;\n        console.log(++a);\n        foo();\n    };\n    foo();\n    bar();\n}\nfn();\n```\n\n- **æ‰§è¡Œå±€éƒ¨ä»£ç ** </br>\nç¬¬1ä¸ª `foo()` è¾“å‡ºçš„æ˜¯ **1** </br>\nç¬¬2ä¸ª `foo()` è¾“å‡ºçš„æ˜¯ **1** </br>\nç¬¬3ä¸ª `foo()` è¾“å‡ºçš„æ˜¯ **2** </br>\nç¬¬4ä¸ª `foo()` è¾“å‡ºçš„æ˜¯ **2** ï¼Œæ³¨æ„è¿™ä¸ª `foo()` è¾“å‡ºçš„æ˜¯ä¸Šé¢ `foo = function foo() {console.log(2);}` çš„å†…å®¹ï¼Œå› ä¸º **å…·åå‡½æ•°è¡¨è¾¾å¼** çš„å‡½æ•°ååªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œåœ¨å¤–éƒ¨æ— æ³•è®¿é—®ã€‚</br>\næœ€åçš„ `bar()` è¾“å‡ºçš„æ˜¯ **4** ï¼Œè¿™é‡Œæ‰æ˜¯è¾“å‡º `function foo() {if(a > 3) return;console.log(++a);foo();}` é‡Œçš„å†…å®¹ï¼Œè€Œä¸”ï¼Œè¿™ä¸ªå‡½æ•°ä½“å†…ä¹Ÿæœ‰è‡ªèº«çš„è°ƒç”¨ï¼Œç»“æœ `a` å˜é‡ **+1** ï¼Œè¯´æ˜å¯ä»¥è°ƒç”¨ï¼Œå…¶å®ï¼Œå¯ä»¥ç”¨ `bar.name` è¾“å‡ºçš„å°±æ˜¯ `foo`\n\n**æ‰€ä»¥ï¼Œæ³¨æ„ï¼š**\n\n{% note danger %}\n- `bar = function foo()` , ä¸è¦ç”¨è¿™ç§å†™æ³• ï¼Œä¼˜é›…çš„å†™æ³•æ˜¯ **å˜é‡å** å’Œ **å‡½æ•°å** ä¿æŒä¸€è‡´ `foo = function foo()`\n- ä¸æ¨èä½¿ç”¨ **åŒ¿åå‡½æ•°è¡¨è¾¾å¼** ï¼Œæœ‰ä»¥ä¸‹ ğŸ‘‡ å‡ ä¸ªç¼ºç‚¹\n    * åœ¨è¿½è¸ªæ ˆä¸­æ²¡å‡½æ•°åï¼Œè°ƒè¯•å›°éš¾\n    * å¦‚æœéœ€è¦å¼•ç”¨è‡ªèº«ï¼Œåªèƒ½ç”¨éæ ‡å‡†çš„ `arguments.callee`ï¼ˆES5ä¸¥æ ¼æ¨¡å¼ç¦ç”¨ï¼‰\n{% endnote %}","tags":["å˜é‡æå‡"],"categories":["JS"]},{"title":"å¦‚ä½•ç”¨ CSS + HTML + JS åˆ›å»ºæ¡Œé¢åº”ç”¨","url":"%2FnwjsElectronjs.html","content":"\næœ€è¿‘ç ”ç©¶äº†ä¸€ä¸‹åŸºäº `Chromium` å®šåˆ¶æµè§ˆå™¨çš„æ–¹æ¡ˆï¼ŒæŸ¥é˜…äº†å¤§é‡èµ„æ–™ï¼Œå…·ä½“æ–¹æ¡ˆä¹Ÿæœ‰äº†å¤§æ¦‚çš„è“å›¾ ğŸ˜‰ \n\n----\n\n<!-- more -->\n\nåœ¨é˜è¿°æ–¹æ¡ˆä¹‹å‰ï¼Œå…ˆè¦äº†è§£å‡ ä¸ªåè¯ï¼š\n\n### ç®€ä»‹\n\n#### Chromium\n\n>Chromiumæ˜¯ä¸€ä¸ªç”±Googleä¸»å¯¼å¼€å‘çš„ç½‘é¡µæµè§ˆå™¨ï¼Œä»¥BSDè®¸å¯è¯ç­‰å¤šé‡è‡ªç”±ç‰ˆæƒå‘è¡Œå¹¶å¼€æ”¾æºä»£ç ã€‚Chromiumçš„å¼€å‘å¯èƒ½æ—©è‡ª2006å¹´å³å¼€å§‹ã€‚\n\n>Chromiumæ˜¯Googleä¸ºå‘å±•è‡ªå®¶çš„æµè§ˆå™¨Google Chromeè€Œæ‰“å¼€çš„é¡¹ç›®ï¼Œæ‰€ä»¥Chromiumç›¸å½“äºGoogle Chromeçš„å·¥ç¨‹ç‰ˆæˆ–å®éªŒç‰ˆï¼ˆå°½ç®¡Google Chromeæœ¬èº«ä¹Ÿæœ‰Î²ç‰ˆï¼‰ï¼Œæ–°åŠŸèƒ½ä¼šç‡å…ˆåœ¨Chromiumä¸Šå¼€æ”¾ï¼Œå¾…éªŒè¯åæ‰ä¼šåº”ç”¨åœ¨Google Chromeä¸Šï¼Œæ•…Google Chromeçš„åŠŸèƒ½ä¼šç›¸å¯¹è½åä½†è¾ƒç¨³å®šã€‚ â€”â€” [ç»´åŸºç™¾ç§‘](https://zh.wikipedia.org/wiki/Chromium#cite_note-3)\n\n#### CEF\n\n>Chromium Embedded Framework (CEF)æ˜¯ä¸ªåŸºäºGoogle Chromiumé¡¹ç›®çš„å¼€æºWeb browseræ§ä»¶ï¼Œæ”¯æŒWindows, Linux, Macå¹³å°ã€‚é™¤äº†æä¾›C/C++æ¥å£å¤–ï¼Œä¹Ÿæœ‰å…¶ä»–è¯­è¨€çš„ç§»æ¤ç‰ˆã€‚\n\n>å› ä¸ºåŸºäºChromiumï¼Œæ‰€ä»¥CEFæ”¯æŒWebkit & Chromeä¸­å®ç°çš„HTML5çš„ç‰¹æ€§ï¼Œå¹¶ä¸”åœ¨æ€§èƒ½ä¸Šé¢ï¼Œä¹Ÿæ¯”è¾ƒæ¥è¿‘Chromeã€‚\nCEFè¿˜æä¾›çš„å¦‚ä¸‹ç‰¹æ€§ï¼šè‡ªå®šä¹‰æ’ä»¶ã€è‡ªå®šä¹‰åè®®ã€è‡ªå®šä¹‰JavaScriptå¯¹è±¡å’Œæ‰©å±•ï¼›å¯æ§åˆ¶çš„resource loading, navigation, context menusç­‰ç­‰  â€”â€” [ç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/CEF/20837917?fr=aladdin)\n\n#### NW\n\n>NW.js æ˜¯åŸºäº Chromium å’Œ Node.js è¿è¡Œçš„ï¼Œ ä»¥å‰ä¹Ÿå«nodeWebkitã€‚è¿™å°±ç»™äº†ä½ ä½¿ç”¨HTMLå’ŒJavaScriptæ¥åˆ¶ä½œæ¡Œé¢åº”ç”¨çš„å¯èƒ½ã€‚åœ¨åº”ç”¨é‡Œä½ å¯ä»¥ç›´æ¥è°ƒç”¨Node.jsçš„å„ç§apiä»¥åŠç°æœ‰çš„ç¬¬ä¸‰æ–¹åŒ…ã€‚å› ä¸ºChromiumå’Œ Node.js çš„è·¨å¹³å°ï¼Œé‚£ä¹ˆä½ çš„åº”ç”¨ä¹Ÿæ˜¯å¯ä»¥è·¨å¹³å°çš„ã€‚â€”â€” [SegmentFault][1]\n\n#### Electron\n\n>Electronï¼ˆæœ€åˆåä¸ºAtom Shellï¼‰æ˜¯GitHubå¼€å‘çš„ä¸€ä¸ªå¼€æºæ¡†æ¶ã€‚å®ƒå…è®¸ä½¿ç”¨Node.jsï¼ˆä½œä¸ºåç«¯ï¼‰å’ŒChromiumï¼ˆä½œä¸ºå‰ç«¯ï¼‰å®Œæˆæ¡Œé¢GUIåº”ç”¨ç¨‹åºçš„å¼€å‘ã€‚Electronç°å·²è¢«å¤šä¸ªå¼€æºWebåº”ç”¨ç¨‹åºç”¨äºå‰ç«¯ä¸åç«¯çš„å¼€å‘ï¼Œè‘—åé¡¹ç›®åŒ…æ‹¬GitHubçš„Atomå’Œå¾®è½¯çš„Visual Studio Codeã€‚â€”â€” [ç»´åŸºç™¾ç§‘][2]\n\næ‰€ä»¥ ï¼Œ**CEF**ã€**nw**ã€**Electron** éƒ½æ˜¯åŸºäº `Chromium` çš„å¼€æºæ¡†æ¶ï¼Œå¯ä»¥å®ç°æ‰€éœ€çš„å®šåˆ¶æµè§ˆå™¨éœ€æ±‚ï¼Œå‡†ç¡®çš„è®²åº”è¯¥æ˜¯ç”¨ `HTML5` ã€ `CSS3` ã€ `JavaScript` æ¥åˆ¶ä½œæ‹¥æœ‰æ¼‚äº®ç•Œé¢çš„**æ¡Œé¢åº”ç”¨**ã€‚\n\nå°±æ˜¯ä¸€ä¸ªæœ¬åœ°å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä½¿ç”¨ä¸€ä¸ªå†…ç½®çš„æµè§ˆå™¨å†…æ ¸æ¸²æŸ“å‰ç«¯ç•Œé¢ï¼Œå¦ä¸€æ–¹é¢è¿˜å¯ä»¥è°ƒç”¨æœ¬åœ°ç³»ç»Ÿçº§APIï¼Œå®ç°æœ¬åœ°åº”ç”¨ç¨‹åºçš„å„ç§åŠŸèƒ½ã€‚\n\n------\n\n### å¸‚åœºè°ƒç ”\n\né€šè¿‡æŸ¥é˜…å¤§é‡èµ„æ–™å¾—çŸ¥ï¼Œä»¥å„ä¼ä¸šçš„çº¿ä¸Šäº§å“åŠä½¿ç”¨çš„æŠ€æœ¯ä¾›å‚è€ƒã€‚\n\n#### CEF æ¡ˆä¾‹\n\næ® **CEF** å®˜æ–¹ä»‹ç»ï¼Œä»¥ä¸‹ï¼ˆå¦‚å›¾ï¼‰æ¡Œé¢åº”ç”¨åœ¨ä½¿ç”¨ `CEF`ã€‚\n\n<img src=\"https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/CEF.png?raw=true\" alt=\"CEF\" width=\"85%\" title=\"who is using CEF\" align=\"center\" />\n\nå›½å†…æ¡Œé¢åº”ç”¨æœ‰ï¼š[æœ‰é“äº‘ç¬”è®°][3] <i style=\"color:#aaa\">ï¼ˆç½‘æ˜“ï¼‰</i>ã€[é’‰é’‰][4]<i style=\"color:#aaa\">ï¼ˆé˜¿é‡Œå·´å·´ï¼‰</i>ã€[QQ][5]<i style=\"color:#aaa\">ï¼ˆè…¾è®¯ï¼‰</i> ç­‰ï¼ŒæŸ¥çœ‹å®‰è£…åç›®å½•åŠæ–‡ä»¶ï¼Œå¯ä»¥çœ‹å‡º **æœ‰é“äº‘ç¬”è®°**ã€**é’‰é’‰** æ˜¯ä½¿ç”¨çš„æ˜¯`CEF`ï¼Œè€Œ **é’‰é’‰** ç•Œé¢æ˜¯ä½¿ç”¨ `AngularJs`ï¼Œæ®äº†è§£åç«¯åº”è¯¥ç”¨äº†`C++`å’Œ`Python`ã€‚\n\n**QQ** å¾ˆæ—©ä¹‹å‰å°±é€šè¿‡å†…åµŒ **IE** æ¥å®ç°ä¸€äº›åŠŸèƒ½å’Œç•Œé¢ã€‚ä»2013å¹´å¼€å§‹ï¼Œ**QQ** å¼•å…¥äº† `CEF`ï¼Œå¯¹ä¸€äº›ä¹‹å‰ç”¨ **IE** çš„åœ°æ–¹è¿›è¡Œäº†æ›¿æ¢ã€‚\n\n![no-shadow](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520329975606.png?raw=true \"é’‰é’‰Macç‰ˆç›®å½•\")\n\n![no-shadow](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520330256871.png?raw=true \"é’‰é’‰Macç‰ˆåº”ç”¨ç•Œé¢\")\n\n#### NW æ¡ˆä¾‹\n\nè¿™ä¸ªæ˜¯ **[NW](https://nwjs.io)** å®˜æ–¹ç»™å‡ºçš„ä½¿ç”¨ `nw.js` çš„åº”ç”¨åˆ—è¡¨ï¼š[https://github.com/nwjs/nw.js/wiki/List-of-apps-and-companies-using-nw.js][6] \n\nè€Œå›½å†…çš„æœ‰ï¼Œæ¯”å¦‚å¾®ä¿¡å¼€å‘å·¥å…·ç­‰ï¼Œæ˜¯åŸºäº `nw.js` å¼€å‘çš„ã€‚\n\n![no-shadow](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520571438918.png?raw=true \"å¾®ä¿¡å¼€å‘å·¥å…·Macç‰ˆç›®å½•\")\n\n![no-shadow](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520571517344.png?raw=true \"å¾®ä¿¡å¼€å‘å·¥å…·Macç‰ˆ\")\n\n#### Electron æ¡ˆä¾‹\n\nè¿™ä¸ªæ˜¯ **[Electron](https://electronjs.org)** å®˜æ–¹ç»™å‡ºçš„æ˜¯ç”¨ `electron` çš„åº”ç”¨åˆ—è¡¨ï¼š[https://electronjs.org/apps](https://electronjs.org/apps)\n\nå¦‚å›¾ï¼Œ**Electron** å·²è¢«åƒ **å¾®è½¯**ã€ **Facebook**ã€ **Slack** å’Œ **Docker** è¿™æ ·çš„å…¬å¸ç”¨äºåˆ›å»ºåº”ç”¨ç¨‹åºã€‚\n\n<img src=\"https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520668439676.png?raw=true\" alt=\"electron\" width=\"85%\" title=\"electron åº”ç”¨\" align=\"center\" />\n\næˆ‘æ‰€ç”¨çš„ç¼–è¾‘å™¨ **Visual Studio Code** å°±æ˜¯åŸºäº `electron` å¼€å‘çš„\n\n![no-shadow](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520669844227.png?raw=true \"VS Code Macç‰ˆ\")\n \n ----\n\n### å®æˆ˜\n\nä¸‹é¢ä¼šåˆ†åˆ«ç”¨ `nw.js` å’Œ `electron` åšä¸€ä¸ªç®€å•çš„ **Dome**ã€‚\n\nç”±äº **CEF** æ–‡æ¡£èµ„æ–™å°‘ä¸”åŸç”Ÿæ˜¯ `C\\C++` ï¼Œè™½ç„¶å®˜æ–¹ç»™å‡ºäº† `java` ç‰ˆçš„ **JCEF** ï¼Œå¼€å‘èµ·æ¥æ•ˆç‡è¾ƒä½ï¼Œæ•…æ­¤ä¸çŸ¥æ¼”ç¤ºã€‚\n\nè¿™ä¸ªæ˜¯ **[CEF][7]** å®˜ç½‘ï¼Œåœ¨ *External Projects* ç« èŠ‚åˆ—å‡ºæ”¯æŒè¯­è¨€ï¼š\n\n> - Net (CEF3) - https://github.com/cefsharp/CefSharp\n> - Net (CEF1) - https://bitbucket.org/fddima/cefglue\n> - Net/Mono (CEF3) - https://bitbucket.org/xilium/xilium.cefglue\n> - Net (CEF3) - https://bitbucket.org/chromiumfx/chromiumfx\n> - Delphi (CEF1) - http://code.google.com/p/delphichromiumembedded/\n> - Delphi (CEF3) - https://github.com/hgourvest/dcef3\n> - Delphi (CEF3) - https://github.com/salvadordf/CEF4Delphi\n> - Go - https://github.com/CzarekTomczak/cef2go\n> - Java - https://bitbucket.org/chromiumembedded/java-cef\n> - Java - http://code.google.com/p/javacef/\n> - Python - http://code.google.com/p/cefpython/\n\n#### NW => Hello, world!\n\nä»ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ç¼–å†™ä¸€ä¸ª **NW** åº”ç”¨ã€‚\n\n- **ç¬¬ä¸€æ­¥** åˆ›å»º `package.json` é…ç½®æ–‡ä»¶\n\n```vim\n{\n    \"name\": \"helloworld\",\n    \"main\": \"index.html\",\n    \"icon\": \"img/app.png\",\n    \"window\": {\n        \"icon\": \"img/app.png\"\n    }\n}\n```\n`main` é…ç½®åº”ç”¨æ‰“å¼€é¦–é¡µï¼Œ`name` é…ç½®åº”ç”¨çš„åç§°ã€‚\n\n- **ç¬¬äºŒæ­¥** åˆ›å»º `index.html` \n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n    <title>Holle NW</title>\n</head>\n<style>\n    html,\n    body {\n        height: 100%;\n        margin: 0;\n    }\n\n    .box {\n        height: 100%;\n        display: flex; /* css3 å¼¹æ€§ç›’å­ */\n        justify-content: center;\n        align-items: center;\n    }\n</style>\n\n<body>\n    <div class=\"box\">\n        <h1>Holle NW!</h1>\n    </div>\n</body>\n\n</html>\n```\nè¿™æ˜¯ä¸€ä¸ªç®€å•çš„ **HTML** æ–‡ä»¶ï¼ŒåŠ å…¥äº†ä¸€ç‚¹CSSï¼Œç›®çš„æ˜¯è®© **Holle NW!** æ°´å¹³å‚ç›´å±…ä¸­ã€‚\n\n- **ç¬¬ä¸‰æ­¥** æ‰“åŒ…åº”ç”¨\n\nè¿™é‡Œæˆ‘åªæµ‹è¯•äº† **Mac** å’Œ **Windows** çš„æ‰“åŒ…ï¼Œ**Linux** æ²¡æœ‰æµ‹è¯•ã€‚\n\n**Macæ‰“åŒ…åº”ç”¨ï¼š** åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒæŠŠæ‰€æœ‰æ–‡ä»¶å‹ç¼©æˆ `app.nw` æ–‡ä»¶ã€‚\n\n```vim\nzip -r app.nw *\n```\n\nç„¶åæŠŠ`app.nw` æ–‡ä»¶æ”¾åˆ° `nwjs.app/Contents/Resources/` ç›®å½•ä¸‹å³å¯ï¼Œæ•ˆæœå¦‚å›¾ï¼š\n\n![no-shadow](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520711078780.png?raw=true \"Macä¸‹è¿è¡Œæ•ˆæœ\")\n\n**Windowsæ‰“åŒ…åº”ç”¨ï¼š**  å°†åº”ç”¨çš„æ‰€æœ‰ç›¸å…³æ–‡ä»¶æ‰“æˆä¸€ä¸ªåä¸º`package.nw` çš„å‹ç¼©åŒ…ï¼Œå°†`package.nw` ä¸**NW**å¯æ‰§è¡Œæ–‡ä»¶æ”¾åˆ°ç›¸åŒç›®å½•å³å¯ï¼Œæ•ˆæœå¦‚å›¾ï¼š\n\n![no-shadow](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520711343860.png?raw=true \"Windonsä¸‹è¿è¡Œæ•ˆæœ \")\n\n-----\n\n#### Electron => Hello, world!\n\n**Electron** å¯ä»¥è®©ä½ ä½¿ç”¨çº¯ `JavaScript` è°ƒç”¨ä¸°å¯Œçš„åŸç”Ÿ(æ“ä½œç³»ç»Ÿ) **APIs** æ¥åˆ›é€ æ¡Œé¢åº”ç”¨ã€‚\n\nåªéœ€3ä¸ªæ–‡ä»¶å°±å¯ä»¥æ„å»ºä¸€ä¸ªç®€å•çš„åº”ç”¨\n\n```zsh\nyour-app/\n  â”œâ”€â”€ package.json\n  â”œâ”€â”€ main.js\n  â””â”€â”€ index.html\n```\n\n- **ç¬¬ä¸€æ­¥** åˆ›å»ºé…ç½®æ–‡ä»¶\n\né¦–å…ˆéœ€è¦å®‰è£… **Node** ç¯å¢ƒï¼Œç”¨ `npm` æ¥åˆ›å»ºä¸€ä¸ªåº”ç”¨çš„é…ç½®æ–‡ä»¶ `package.json`\n\n```vim\nnpm init\n```\n\nåœ¨ `package.json` é‡Œæ–°å¢å¯åŠ¨å‘½ä»¤ `start` \n\n```vim\n{\n    \"name\": \"your-app\",\n    \"version\": \"0.1.0\",\n    \"main\": \"main.js\",\n    \"scripts\": {\n      \"start\": \"electron .\"\n    }\n  }\n```\n\n- **ç¬¬äºŒæ­¥** åˆ›å»ºå…¥å£æ–‡ä»¶ `main.js`\n\n```javascript\nconst {app, BrowserWindow} = require('electron');\nconst path = require('path')\nconst url = require('url')\n\nfunction createWindow() {\n    win = new BrowserWindow({\n        width: 1008,\n        height: 759\n    })\n      \n    win.loadURL(url.format({\n        pathname: path.join(__dirname, 'index.html'),\n        protocol: 'file:',\n        slashes: true\n    }))\n}\n\napp.on('ready', createWindow)\n```\n\nä»£ç å·²ç»å¾ˆæ¸…æ™°ç›´è§‚ï¼Œ`createWindow` åˆ›å»ºä¸€ä¸ªæ¡Œé¢çª—å£ï¼Œè€Œå¤§å°ç”± `width`ã€`height` æ§åˆ¶ï¼Œ`win.loadURL` ç”¨æ¥åŠ è½½é¡µé¢ã€‚\n\n- **ç¬¬ä¸‰æ­¥** åˆ›å»ºå±•ç¤ºæ–‡ä»¶ `index.html`\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n    <title>Hello Electron</title>\n</head>\n<style>\n    html,\n    body {\n        height: 100%;\n        margin: 0;\n    }\n\n    .box {\n        height: 100%;\n        display: flex;\n        /* css3 å¼¹æ€§ç›’å­ */\n        justify-content: center;\n        align-items: center;\n    }\n</style>\n\n<body>\n    <div class=\"box\">\n        <h1>Hello Electron!</h1>\n    </div>\n</body>\n\n</html>\n```\nè¿™æ˜¯ä¸€ä¸ªç®€å•çš„ **HTML** æ–‡ä»¶ï¼ŒåŠ å…¥äº†ä¸€ç‚¹CSSï¼Œç›®çš„æ˜¯è®© **Holle NW!** æ°´å¹³å‚ç›´å±…ä¸­ã€‚\n\n- **ç¬¬å››æ­¥** æ‰“åŒ…åº”ç”¨\n\n**æ‰“åŒ…åº”ç”¨ï¼š** æ‰“åŒ…åº”ç”¨å¯ä»¥æ˜¯ç”¨ `electron-packager` å·¥å…·è¿›è¡Œæ‰“åŒ…ï¼Œéœ€è¦åœ¨ `package.json` é…ç½®ä»¥ä¸‹å‘½ä»¤\n\n```json\n\"scripts\": {\n    \"start\": \"electron .\",\n    \"packager\": \"electron-packager ./ HelloElectron --all --out ./OutApp --version 0.0.1 --overwrite --ignore=node_modules --icon=./app/img/app.ico\"\n  },\n```\n\nç„¶åï¼Œè¿è¡Œåœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ `npm run packagerMac` å³å¯æ‰“åŒ…`linux`ã€`Mac`ã€`windows` ä¸‰å¤§å¹³å°åº”ç”¨åŒ…ï¼Œæ•ˆæœå¦‚å›¾ï¼š\n\n<img src=\"https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520791859473.png?raw=true\" alt=\"æ‰“åŒ…åçš„åº”ç”¨\" width=\"60%\" title=\"æ‰“åŒ…åçš„åº”ç”¨\" align=\"center\" />\n\n![no-shadow](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520790145115.png?raw=true \"Macä¸‹è¿è¡Œæ•ˆæœ\")\n\n![no-shadow](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520792416456.png?raw=true \"Windowsä¸‹è¿è¡Œæ•ˆæœ\")\n\n----\n\n### GitHubå…³æ³¨åº¦å’Œæ´»è·ƒåº¦\n\né¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸‹ **GitHub** çš„ä»¥ä¸‹ä¸‰ä¸ªçŠ¶æ€çš„æ„æ€ï¼Œ\n\n![no-shadow](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520857435681.png?raw=true)\n\n![no-shadow](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520857536175.png?raw=true) ï¼šè¡¨ç¤ºä½ ä»¥åä¼šå…³æ³¨è¿™ä¸ªé¡¹ç›®çš„æ‰€æœ‰åŠ¨æ€ï¼Œè¿™ä¸ªé¡¹ç›®ä»¥ååªè¦å‘ç”Ÿå˜åŠ¨ï¼Œå¦‚è¢«åˆ«äººæäº¤äº† `pull request`ã€è¢«åˆ«äººå‘èµ·äº†`issue` ç­‰ç­‰æƒ…å†µï¼Œä½ éƒ½ä¼šåœ¨è‡ªå·±çš„ä¸ªäººé€šçŸ¥ä¸­å¿ƒï¼Œæ”¶åˆ°ä¸€æ¡é€šçŸ¥æ¶ˆæ¯ï¼Œå¦‚æœä½ è®¾ç½®äº†ä¸ªäººé‚®ç®±ï¼Œé‚£ä¹ˆä½ çš„é‚®ç®±ä¹Ÿå¯èƒ½æ”¶åˆ°ç›¸åº”çš„é‚®ä»¶ã€‚\n\n![no-shadow](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520857569746.png?raw=true)ï¼šè¡¨ç¤ºä½ å–œæ¬¢è¿™ä¸ªé¡¹ç›®æˆ–è€…é€šä¿—ç‚¹ï¼Œå¯ä»¥æŠŠä»–ç†è§£æˆæœ‹å‹åœˆçš„ç‚¹èµï¼Œè¡¨ç¤ºå¯¹è¿™ä¸ªé¡¹ç›®çš„æ”¯æŒã€‚\n\n![no-shadow](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520857709924.png?raw=true)ï¼šå½“é€‰æ‹© `fork`ï¼Œç›¸å½“äºä½ è‡ªå·±æœ‰äº†ä¸€ä»½åŸé¡¹ç›®çš„æ‹·è´ï¼Œå½“ç„¶è¿™ä¸ªæ‹·è´åªæ˜¯é’ˆå¯¹å½“æ—¶çš„é¡¹ç›®æ–‡ä»¶ï¼Œå¦‚æœåç»­åŸé¡¹ç›®æ–‡ä»¶å‘ç”Ÿæ”¹å˜ï¼Œä½ å¿…é¡»é€šè¿‡å…¶ä»–çš„æ–¹å¼å»åŒæ­¥ã€‚<i style=\"color:#aaa\">ï¼ˆä¸€èˆ¬ç”¨äºä¿®æ”¹**bug**å’Œä¼˜åŒ–é¡¹ç›®æˆ–è€…åœ¨æ­¤é¡¹ç›®ä¸Šå¼€å‘æ–°åŠŸèƒ½ç­‰ï¼‰</i>\n\n#### CEF\n\n**CEF** åœ¨ **GitHub** æ‰¾ä¸åˆ°é¡¹ç›®ï¼Œè¿™ä¸ª[å®˜ç½‘][8] æä¾›çš„æ•°æ®ï¼Œå¦‚å›¾<i style=\"color:#aaa\">ï¼ˆç”±äºåœ¨**GitHub** æ²¡æœ‰é¡¹ç›®ï¼Œç›¸å…³æ•°æ®æ— æ³•å‡†ç¡®ç»Ÿè®¡ï¼‰</i>ã€‚\n\n![CEFå…³æ³¨åº¦](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520855809138.png?raw=true \"CEFå…³æ³¨åº¦\")\n\n#### NW\n\n**NWå…³æ³¨åº¦ï¼š** ![Alt text](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520856387728.png?raw=true)\n\n**NWæ´»è·ƒåº¦ï¼š**å¦‚å›¾\n\n![2011å¹´~2018å¹´æäº¤é‡](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520858064076.png?raw=true \"2011å¹´~2018å¹´æäº¤é‡\")\n\n#### Electron\n\n**Electronå…³æ³¨åº¦ï¼š** ![no-shadow](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520858325207.png?raw=true)\n\n**æ´»è·ƒåº¦ï¼š** å¦‚å›¾\n\n![electron2013å¹´~2018å¹´æäº¤é‡](https://github.com/persilee/nwjs_electronjs/blob/master/desktop_application/1520858451333.png?raw=true \"electron2013å¹´~2018å¹´æäº¤é‡\")\n\n----\n\né€šè¿‡ä»¥ä¸Šçš„ **å¸‚åœºè°ƒç ”**ã€**å®æˆ˜**ã€**GitHubå…³æ³¨åº¦å’Œæ´»è·ƒåº¦** ç­‰ **Electron** éƒ½å æœ‰ä¼˜åŠ¿ï¼Œå¦‚ä¸‹\n\n-  å¸‚åœºæ¡ˆä¾‹è¾ƒå¤šï¼Œå„å¤§å‹ä¼ä¸šéƒ½åœ¨ä½¿ç”¨\n-  å¼€å‘å®æˆ˜ä»£ç æ›´ç›´è§‚ï¼Œå®¹æ˜“ç†è§£å’Œç»´æŠ¤ï¼Œå„ç§æ–‡æ¡£å¥å…¨ã€ç½‘ç»œèµ„æ–™è¾ƒå¤šä¸”è´¨é‡è¾ƒé«˜ï¼Œå‘¨è¾¹è¾…åŠ©å·¥å…·é½å…¨ï¼Œå¼€å‘æ•ˆç‡å¯å¤§å¤§æé«˜\n-  **GitHub** å…³æ³¨åº¦å’Œæ´»è·ƒåº¦æŒç»­æ”€å‡\n\næ‰€æœ‰ç»“åˆä»¥ä¸Šæƒ…å†µï¼Œä¹‹åä¼šç”¨ä»¥ä¸‹æŠ€æœ¯æ ˆåšä¸€ä¸ªå®Œå–„çš„æ¡ˆä¾‹\n\n- **è·¨å¹³å°æ¡Œé¢åº”ç”¨æ¡†æ¶ï¼š**`electron`  <i style=\"color:#aaa\">ï¼ˆChromium + Node.jsï¼‰</i>\n- **UIåº“ï¼š** `iView`\n- **jsæ¡†æ¶ï¼š** `Vue.js`\n- **è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼š**  `webpack`\n- **HTML5ã€CSS3ã€ES6**\n\n\n  [1]: https://segmentfault.com/a/1190000003870613\n  [2]: https://zh.wikipedia.org/wiki/Electron_%28%E8%BD%AF%E4%BB%B6%E6%A1%86%E6%9E%B6%29\n  [3]: http://note.youdao.com\n  [4]: https://www.dingtalk.com/?source=2202&lwfrom=2017120202092064209309201\n  [5]: https://im.qq.com/pcqq/\n  [6]: https://github.com/nwjs/nw.js/wiki/List-of-apps-and-companies-using-nw.js\n  [7]: https://bitbucket.org/chromiumembedded/cef\n  [8]: https://bitbucket.org/chromiumembedded/cef/overview","tags":["æ¡Œé¢åº”ç”¨"],"categories":["Node"]},{"title":"ç”¨ Hexo Next GitHubPages æ­å»ºæ¼‚äº®çš„å…è´¹åšå®¢","url":"%2FhexoGithubpagesNext.html","content":"{% fi https://cdn.lishaoy.net/hexoGithubpagesNext/git_hexo.jpeg, GitHubPages + Hexo, GitHubPages + Hexo %}\n<div class=\"text-center\">\n    <h3>ä»Šå¤©æ­å»ºäº†è‡ªå·±çš„åšå®¢ ğŸ˜</h3>\n</div>\n\nèŠ±è´¹äº† **ä¸€å¤©åŠ** çš„æ—¶é—´ï¼Œç»ˆäºæŠŠæˆ‘çš„ **ä¸ªäººåšå®¢** æ­å»ºå®Œæˆï¼Œä¸‹é¢æˆ‘å†™ä¸‹æ­å»ºåšå®¢çš„è¿‡ç¨‹ï¼Œå…¶å®æŒºç®€å•çš„ ğŸ™ƒ\n\n---\n\n<!-- more -->\n\n### åšå®¢æ‰€ç”¨æŠ€æœ¯ ï¼ˆHexo + Next + GitHubPagesï¼‰\n\nåœ¨æ–‡ç« çš„æœ«å°¾æˆ‘ä¼š **è´´å‡º** æˆ‘åŸºäº **Hexo + Next + GitHubPages** æ­å»ºåšå®¢ï¼Œæ‰€å‚è€ƒçš„æ–‡ç« é“¾æ¥ã€‚\n\nå¦‚æœï¼Œä½ ä¹Ÿæƒ³ç”¨è¿™äº›æŠ€æœ¯æ­å»ºæ¼‚äº®çš„åšå®¢ï¼Œä½ å°±éœ€è¦äº†è§£ä¸‹ `Hexo` ã€ `Next` ã€ `GitHubPages` è¿™ä¸‰ä¸ªå•è¯ï¼Œä¸‹é¢ä¼šé€ä¸ªè§£é‡Šã€‚\n\n####  ä»€ä¹ˆæ˜¯ Hexo\n> **Hexo** æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚**Hexo** ä½¿ç”¨ *Markdown*ï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚ -- [Hexo](https://hexo.io/zh-cn/docs/index.html)\n\n####  ä»€ä¹ˆæ˜¯ Next\n\n> **NexT** æ˜¯ **Hexo**çš„ä¸€ä¸ªä¸»é¢˜ï¼ˆthemeï¼‰ï¼Œæ‹¥æœ‰ä¸°å¯Œè€Œç®€å•çš„é…ç½®ï¼Œç»“åˆç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œå¯ä»¥æ‰“é€ å±äºæ‚¨è‡ªå·±çš„åšå®¢ã€‚ -- [Next](http://theme-next.iissnan.com)\n\n#### ä»€ä¹ˆæ˜¯ GitHubPages\n\n> GitHub Pages is a static site hosting service designed to host your personal, organization, or project pages directly from a GitHub repository. -- [GitHubPages](https://help.github.com/articles/what-is-github-pages/)\n\n**ç¿»è¯‘è¿‡æ¥å¤§æ¦‚æ˜¯ï¼š** GitHubé¡µé¢æ˜¯ä¸€ä¸ªé™æ€çš„ç«™ç‚¹æ‰˜ç®¡æœåŠ¡ï¼Œæ—¨åœ¨ä»GitHubå­˜å‚¨åº“ä¸­ç›´æ¥æ‰˜ç®¡æ‚¨çš„ä¸ªäººã€ç»„ç»‡æˆ–é¡¹ç›®é¡µé¢ã€‚\n\næ‰€ä»¥ï¼Œ`Hexo` ã€ `Next` ã€ `GitHubPages` é…åˆèµ·æ¥å°±å¯ä»¥å…è´¹æ­å»ºæ¼‚äº®çš„ **ä¸ªäººåšå®¢** , æ˜¯ä¸æ˜¯å¾ˆçˆ½ ğŸ˜†\n\n----\n### å¦‚ä½•\båŸºäº \bHexo æ­å»ºåšå®¢\n\nåŸºäº \bHexo æ­å»ºåšå®¢ï¼Œåªéœ€ç®€å•çš„å‡ æ­¥ï¼Œå°±èƒ½å®Œæˆ **ä¸ªäººåšå®¢** çš„æ­å»ºã€‚\n\n#### \bå‡†å¤‡å·¥ä½œ\n\n##### ä¸‹è½½å®‰è£… \b`nodejs`\n\n`node` ä¼šè‡ªå¸¦ \b`npm` åŒ…ç®¡ç†å·¥å…·ï¼Œ*å»ºè®®å®‰è£…* `yarn` æ¥ç®¡ç†ä¾èµ– ï¼ˆ\bå› ä¸º `hexo` è²Œä¼¼æ˜¯ç”¨ `yarn` ç®¡ç† **ä¾èµ–** çš„ï¼Œå¦åˆ™å¯ä»¥å›å‡ºç° **ä¾èµ–\b** é—®é¢˜ï¼‰ã€‚\n\n**Mac** ç”¨æˆ·å¯ä»¥ç”¨ `brew` å®‰è£…ï¼Œ**Windows** å¯ä»¥ç”¨ `cmder` æˆ–å»å®˜ç½‘ä¸‹å®‰è£…åŒ…ç¨‹åºã€‚\n\n```\bvim\n    brew install node\n```\n\nç„¶åç”¨ \b`npm` å®‰è£… `yarn`\n\n```vim\n    npm install yarn\n```\n\n##### å®‰è£…\b `git`\n\n**Mac\b** ç”¨æˆ·å¯ç”¨åˆšå®‰è£…çš„ `yarn` åŒ…ç®¡ç†å·¥å…·å®‰è£… `git`ï¼Œ**Windows** å¯ä»¥ `cmder` æˆ–å»å®˜ç½‘ä¸‹å®‰è£…åŒ…ç¨‹åºã€‚\n\n```vim\n    yarn add git -g\n```\n\n##### å®‰è£… `hexo`\n\nè¿›å…¥ä½ çš„é¡¹ç›®ç›®å½•ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯ `myblog` ï¼Œ\n\n```vim\n    cd myblog\n```\n\nç„¶åç”¨ `\byarn` å®‰è£… `hexo`ã€‚\n\n```vim\n    yarn add hexo -S\n```\n\næ­¤æ—¶ï¼Œç¯å¢ƒéƒ½å‡†å¤‡å¥½äº†ï¼Œå°±å¯ä»¥å¼€å§‹æ­å»º **\bhexo** åšå®¢äº† ğŸ˜œ\n\n----\n#### æ­å»ºæœ¬åœ°åšå®¢\n\n##### è¿›å…¥ä½ çš„é¡¹ç›®ç›®å½•\n\næ¯”å¦‚ï¼šæˆ‘çš„æ˜¯ `myblog`ã€‚\n\n```vim\n    cd myblog\n```\n\n##### é¡¹ç›®åˆå§‹åŒ–\n\né¡¹ç›®åˆå§‹åŒ–ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆåšå®¢æ¨¡æ¿ï¼Œä»¥åå†™åšå®¢åªéœ€ç”¨ `markdown` è¯­æ³•ç¼–å†™å¯¹åº”çš„ `.md` æ–‡ä»¶å³å¯ âœï¸ ã€‚\n\n```vim\n    hexo init\n```\n##### å®‰è£…æ‰€æœ‰çš„ä¾èµ– \n\nå»ºè®®ä½¿ç”¨ç”¨ `yarn` ï¼Œå¦åˆ™ä¼šå‡ºç°ä¾èµ–é—®é¢˜ï¼ˆ*åœ¨æœ¬æ–‡ä¹‹åæœ‰ç›¸å…³ä»‹ç»*ï¼‰ã€‚\n\n```vim\n    yarn install\n```\n##### æœ€åï¼Œå¯åŠ¨æœ¬åœ°æœåŠ¡\n\nåœ¨æµè§ˆå™¨è¾“å…¥ `localhost:4000` å³å¯é¢„è§ˆåšå®¢\n\n```vim\n    hexo server\n```\n\n**å¦‚å›¾:** ğŸŒ </br>\n<img src=\"https://cdn.lishaoy.net/hexoGithubpagesNext/hexoinit.png\" alt=\"hexo\" width=\"100%\" title=\"hexoæœ€åˆçš„æ ·å­ ğŸ˜‚\" align=\"center\" />\n\n----\n### å…³è” GitHub\n\né€šè¿‡ **GitHub** çš„ `pages` åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæˆ‘ä»¬çš„åšå®¢æ‰˜ç®¡åˆ° **GitHub** ï¼Œè€Œæ— éœ€å»è´­ä¹°äº‘æœåŠ¡å™¨ ğŸ˜‹ ,è½»æ¾æ„‰å¿«çš„æ„å»ºå…è´¹åšå®¢ã€‚\n\n#### åˆ›å»º GitHub è´¦æˆ·\n\næˆ‘ç›¸ä¿¡ ğŸ¤” å¤§å®¶åº”è¯¥éƒ½æœ‰ **GitHub** è´¦å·äº†ï¼Œå¦‚æœæ²¡æœ‰å¯å» [GitHub](https://github.com/) å®˜ç½‘æŒ‰ç…§æ­¥éª¤åˆ›å»ºè´¦æˆ·å³å¯ã€‚\n\n#### é…ç½®å…³è” GitHub\n\n- æœ‰äº† **GitHub** è´¦å·ä¹‹åï¼Œç™»å½• **GitHub** ï¼Œåˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œé¡¹ç›®åç§°æœ€å¥½å’Œä½ æœ¬åœ°çš„é¡¹ç›®ä¸€è‡´ï¼Œæ¯”å¦‚ï¼š `myblog`\n\n{% note danger %}\né¡¹ç›®å»ºå¥½ä¹‹åï¼Œä¸€å®šè¦å¼€å¯ **GitHub Pages** åŠŸèƒ½ âš ï¸\n{% endnote %}\n\n- ç‚¹å‡»å¦‚å›¾ `Settings` å¼€å¯ï¼Œ**GitHub Pages** åŠŸèƒ½\n\n<img src=\"https://cdn.lishaoy.net/hexoGithubpagesNext/gitpages.png\" alt=\"GitHubPages\" width=\"100%\" title=\"GitHubPages Settings\" align=\"center\" />\n\n- é€‰æ‹© `master branch` , ç„¶å **Save** \n\n<img src=\"https://cdn.lishaoy.net/hexoGithubpagesNext/gitpages2.png\" alt=\"GitHubPages\" width=\"100%\" title=\"GitHubPages Source\" align=\"center\" />\n\n- å¤åˆ¶ä½ çš„é¡¹ç›®è¿æ¥ï¼Œå¦‚å›¾\n\n<img src=\"https://cdn.lishaoy.net/hexoGithubpagesNext/gitpages3.png\" alt=\"GitHubPages\" width=\"100%\" title=\"GitHubPages URL\" align=\"center\" />\n\n- ç„¶ååœ¨ä½ æœ¬åœ°é¡¹ç›®æ ¹ç›®å½•æ‰¾åˆ° `_config.yml` æ–‡ä»¶ï¼Œç²˜è´´åˆ°ä»¥ä¸‹ä½ç½®\n\n```yml\n# Deployment\n## Docs: https://hexo.io/docs/deployment.html\ndeploy:\n  type: git\n  repository: https://github.com/persilee/MyBlog.git\n  branch: master\n```\n\n#### å®Œæˆå…³è”\n\nå®Œæˆä»¥ä¸Šæ­¥éª¤ä¹‹åï¼Œå°±å¯ä»¥æŠŠè‡ªå·±æœ¬åœ°é¡¹ç›®æ¨é€åˆ° **GitHub** æ‰˜ç®¡ï¼Œåªå‰©ä¸‹3æ­¥ ğŸ˜‹\n\n1. å®‰è£… `hexo-deployer-git` æ’ä»¶ï¼ˆå¯ä»¥é€šè¿‡ç®€å•çš„å‘½ä»¤,å®Œæˆæ–‡ä»¶ç”ŸæˆåŠæ¨é€åŠŸèƒ½ï¼‰\n\n```vim\n    yarn add hexo-deployer-git -S\n```\n\n2. è¿è¡Œ `hexo g` ï¼ˆç”Ÿæˆæœ¬åœ°æ–‡ä»¶ï¼‰\n\n```vim\n    hexo g\n```\n\n3. è¿è¡Œ `hexo d` ï¼ˆå°†æœ¬åœ°æ–‡ä»¶æ¨é€åˆ° **GitHub** ï¼Œå’Œ `git push` åŠŸèƒ½ç›¸åŒï¼‰\n\n```vim\n    hexo d\n```\næ­¤æ—¶ï¼Œ**GitHub** åº”è¯¥å·²ç»™ä½ ç”Ÿæˆäº†è®¿é—®è¿æ¥ï¼Œè¿æ¥æ ¼å¼æ˜¯: `ä½ çš„è´¦å·åç§°` + `.github.io` + `\\é¡¹ç›®åç§°`,ä¹Ÿå¯ä»¥å»åˆšæ‰ `GitHubPages` è®¾ç½®é¡µé¢æŸ¥çœ‹\nä¾‹å¦‚æˆ‘çš„ï¼š[https:\\\\persilee.github.io\\MyBlog](https:\\\\persilee.github.io\\MyBlog)\n\nè¿™æ—¶ï¼Œä½ å°±å¯ä»¥æŠŠè¿æ¥å‘ç»™å°ä¼™ä¼´ä»¬ï¼Œä»–ä»¬é€šè¿‡è¿æ¥éƒ½å¯ä»¥è®¿é—®ä½ çš„ **åšå®¢** ğŸ™ƒã€‚\n\n{% note danger %}\n**è¿™é‡Œéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼šåœ¨æ‰§è¡Œ `hexo g` å‘½ä»¤æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹ `error`,åº”è¯¥æ˜¯ `yarn` å’Œ `npm` å†²çªçš„ä¾èµ–çš„é—®é¢˜ï¼Œæ‰€ä»¥å‰é¢æ–‡ç« å»ºè®®ä½¿ç”¨ `yarn` ç®¡ç†åŒ…ä¾èµ–**\n{% endnote %}\n\n```vim\nERROR Plugin load failed: hexo-renderer-marked\nError: EISDIR: illegal operation on a directory, read\nERROR Plugin load failed: hexo-server\nError: EISDIR: illegal operation on a directory, read\nERROR Plugin load failed: hexo-renderer-stylus\nError: EISDIR: illegal operation on a directory, read\n```\n\nè§£å†³åŠæ³•ï¼Œå…ˆç”¨ `yarn` åˆ†åˆ«ç§»é™¤ï¼Œå†é‡æ–°å®‰è£…ï¼Œå¦‚ä¸‹\n\n```vim\n## å…ˆç§»é™¤\nyarn remove hexo-renderer-marked\n\nyarn remove hexo-renderer-stylus\n\nyarn remove hexo-server\n\n## å†å®‰è£…\nyarn add hexo-renderer-marked -S \n\nyarn add hexo-renderer-stylus -S\n\nyarn add hexo-server -S\n```\n\nåœ¨æ‰§è¡Œ `hexo g` ,é¡ºåˆ©æ‰§è¡Œ ğŸ‘Œ\n\n----\n\n### ç»‘å®šåŸŸå\n\næˆ‘ä»¬å·²ç»å¯ä»¥é€šè¿‡ **GitHub** åˆ†å‘ç»™æˆ‘çš„åœ°å€è®¿é—® **åšå®¢** ï¼Œä½†æ˜¯ï¼Œè¿™å¯¹äºæˆ‘ä»¬è¿™äº›çˆ± **æŠ˜è…¾** çš„ **ç¨‹åºçŒ¿ğŸ‘¨â€ğŸ’»â€** æ¥è¯´ï¼Œè¿˜ä¸å¤Ÿï¼Œå¼„ä¸ªè‡ªå·±çš„ **åŸŸå** æ‰å¤Ÿæ‹‰é£ğŸ˜‚ã€‚\n\näºæ˜¯ã€‚ã€‚ã€‚\n\nå¼€å§‹ç»‘å®šè‡ªå·±çš„ **åŸŸå** [lishaoy.net](https://lishaoy.net)\n\nç„¶è€Œï¼Œæˆ‘ä»¬ç»‘å®š **åŸŸå** ä¹‹åï¼Œåªæ”¯æŒ `http` åè®®ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨ **Google** æµè§ˆå™¨è®¿é—®æ—¶ï¼Œä¼šæœ‰ä¸å®‰å…¨æ ‡å‡†ï¼Œè€Œä¸”ï¼Œå¾ˆå®¹æ˜“è¢«æ’å…¥å¹¿å‘Šï¼Œäºæ˜¯ã€‚ã€‚ã€‚**æŠ˜è…¾** èµ°èµ·ğŸŒï¼šæä¸ª `https`\n\nè½¬å…¥æ­£é¢˜ï¼Œç»è¿‡ä¸€ç•ª **æŠ˜è…¾** ï¼Œé‡‡ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡ [Netlify](https://app.netlify.com/sites/lishaoy/settings/domain#ssl-tls-certificate) æ¥æä¾›å…è´¹çš„SSL/TLSè¯ä¹¦ã€‚\n\nå½“ç„¶ï¼Œè¿™é‡Œæˆ‘æä¾›2ç§æ–¹å¼ç»‘å®šåŸŸåï¼Œä¸€ç§æ˜¯ `HTTP` (ä¸å®‰å…¨çš„ç½‘ç»œåè®®)ã€ä¸€ç§æ˜¯ `HTTPS` ï¼ˆå®‰å…¨çš„ç½‘ç»œåè®®ï¼Œåœ¨ **Google** æµè§ˆå™¨ä¸Šå›æœ‰ä¸€æŠŠå°é”ï¼Œå¦‚å›¾ï¼‰\n\n<img src=\"https://cdn.lishaoy.net/hexoGithubpagesNext/lock.png\" alt=\"Netlity\" width=\"100%\" title=\"Google HTTPS çŠ¶æ€æ ‡è¯†\" align=\"center\" />\n\n#### `HTTP` ç»‘å®šåŸŸå\n\n##### è®¾ç½®åŸŸåè§£æè§„åˆ™\n\né¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å»è¿è¡Œå•†ï¼Œæ–°å¢åŸŸåè§£æè§„åˆ™ï¼Œå¦‚å›¾\n\n<img src=\"https://cdn.lishaoy.net/hexoGithubpagesNext/domain.png\" alt=\"domain\" width=\"100%\" title=\"åŸŸåè§£æè§„åˆ™\" align=\"center\" />\n\n##### æ–°å¢ `CNAME` æ–‡ä»¶\n\né…ç½®å¥½åŸŸåè§£æè§„åˆ™ä¹‹åï¼Œè¿˜éœ€è¦åœ¨é¡¹ç›®çš„ `.\\source\\` è·¯å¾„ä¸‹æ–°å¢ `CNAME` æ–‡ä»¶ï¼Œè¾“å…¥å†…å®¹ `ä½ çš„åŸŸå` ,å¦‚ï¼š[lishaoy.net](https://lishaoy.net)\n##### é‡æ–°æ–°ç”Ÿæˆæ–‡ä»¶ï¼Œæ¨é€åˆ°GitHub\n\né‡æ–°ç”Ÿæˆæ–‡ä»¶ï¼Œè¿è¡Œ `hexo g`\n\n```vim\n    hexo g\n```\næ¨é€ **GitHub**\n\n```vim\n    hexo d\n```\n\n-----\n\n#### `HTTPS` ç»‘å®šåŸŸå\n##### æ³¨å†Œ `Netlify` è´¦å·\n\né¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ³¨å†Œä¸€ä¸ª [Netlify](https://app.netlify.com/sites/lishaoy/settings/domain#ssl-tls-certificate) è´¦å·ï¼Œåœ°å€ï¼š[Netlify](https://app.netlify.com/sites/lishaoy/settings/domain#ssl-tls-certificate) ï¼Œå¯ä»¥é€‰æ‹©ç”¨ **GitHub** æ³¨å†Œã€‚\n\n<img src=\"https://cdn.lishaoy.net/hexoGithubpagesNext/netlify.png\" alt=\"Netlity\" width=\"100%\" title=\"Netlity Login\" align=\"center\" />\n\n##### æ–°å¢ç«™ç‚¹\n\n- ç‚¹å‡»å¦‚å›¾æŒ‰é’® `New site from Git`,æ¥æ–°å¢ **ç«™ç‚¹**\n\n<img src=\"https://cdn.lishaoy.net/hexoGithubpagesNext/netlify1.png\" alt=\"Netlity\" width=\"100%\" title=\"New site from Git\" align=\"center\" />\n\n- ç„¶åï¼Œç‚¹å‡»å¦‚å›¾æŒ‰é’® `GitHub` \n\n<img src=\"https://cdn.lishaoy.net/hexoGithubpagesNext/netlify2.png\" alt=\"Netlity\" width=\"100%\" title=\"GitHub\" align=\"center\" />\n\n- é€‰æ‹©ä½ çš„é¡¹ç›®ï¼Œæ¯”å¦‚æˆ‘çš„ `MyBlog`\n\n<img src=\"https://cdn.lishaoy.net/hexoGithubpagesNext/netlify3.png\" alt=\"Netlity\" width=\"100%\" title=\"Select Site\" align=\"center\" />\n\n- ç‚¹å‡» `Deploy site`\n\n<img src=\"https://cdn.lishaoy.net/hexoGithubpagesNext/netlify4.png\" alt=\"Netlity\" width=\"100%\" title=\"Deploy site\" align=\"center\" />\n\n- çœ‹åˆ°å¦‚å›¾é¡µé¢ï¼Œè¡¨ç¤ºæˆåŠŸï¼Œå†ç‚¹å‡» `Site settings` \n\n<img src=\"https://cdn.lishaoy.net/hexoGithubpagesNext/netlify5.png\" alt=\"Netlity\" width=\"100%\" title=\"Getting started\" align=\"center\" />\n\n<img src=\"https://cdn.lishaoy.net/hexoGithubpagesNext/netlify6.png\" alt=\"Netlity\" width=\"100%\" title=\"Site details\" align=\"center\" />\n\n- å†ç‚¹å‡» `Change site name` ä¿®æ”¹çŸ­åç§°ï¼Œæ–¹ä¾¿è®°å¿†\n\n- åœ¨è‡ªå·±çš„åŸŸåç®¡ç†ä¸­è®¾ç½® **DNS** ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ **é˜¿é‡Œäº‘** ï¼Œåœ¨ç®¡ç†ç•Œé¢æ·»åŠ å¦‚å›¾è§„åˆ™\n\n<img src=\"https://cdn.lishaoy.net/hexoGithubpagesNext/netlify7.png\" alt=\"Netlity\" width=\"100%\" title=\"è®¾ç½®åŸŸåè§„åˆ™\" align=\"center\" />\n\n- åœ¨ç‚¹å‡» `Domain management` ä¸‹çš„ `HTTPS` ï¼ŒæŒ‰ç…§æ­¥éª¤å®Œæˆæ“ä½œï¼Œç¨ç­‰ç‰‡åˆ»ï¼Œå³å¯çœ‹åˆ°æˆ‘ä»¬çš„ **åŸŸå** å·²ç»ä¸Šé” ğŸ” \n\n<img src=\"https://cdn.lishaoy.net/hexoGithubpagesNext/netlify8.png\" alt=\"Netlity\" width=\"100%\" title=\"lishaoy.netä¸Šé”\" align=\"center\" />\n\nğŸ˜ ğŸ˜œ ğŸ˜„ ğŸ˜† ğŸ˜‚ ğŸ¤£ ...\n\n----\n### æ›´æ¢ `next` ä¸»é¢˜\n\n`hexo` çš„ä¸»é¢˜å¾ˆå¤šï¼Œä½ å¯ä»¥é€‰æ‹©å…¶ä»–å–œæ¬¢ â¤ï¸ çš„ä¸»é¢˜ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ `next` ä¸»é¢˜ã€‚\n\n#### å®‰è£… `next` ä¸»é¢˜\n\næ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå®‰è£… `next` ä¸»é¢˜\n\n```vim\n    git clone https://github.com/iissnan/hexo-theme-next.git themes/next\n```\n\n#### æ›´æ”¹é…ç½®æ–‡ä»¶\n\nä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„ `./_config.yml` æ–‡ä»¶ï¼Œå¦‚ä¸‹\n\n```vim\n# Extensions\n## Plugins: https://hexo.io/plugins/\n## Themes: https://hexo.io/themes/\ntheme: next\n```\n\n##### é‡æ–°æ–°ç”Ÿæˆæ–‡ä»¶ï¼Œæ¨é€åˆ°GitHub\n\né‡æ–°ç”Ÿæˆæ–‡ä»¶ï¼Œè¿è¡Œ `hexo g`\n\n```vim\n    hexo g\n```\næ¨é€ **GitHub**\n\n```vim\n    hexo d\n```\n\nä¹Ÿå¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¯åŠ¨ä¸€ä¸ªæœ¬åœ°æœåŠ¡ï¼Œè°ƒè¯•ç¡®å®šæ— é—®é¢˜ä¹‹åå† æ¨é€åˆ° **GitHub** \n\n```vim\n    hexo s --debug\n```\n\næœ¬åœ°æœåŠ¡å¯åŠ¨åï¼Œå¯ä»¥åœ¨æµè§ˆå™¨è¾“å…¥ `http://localhost:4000` é¢„è§ˆï¼Œå¦‚å›¾\n\n<img src=\"https://cdn.lishaoy.net/hexoGithubpagesNext/nextpage.png\" alt=\"next\" width=\"100%\" title=\"next ä¸»é¢˜æœ€åˆçš„æ ·å­ğŸ™ƒ\" align=\"center\" />\n\n**æœ¬æ–‡åˆ°æ­¤å‘Šä¸€æ®µè½ï¼Œå…³äº `next` ä¸»é¢˜ç¾åŒ–çš„é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹é“¾æ¥æ–‡ç«  ğŸ¤—**\n\nä»¥ä¸‹æ˜¯æˆ‘æ­å»º **åšå®¢** å‚è€ƒçš„æ–‡ç« é“¾æ¥ ğŸ‘‡ \n\n{% note default %} \n\n- [hexoçš„nextä¸»é¢˜ä¸ªæ€§åŒ–æ•™ç¨‹:æ‰“é€ ç‚«é…·ç½‘ç«™](http://shenzekun.cn/hexo%E7%9A%84next%E4%B8%BB%E9%A2%98%E4%B8%AA%E6%80%A7%E5%8C%96%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B.html)\n- [Hexoæ­å»ºåšå®¢æ•™ç¨‹](https://thief.one/2017/03/03/Hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/)\n- [Hexoåšå®¢æ­å»ºå…¨æ”»ç•¥(äºŒ)ï¼šNexTä¸»é¢˜é…ç½®](https://www.jianshu.com/p/d95cff938277)\n\n {% endnote %}\n","tags":["Next"],"categories":["hexo"]}]